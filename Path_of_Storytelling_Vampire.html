<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Path of Storytelling: Vampire</title>
<style title="Twine CSS">@-webkit-keyframes appear{0%{opacity:0}to{opacity:1}}@keyframes appear{0%{opacity:0}to{opacity:1}}@-webkit-keyframes fade-in-out{0%,to{opacity:0}50%{opacity:1}}@keyframes fade-in-out{0%,to{opacity:0}50%{opacity:1}}@-webkit-keyframes rumble{50%{-webkit-transform:translateY(-0.2em);transform:translateY(-0.2em)}}@keyframes rumble{50%{-webkit-transform:translateY(-0.2em);transform:translateY(-0.2em)}}@-webkit-keyframes shudder{50%{-webkit-transform:translateX(0.2em);transform:translateX(0.2em)}}@keyframes shudder{50%{-webkit-transform:translateX(0.2em);transform:translateX(0.2em)}}@-webkit-keyframes box-flash{0%{background-color:white;color:white}}@keyframes box-flash{0%{background-color:white;color:white}}@-webkit-keyframes pulse{0%{-webkit-transform:scale(0, 0);transform:scale(0, 0)}20%{-webkit-transform:scale(1.2, 1.2);transform:scale(1.2, 1.2)}40%{-webkit-transform:scale(0.9, 0.9);transform:scale(0.9, 0.9)}60%{-webkit-transform:scale(1.05, 1.05);transform:scale(1.05, 1.05)}80%{-webkit-transform:scale(0.925, 0.925);transform:scale(0.925, 0.925)}to{-webkit-transform:scale(1, 1);transform:scale(1, 1)}}@keyframes pulse{0%{-webkit-transform:scale(0, 0);transform:scale(0, 0)}20%{-webkit-transform:scale(1.2, 1.2);transform:scale(1.2, 1.2)}40%{-webkit-transform:scale(0.9, 0.9);transform:scale(0.9, 0.9)}60%{-webkit-transform:scale(1.05, 1.05);transform:scale(1.05, 1.05)}80%{-webkit-transform:scale(0.925, 0.925);transform:scale(0.925, 0.925)}to{-webkit-transform:scale(1, 1);transform:scale(1, 1)}}@-webkit-keyframes shudder-in{0%, to{-webkit-transform:translateX(0em);transform:translateX(0em)}5%, 25%, 45%{-webkit-transform:translateX(-1em);transform:translateX(-1em)}15%, 35%, 55%{-webkit-transform:translateX(1em);transform:translateX(1em)}65%{-webkit-transform:translateX(-0.6em);transform:translateX(-0.6em)}75%{-webkit-transform:translateX(0.6em);transform:translateX(0.6em)}85%{-webkit-transform:translateX(-0.2em);transform:translateX(-0.2em)}95%{-webkit-transform:translateX(0.2em);transform:translateX(0.2em)}}@keyframes shudder-in{0%, to{-webkit-transform:translateX(0em);transform:translateX(0em)}5%, 25%, 45%{-webkit-transform:translateX(-1em);transform:translateX(-1em)}15%, 35%, 55%{-webkit-transform:translateX(1em);transform:translateX(1em)}65%{-webkit-transform:translateX(-0.6em);transform:translateX(-0.6em)}75%{-webkit-transform:translateX(0.6em);transform:translateX(0.6em)}85%{-webkit-transform:translateX(-0.2em);transform:translateX(-0.2em)}95%{-webkit-transform:translateX(0.2em);transform:translateX(0.2em)}}.debug-mode tw-expression[type=hookref]{background-color:rgba(115,123,140,0.15)}.debug-mode tw-expression[type=hookref]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"?" attr(name)}.debug-mode tw-expression[type=variable]{background-color:rgba(140,128,115,0.15)}.debug-mode tw-expression[type=variable]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"$" attr(name)}.debug-mode tw-expression[type=tempVariable]{background-color:rgba(140,128,115,0.15)}.debug-mode tw-expression[type=tempVariable]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"_" attr(name)}.debug-mode tw-expression[type=macro]:nth-of-type(4n+0){background-color:rgba(136,153,102,0.15)}.debug-mode tw-expression[type=macro]:nth-of-type(2n+1){background-color:rgba(102,153,102,0.15)}.debug-mode tw-expression[type=macro]:nth-of-type(4n+2){background-color:rgba(102,153,136,0.15)}.debug-mode tw-expression[type=macro][name="display"]{background-color:rgba(0,170,255,0.1) !important}.debug-mode tw-expression[type=macro][name="if"],.debug-mode tw-expression[type=macro][name="if"]+tw-hook:not([name]),.debug-mode tw-expression[type=macro][name="unless"],.debug-mode tw-expression[type=macro][name="unless"]+tw-hook:not([name]),.debug-mode tw-expression[type=macro][name="elseif"],.debug-mode tw-expression[type=macro][name="elseif"]+tw-hook:not([name]),.debug-mode tw-expression[type=macro][name="else"],.debug-mode tw-expression[type=macro][name="else"]+tw-hook:not([name]){background-color:rgba(0,255,0,0.1) !important}.debug-mode tw-expression[type=macro].false{background-color:rgba(255,0,0,0.2) !important}.debug-mode tw-expression[type=macro].false+tw-hook:not([name]){display:none}.debug-mode tw-expression[type=macro][name="a"],.debug-mode tw-expression[type=macro][name="array"],.debug-mode tw-expression[type=macro][name="datamap"],.debug-mode tw-expression[type=macro][name="dataset"],.debug-mode tw-expression[type=macro][name="colour"],.debug-mode tw-expression[type=macro][name="color"],.debug-mode tw-expression[type=macro][name="num"],.debug-mode tw-expression[type=macro][name="number"],.debug-mode tw-expression[type=macro][name="text"],.debug-mode tw-expression[type=macro][name="print"]{background-color:rgba(255,255,0,0.2) !important}.debug-mode tw-expression[type=macro][name="put"],.debug-mode tw-expression[type=macro][name="set"]{background-color:rgba(255,128,0,0.2) !important}.debug-mode tw-expression[type=macro][name="script"]{background-color:rgba(255,191,0,0.2) !important}.debug-mode tw-expression[type=macro][name="style"]{background-color:rgba(185,198,198,0.2) !important}.debug-mode tw-expression[type=macro][name^="link"],.debug-mode tw-expression[type=macro][name^="click"],.debug-mode tw-expression[type=macro][name^="mouseover"],.debug-mode tw-expression[type=macro][name^="mouseout"]{background-color:rgba(128,223,32,0.2) !important}.debug-mode tw-expression[type=macro][name^="replace"],.debug-mode tw-expression[type=macro][name^="prepend"],.debug-mode tw-expression[type=macro][name^="append"],.debug-mode tw-expression[type=macro][name^="remove"]{background-color:rgba(223,96,32,0.2) !important}.debug-mode tw-expression[type=macro][name="live"]{background-color:rgba(32,96,223,0.2) !important}.debug-mode tw-expression[type=macro]::before{content:"(" attr(name) ":)";padding:0 0.5rem;font-size:1rem;vertical-align:middle;line-height:normal;background-color:inherit;border:1px solid rgba(255,255,255,0.5)}.debug-mode tw-hook{background-color:rgba(0,85,255,0.1) !important}.debug-mode tw-hook::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"["}.debug-mode tw-hook::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"]"}.debug-mode tw-hook[name]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"]<" attr(name) "|"}.debug-mode tw-pseudo-hook{background-color:rgba(255,170,0,0.1) !important}.debug-mode tw-collapsed::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"{"}.debug-mode tw-collapsed::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"}"}.debug-mode tw-verbatim::before,.debug-mode tw-verbatim::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"`"}.debug-mode tw-align[style*="text-align: center"]{background:linear-gradient(to right, rgba(255,204,189,0) 0%, rgba(255,204,189,0.25) 50%, rgba(255,204,189,0) 100%)}.debug-mode tw-align[style*="text-align: left"]{background:linear-gradient(to right, rgba(255,204,189,0.25) 0%, rgba(255,204,189,0) 100%)}.debug-mode tw-align[style*="text-align: right"]{background:linear-gradient(to right, rgba(255,204,189,0) 0%, rgba(255,204,189,0.25) 100%)}.debug-mode tw-column{background-color:rgba(189,228,255,0.2)}.debug-mode tw-enchantment{animation:enchantment 0.5s infinite;-webkit-animation:enchantment 0.5s infinite;border:1px solid}.debug-mode tw-link::after,.debug-mode tw-broken-link::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:attr(passage-name)}.debug-mode tw-include{background-color:rgba(204,128,51,0.1)}.debug-mode tw-include::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:attr(type) ' "' attr(title) '"'}@keyframes enchantment{0%,to{border-color:#ffb366}50%{border-color:#6fc}}@-webkit-keyframes enchantment{0%,to{border-color:#ffb366}50%{border-color:#6fc}}tw-debugger{position:fixed;box-sizing:border-box;bottom:0;right:0;z-index:999999;min-width:10em;min-height:1em;padding:1em;font-size:1.25em;font-family:sans-serif;border-left:solid #000 2px;border-top:solid #000 2px;border-top-left-radius:.5em;background:#fff;opacity:1}tw-debugger select{margin-right:1em;width:12em}tw-debugger button{border-radius:3px;border:solid #999 1px;margin:auto 4px;background-color:#fff;font-size:inherit}tw-debugger button.enabled{background-color:#eee;box-shadow:inset #ddd 3px 5px 0.5em}tw-debugger .variables{display:-webkit-box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-direction:normal;-webkit-box-orient:vertical;-webkit-flex-direction:column;-moz-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:absolute;bottom:100%;left:-2px;right:0;padding:1em;max-height:40vh;overflow-y:scroll;overflow-x:hidden;z-index:999998;background:#fff;border:inherit;border-top-left-radius:.5em;border-bottom-left-radius:.5em;font-size:0.8em}tw-debugger .variables:empty,tw-debugger .variables[hidden]{display:none}tw-debugger .variables .variable-row{display:-webkit-box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-webkit-flex-direction:row;-moz-flex-direction:row;-ms-flex-direction:row;flex-direction:row;flex-shrink:0}tw-debugger .variables .variable-row:nth-child(2n){background:#EEE}tw-debugger .variables .variable-name{display:inline-block;width:50%}tw-debugger .variables .variable-name::before{content:"$"}tw-debugger .variables .variable-name.temporary::before{content:"_"}tw-debugger .variables .variable-name .temporary-variable-scope{opacity:0.8;font-size:0.75em}tw-debugger .variables .variable-name .temporary-variable-scope::before{content:" in "}tw-debugger .variables .variable-value{display:inline-block;width:50%}tw-link,.link,tw-icon,.enchantment-clickblock{cursor:pointer}tw-link,.enchantment-link{color:#4169E1;font-weight:bold;text-decoration:none;transition:color 0.2s ease-in-out}tw-enchantment[style^="color"] tw-link:not(:hover),tw-enchantment[style*=" color"] tw-link:not(:hover),tw-enchantment[style^="color"] .enchantment-link:not(:hover),tw-enchantment[style*=" color"] .enchantment-link:not(:hover){color:inherit}tw-link:hover,.enchantment-link:hover{color:#00bfff}tw-link:active,.enchantment-link:active{color:#DD4B39}.visited{color:#6941e1}tw-enchantment[style^="color"] .visited:not(:hover),tw-enchantment[style*=" color"] .visited:not(:hover){color:inherit}.visited:hover{color:#E3E}tw-broken-link{color:#993333;border-bottom:2px solid #993333;cursor:not-allowed}tw-enchantment[style^="color"] tw-broken-link:not(:hover),tw-enchantment[style*=" color"] tw-broken-link:not(:hover){color:inherit}.enchantment-mouseover{border-bottom:1px dashed #666}.enchantment-mouseout{border:rgba(64,149,191,0.25) 1px solid}.enchantment-mouseout:hover{background-color:rgba(64,149,191,0.25);border:transparent 1px solid;border-radius:0.2em}.enchantment-clickblock{box-shadow:inset 0 0 0 0.5vmax;display:block;color:rgba(65,105,225,0.5);transition:color 0.2s ease-in-out}.enchantment-clickblock:hover{color:rgba(0,191,255,0.5)}.enchantment-clickblock:active{color:rgba(222,78,59,0.5)}html{margin:0;height:100%;overflow-x:hidden}*,:before,:after{position:relative;box-sizing:inherit}body{margin:0;height:100%}tw-storydata{display:none}tw-story{display:-webkit-box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-direction:normal;-webkit-box-orient:vertical;-webkit-flex-direction:column;-moz-flex-direction:column;-ms-flex-direction:column;flex-direction:column;font:100% Georgia, serif;box-sizing:border-box;width:100%;min-height:100%;font-size:1.5em;line-height:1.5em;padding:5% 20%;margin:0;background-color:#000;color:#fff}tw-passage{display:block}br+br{display:block;height:0;margin:0.8ex 0}tw-sidebar{left:-5em;width:3em;position:absolute;text-align:center;display:block}tw-icon{display:block;margin:0.5em 0;opacity:0.1;font-size:2.75em}tw-icon:hover{opacity:0.3}tw-hook:empty,tw-expression:empty{display:none}tw-error{display:inline-block;border-radius:0.2em;padding:0.2em;font-size:1rem;cursor:help}tw-error.error{background-color:rgba(223,58,190,0.4);color:#fff}tw-error.warning{background-color:rgba(223,140,58,0.4);color:#fff;display:none}.debug-mode tw-error.warning{display:inline}tw-error-explanation{display:block;font-size:0.8rem;line-height:1rem}tw-error-explanation-button{cursor:pointer;line-height:0em;border-radius:1px;border:1px solid black;font-size:0.8rem;margin:0 0.4rem;opacity:0.5}tw-error-explanation-button .folddown-arrowhead{display:inline-block}tw-notifier{border-radius:0.2em;padding:0.2em;font-size:1rem;background-color:rgba(223,182,58,0.4);display:none}.debug-mode tw-notifier{display:inline}tw-notifier::before{content:attr(message)}tw-colour{border:1px solid black;display:inline-block;width:1em;height:1em}h1{font-size:3em}h2{font-size:2.25em}h3{font-size:1.75em}h1,h2,h3,h4,h5,h6{line-height:1em;margin:0.3em 0 0.6em 0}pre{font-size:1rem}small{font-size:70%}big{font-size:120%}mark{color:rgba(0,0,0,0.6);background-color:#ff9}ins{color:rgba(0,0,0,0.6);background-color:rgba(255,242,204,0.5);border-radius:0.5em;box-shadow:0em 0em 0.2em #ffe699;text-decoration:none}center{text-align:center;margin:0 auto;width:60%}blink{text-decoration:none;animation:fade-in-out 1s steps(1, end) infinite alternate;-webkit-animation:fade-in-out 1s steps(1, end) infinite alternate}tw-align{display:block}tw-columns{display:-webkit-box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-webkit-flex-direction:row;-moz-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;-webkit-justify-content:space-between;-moz-justify-content:space-between;justify-content:space-between}tw-outline{color:white;text-shadow:-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000}tw-shadow{text-shadow:0.08em 0.08em 0.08em #000}tw-emboss{text-shadow:0.08em 0.08em 0em #000;color:white}tw-condense{letter-spacing:-0.08em}tw-expand{letter-spacing:0.1em}tw-blur{color:transparent;text-shadow:0em 0em 0.08em #000}tw-blurrier{color:transparent;text-shadow:0em 0em 0.2em #000}tw-blurrier::selection{background-color:transparent;color:transparent}tw-blurrier::-moz-selection{background-color:transparent;color:transparent}tw-smear{color:transparent;text-shadow:0em 0em 0.02em rgba(0,0,0,0.75),-0.2em 0em 0.5em rgba(0,0,0,0.5),0.2em 0em 0.5em rgba(0,0,0,0.5)}tw-mirror{display:inline-block;transform:scaleX(-1);-webkit-transform:scaleX(-1)}tw-upside-down{display:inline-block;transform:scaleY(-1);-webkit-transform:scaleY(-1)}tw-fade-in-out{text-decoration:none;animation:fade-in-out 2s ease-in-out infinite alternate;-webkit-animation:fade-in-out 2s ease-in-out infinite alternate}tw-rumble{-webkit-animation:rumble linear 0.1s 0s infinite;animation:rumble linear 0.1s 0s infinite;display:inline-block}tw-shudder{-webkit-animation:shudder linear 0.1s 0s infinite;animation:shudder linear 0.1s 0s infinite;display:inline-block}tw-shudder-in{animation:shudder-in 1s ease-out;-webkit-animation:shudder-in 1s ease-out}.transition-in{-webkit-animation:appear 0ms step-start;animation:appear 0ms step-start}.transition-out{-webkit-animation:appear 0ms step-end;animation:appear 0ms step-end}[data-t8n^=fade-in].transition-in{-webkit-animation:appear .8s;animation:appear .8s}[data-t8n^=fade-in].transition-out{display:none}[data-t8n^=dissolve].transition-in{-webkit-animation:appear .8s;animation:appear .8s}[data-t8n^=dissolve].transition-out{-webkit-animation:appear .8s reverse;animation:appear .8s reverse}[data-t8n^=shudder-in].transition-in,.transition-in[data-t8n^=shudder]{display:inline-block;-webkit-animation:shudder-in .8s;animation:shudder-in .8s}[data-t8n^=shudder-out].transition-out,.transition-out[data-t8n^=shudder]{display:inline-block;-webkit-animation:shudder-out .8s;animation:shudder-out .8s}[data-t8n^=boxflash].transition-in{-webkit-animation:box-flash .8s;animation:box-flash .8s}[data-t8n^=pulse].transition-in{-webkit-animation:pulse .8s;animation:pulse .8s;display:inline-block}[data-t8n^=pulse].transition-out{-webkit-animation:pulse .8s reverse;animation:pulse .8s reverse;display:inline-block}[data-t8n$=fast]{animation-duration:.4s;-webkit-animation-duration:.4s}[data-t8n$=slow]{animation-duration:1.6s;-webkit-animation-duration:1.6s}
</style>
</head>

<body>

<tw-story></tw-story>

<tw-storydata name="Path of Storytelling: Vampire" startnode="1" creator="Twine" creator-version="2.2.1" ifid="7ED369E1-A20B-4971-BD26-825A8DA90BC0" zoom="0.6" format="Harlowe" format-version="2.1.0" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">@import 'https://fonts.googleapis.com/css?family=Indie+Flower';

tw-sidebar {
    display: none;
}
tw-story[tags~="introduction"] {
	background-image: url("https://photos-6.dropbox.com/t/2/AADw5PgzZ79Wps8vLKVo6HqmEr6vSTZwA6dhjTZHK41pyg/12/5946653/jpeg/32x32/1/_/1/2/WoD-online-videoart16.jpg/EMWyuAQYyqQBIAcoBw/jYJlxIXTJ9LtgaA5uxuQQxyVXh_-n-L_LIz0FQu0T_w?size=2048x1536&size_mode=3");
  	background-attachment: fixed;
  	background-size: cover;
  	background-color: black;
  	margin: auto;
  	padding: auto;
}
tw-passage {
    background-image: url(https://photos-3.dropbox.com/t/2/AAAF_E0iP-ldDR1bBm8qznEbKVDiyhMb-hv8u7ilUXmLCA/12/5946653/jpeg/32x32/1/_/1/2/7172.jpg/EMWyuAQYzKQBIAcoBw/qn_gFH3Ydu0xoA384VbwJ8-CTg64ZTIJZm23al8zD1o?size=2048x1536&size_mode=3);
    background-size: cover;
    background-clip: border-box;
    box-shadow: 0px 0px 8px #000;
    border-style: solid;
    border-width: 1px;
    border-bottom: none;
    padding: 5%;
    margin-top: 5%;
    height: inherit;
    font-family: 'Indie Flower', cursive;
    font-size: 1.25em;
    text-shadow: 0px 0px 2px rgba(0,0,0,0.1);
}
tw-passage img {
	display: block;
	margin: 0 auto;
}</style><script role="script" id="twine-user-script" type="text/twine-javascript"></script><tw-passagedata pid="1" name="Intro" tags="introduction intro1" position="860,374.5" size="100,100">&lt;img src=&quot;https://photos-2.dropbox.com/t/2/AAAcD-alBADjwyEqOFQPAvKfOipJdQ-Q8rSYaC3AHyhhHA/12/5946653/png/32x32/1/_/1/2/vampire-the-masquerade-4.png/EMWyuAQYzqQBIAcoBw/sg75wNxeDqPR6GnKQvJD1wShUOsVM4XAFz1J6bdR_UQ?preserve_transparency=1&amp;size=2048x1536&amp;size_mode=3&quot; align= &quot;middle&quot; height=&quot;177&quot; width=&quot;512&quot;&gt;
=&gt;&lt;=
Path of Storytelling: Vampire

&#39;&#39;[[Start Game-&gt;Prelude]]&#39;&#39;

Written by 
Kelley Barnes, Jess Hartley,
Monica Valentinelli, and Eddy Webb

Developed by 
Eddy Webb 

Edited by 
Genevieve Podleski

Layout by 
Ron Thompson

Edited for Twine by 
Nikolaos Chatzigeorgiadis</tw-passagedata><tw-passagedata pid="2" name="Prelude" tags="introduction" position="860,524.5" size="100,100">&lt;==&gt;
Sometimes my job at White Wolf requires
me to dig around in our archives. Mostly I’m
looking for a long-lost CD with a particular
piece of art or the layout files for an old book,
but once in a while I stumble across old
contracts, ad copy, and submissions.

A few weeks ago, I ran into this manuscript,
in a folder labeled “Paths of Storytelling” and
a hand-written note that said “No. Absolutely
not. -SW.” It looks like something we worked
on right around the time of Vampire: The
Masquerade, Revised. The cover sheet appears
to be missing, so I don’t know who originally
submitted it, or even if it was done by one
writer.

Since it’s the 20th anniversary of Vampire:
The Masquerade, I thought it might be cool
to share this strange piece of missing history. I
scanned it as best as I could, and we used some
old assets from our fiction archive to make a
pretty digital version. Enjoy this glimpse into
what might have been.
==&gt;
- Eddy Webb
World of Darkness Developer
&lt;==
[[Continue-&gt;Section 1]]</tw-passagedata><tw-passagedata pid="3" name="Section 2" tags="" position="860,822.8333333333334" size="100,100">You’re finally starting to relax after a long
day at work, when you hear a loud knock at
your door. Exhausted, you’re about to ask your
boyfriend Dennis to answer it, when you hear
a deep voice calling your name.

You hop over and squint out a peephole.
“Hello?”

A man, dressed in what can only be
described as a study in black leather, flips a
card in front of the hole.

“This is for you,” he says with a sly smile.

You fasten the security chain and crack
open the door. He slips a small card to you
through the narrow gap.

“Tell no one about this,” the man warns.
“Not even that cute boyfriend of yours.”

You slam the door shut and lock it. How
did he know about Dennis? Curious, you
examine the card in your sweaty hand. It
appears to be handmade; it’s decorated with 
8 Paths of storytelling
paw prints and pictures of animals. Opening
it, you read the following:

YOUR WISH IS GRANTED.
VISIT HYDE PARK AT
MIDNIGHT TONIGHT. COME
ALONE. OR ELSE.
SIGNED, X
P.S. YOUR SAFETY IS NOT
GUARANTEED.

“That’s right,” you mumble. “How could
I forget?” It’s been a while, but you do
remember something about agreeing to
become a Gangrel. Still, a private meeting at
your local park with a stranger you’ve never
met? Your head reels as you mull over your
options. Just how badly did you want to
become a vampire anyway? Hell, you’re not
even convinced vampires are real. Maybe this
whole thing is a publicity stunt for a crappy
movie studio. City park. Dark night. Cosmic
joke?

You lift the curtains on your front window
to see if the creepy guy’s still there, but the
streets are empty. Whoever he was, he’s long
gone by now.

“Who was that, babe?” Dennis calls from
the kitchen. Good thing he volunteered to
make dinner tonight: spaghetti and meatballs.
If what the card said was right, maybe this will
be your last meal.

You’re not sure if you should tell him the
truth, but you’ve got a good thing going and
you don’t want to mess it up. Do you? After
all, it is your anniversary. Still, you’re not in the
habit of keeping secrets from him. It couldn’t
hurt, could it?

To [[tell Dennis-&gt;Section 5]] the truth and explain you
want to become a vampire.
To act [[like nothing happened-&gt;Section 8]] and enjoy your
anniversary dinner.</tw-passagedata><tw-passagedata pid="4" name="Section 1" tags="introduction" position="1527.0000000000002,632.5" size="100,100">This is a world of darkness.

It’s a world much like our own. It has the
same streets and the same television programs.
But in this world, the creepy house down
the street really is haunted. The mysterious
murders that look like an animal attack were
actually done by werewolves.

And there are vampires.

You have been chosen to become one of the
undead, to join one of their “clans” as a newly
created (or Embraced) vampire. One clan is
the Gangrel, bestial vampires that can turn
into beasts. Another is the Malkavians, seers
and madmen all. And there are the Toreador,
artists and dilettantes who value their ties to
humanity.

Which kind of vampire will you be?

[[Gangrel-&gt;Section 2]]
[[Malkavian-&gt;Section 3]]
[[Toreador-&gt;Section 4]]</tw-passagedata><tw-passagedata pid="5" name="Section 8" tags="" position="860,972.8333333333334" size="100,100">Convinced your anniversary dinner will
be your last meal as a human, you enjoy it as
much as you can. You even go so far as to light
candles all around your tiny kitchen and whip
up a batch of your favorite brownies.

“Why so enthusiastic?” Dennis cocks an
eyebrow. “Was it something I said?”

You laugh. Typical male. “No, I guess I
want to enjoy the little things. You know,
because these moments won’t last forever.”

Dennis stuffs a meatball in his mouth and
winks at you. Something about the way he’s
looking at you gets under your skin. Sure, he’s
a nice guy and all, but is he really the one you
want to spend the rest of your life with? You
imagine what it would be like to grow old with
Dennis. Visions of your wedding, kids and a
minivan flash in front of your mind.

The images nauseate you. You don’t want to
grow old or end up in suburbia—with Dennis
or with anyone else for that matter. Wasn’t
that why you decided to become a vampire?
So you’d never die?

Your mind made up, you realize you have to
get rid of Dennis, quickly. Your meeting is in
less than an hour and you still have to do your
hair and makeup.

“Hey, babe? I have an idea.” You bat your
eyelashes. “Didn’t you say you had a big
presentation due tomorrow?”

Dennis wipes his face with a napkin. “Yeah,
I do. Unfortunately.”

“Why don’t we pick this up tomorrow,
then? After work. That way you have time to
prepare.”

He gives you a strange look; he suspects
you’re up to something. “I could use an extra
hour or two of sleep. What are you going to
do?”

You smile sweetly. “I just figured we’d have
more time tomorrow. In bed, I mean.”

“Now that’s something I can live with.” He
leans over and kisses you. “Okay, I’m game.”

Your plan worked. Dennis scarfs down the
rest of his plate and grabs his things. On his
way out the door, you give him a long, wet kiss
good-bye. Locking the door behind him, you 
fly up the stairs to your bedroom and ransack
your closet, wondering what vampires wear.

After trying on several outfits, you don your
favorite sweatshirt and jeans, favoring comfort
over style.

You’re [[ready-&gt;Section 11]] for your meeting.</tw-passagedata><tw-passagedata pid="6" name="Section 5" tags="" position="750,972.8333333333334" size="100,100">You skip over to the kitchen and pour
yourself a glass of red wine. “It’s that Gangrel
thing I was telling you about. Looks like I’ve
been invited to a party.”

“I don’t know, babe. Sounds like it could be
fun.” He wipes his nose on his sleeve; he’s up
to his elbows in ground beef and spices. “You
bringing your camera?”

You roll your eyes. “A camera? Come on,
Dennis. I volunteered to get turned into a
vampire. This isn’t a play or anything. This is
real. Like, drinking blood and everything.”

“Uh-huh, sounds like it.” Dennis is only
half-interested in what you have to say. He’s
too busy shaping the next batch of meat balls.
“You should go. It’d be good for you to get out
there, meet new people.”

“What’s that supposed to mean?” You
bite back. Just that morning you had a
conversation about how you were too clingy.
“You know my lab work is really important to
me. Those animals need me.”

“Don’t start, babe.” He quickly wipes his
hands clean and samples the tomato sauce.
“Stop reading into everything, okay?”

You give Dennis a sheepish grin and stash
the invitation. “You know, I hear a lot of
couples sneak into Hyde Park and make out
there. You up for a midnight drive?”

Dennis solemnly shakes his head. “Got a
big presentation at work tomorrow and I have
to be there by six. We can always go later.”

“Fine.” You can’t help but feel a little
slighted. It’s your anniversary, isn’t it?
Shouldn’t you have a say in what you want to
do? “If your job is that important to you, why
are you here?”

Dennis drops the spoon. It strikes the
floor hard, tomato sauce splatters everywhere.
“Come on, you can’t be serious.”

Rage builds inside of you. You’ve been
trying to tell him you want to be a vampire.
Can’t he connect the dots? If you’re undead,
you can’t be together anymore. Doesn’t he
care? “Work always comes first, right?”

“You’re a real bitch sometimes, you know
that?” He grabs a towel off the counter and
starts cleaning up the floor.

You give Dennis the once-over. Other than
a nice ass and his tall, thin frame, you can do
better. Hell, who knows what fresh meat you’ll
hunt down once you’re a Gangrel? That guy in
leather looked pretty tasty.

“Just go, Dennis,” you say, checking your
watch. It’s already close to ten o’clock, and it’ll
take you at least an hour to get ready before
you head over to Hyde Park. “I’ll talk to you
some other time.”

Dennis gives you a blank stare. You know
you’ve gone too far this time. “Fine by me.”

As soon as you hear the door click you
swing into action. You’re halfway up the
stairs when you realize Dennis still has your
apartment key. Flying back down, you open
the door to yell after him, but he’s already
driven off. “Shit, shit, shit!”

Pissed off, you slam a lamp against the
wall and shatter the bulb. Furious, you grab
the invitation and shred it into tiny pieces. 

Who knew that a piece of paper could be so
dangerous?

Rocked with guilt, you bury your head
in your hands. In between sobs you realize
Dennis was right. You do need to get out there
and meet new people, take risks you normally
don’t want to take. Your mind made up, you
hop in the shower and carefully select your
outfit: your perfectly worn-in and torn jeans,
tennis shoes and a college sweatshirt.

Although you’re furious you had a fight on
your anniversary, you convince yourself you’ll
make it up to Dennis. Eventually.

You glance at your watch and swear in
earnest. If you want to be on time for your
meeting, you have to leave now.

To [[head over to Hyde Park-&gt;Section 11]] for your Gangrel
meeting.</tw-passagedata><tw-passagedata pid="7" name="Section 11" tags="" position="750,1122.8333333333335" size="100,100">You decide to clear your head by running
over to Hyde Park. You quickly reach the
wrought iron gates, climb over them, and
jump down onto a patch of lush, wet grass.
The closed park is heavily wooded; the further
you wind between the trees, the less you see.

“Okay, I’m here!” You shout into the
darkness. “Come out, come out whoever you
are.”

“Stop being so damned loud,” a voice snarls.
You think you’re hearing things, because it
sounds like the voice is coming from above
you. “So, you want to become a Gangrel?
Why?”

“I don’t know,” you reply, keeping your
voice calm and steady. “Sounded interesting
and I really like the name. What does Gangrel
mean, anyway?”

You hear a sinister laugh that makes your
skin crawl. The voice makes some off-handed
crack about someone you’ve never met. “Oh,
Beckett would have a field day with you,
wouldn’t he? Juicy little lab rat that you are.”

Have you been followed? How do they
know all of this about you? You try to move
your head, but can’t. Your feet are frozen in
place. “Maybe this wasn’t such a good idea,”
you whisper to yourself. “Silly old Gangrel.”
“Silly? Silly?” The voice roars so loud you’re
scared your ears will explode. “Gangrel aren’t
silly!”

You’re not going to put up with some
stalker bullshit. Are you? You’re not happy
with your boyfriend, you haven’t gotten a raise
in two years, you live in a shitty part of the
city and now some random asshole is going to
make fun of you?

“Look up,” the voice commands you.”

You lift your head just in time to see a fuzzy
blur of fur, claws and fangs slam your body to
the wet ground. Terrified, you try to fight back
but the animal is way too strong for you. The
second you open your mouth to scream, the
beast’s fangs rip a hole in your neck and the
blood drains from your body.

“Fuck!” You want to cry, yell or do
something but you can’t. Your head is telling 

you that this... thing... is unnatural. Wrong.
Dangerous. Seductive. Powerful. You can’t
escape, because this was meant to be. You were
supposed to die like this, in a park, alone. It’s
fate.

The creature tears itself off your body as
if an invisible hand slapped its face. You turn
over and curl up into a little ball. You were
safe in Dennis’s arms. Maybe you should have
listened to him. Nothing can save you now.

Something cold and slimy drips into your
mouth; the minute the liquid touches your
tongue your whole body is drawn toward it
like a moth to a flame. The creature presses
its wrist against your mouth and its blood
electrifies you, filling your body with liquid
fire. If you had to describe it, you’d say it felt
like a thousand orgasms happening all at once,
only they’re exploding in and out of every
bone in your body, oozing from your pores.

The sensations don’t stop there.
Everything—from the sounds of an owl
screeching to the smell of freshly dug earth—
feels different, sharper. Overwhelmed with
sights and smells and sounds, you’re desperate
to hunt; to run through the forest and revel 
in your natural instincts. Suddenly, a fierce
pang of hunger grips your body, demanding
satisfaction. Just when you think you’ll die of
starvation, you catch a whiff of the only thing
you’ll ever need, ever again: blood.

“Let’s see what kind of Gangrel you are,” the
beast challenges you. “Just remember, Santi
wants you alive. So don’t die, kid. There’s too
much at stake.”

Who’s Santi? Bound and determined to
survive the night, you drag your body to the
source of the smell. Two pits are on either side
of you. To the left, you detect the powerful
stench of animal blood. To your right, the
fragrant smell of human blood fills your
nostrils.

To [[roll into the hole-&gt;Section 14]] on your left and feed off
the blood of animals, turn to section 14.
To [[drop into the pit-&gt;Section 17]] on your right and drink
from a human vessel, turn to section 17.</tw-passagedata><tw-passagedata pid="8" name="Section 14" tags="" position="675,1272.8333333333335" size="100,100">You stumble into a dank hole in the
ground and find yourself surrounded with the
carcasses of freshly-drained possums, mice
and foxes. Pissed off, you grab one of the furry
corpses and squeeze its tiny body to a pulp.

Someone has played a sick joke on you:
animal blood has been splashed all over the
sides and edges of the pit. You’re about to
jump out and hunt down something with a
pulse to eat when you feel that thing inside
you—your Beast—sneak toward the only
siren call you’ll ever answer to: the sweet,
intoxicating smell of human blood.

Furious and desperate, you refuse to be
grossed out by the dead mound of small
woodland creatures. You let out a guttural cry
and fling the furry bodies up and out of the
pit, clawing your way through to your prize at
the bottom.

Someone—or something—has bound and
gagged the one person you thought would
never leave you. Dennis, the boyfriend you
recently broke up with for the third time in six
months, lies there in front of you as naked and
as helpless as a baby. Thin cuts decorate his
body; he’s smeared in his own blood.

The Beast inside you is getting stronger
by the minute. It doesn’t care that Dennis is
whimpering or scared; it wants to shred his
flesh and suck every last drop of marrow from
his tender bones. Not only does your Beast
demand you pay tribute to the Gangrel you’ve
become, it commands you to rip Dennis’s
heart out and stuff it into your face while it
still beats.

The human in you recoils at the thought
of drinking Dennis’s blood. Just yesterday you
were planning a trip to the Caribbean where
you would bathe for hours under the warm
sun drinking pina coladas. Now? The thought
of drinking something fruity makes you want
to puke. The only thing on your mind, the
only thing you’ll ever want ever again, is blood.

“Must feed. Can’t... Need to feed.” Your
Beast assumes control of your mind and body,
forcing you to sink your fangs into Dennis’s
bare flesh. The coppery-tasting liquid floods
your cold veins and temporarily satiates your
Beast, but you cannot release Dennis from
your grasp. Not yet. Not until your hunger 
subsides. You suck and suck and suck until the
last drop of blood leaves your former lover’s
frigid body.

Horrified by what you’ve just done, you
sink to the ground and wonder who else
you’ll kill to satisfy your thirst. You gently roll
Dennis’s body to the side of the pit, beg for
his forgiveness, and feebly cover him up with
loose dirt.

Your hunger abated, you fall on your knees
and wonder what kind of monster you’ve
become. Gingerly, you touch your face to see
if your face is still there, only to discover that
a pair of short, stubby horns has erupted from
your skull.

“Are you okay down there? Do you know
where your sire is?” The male voice sounds
friendly enough, but you know appearances
can be deceiving.

Squinting, you spot a pair of glowing red
eyes peering down at you. For a split second,
you wonder if this guy might be your sire, but
you don’t recognize him. Then again, you’re
not sure if you could. Everything happened so
fast. One minute you were arguing with a tree,
and the next...

“Don’t talk to him,” a voluptuous darkhaired
woman purrs, slithering out of the
wall behind you. “He’s boring and dull. Stick
with me and I’ll teach you the ropes. Not that
crusty old bookworm.”

Who will you talk to? To speak with the
[[friendly voice-&gt;Section 20]] in the park.
To address the [[mysterious woman-&gt;Section 23]] in the
shadows.</tw-passagedata><tw-passagedata pid="9" name="Section 17" tags="" position="826.6666666666666,1272.8333333333335" size="100,100">Lured by the irresistible scent of human
blood, you claw your way over to the edge of
a deep hole in the ground. The sides of the
hollow are slippery and you can’t seem to get a
grip. Reaching just a little bit farther, you wind
up sliding all the way down to the bottom,
landing in a chilly pool of congealed blood.

The consistence and temperature of the
blood appalls you, but you taste it anyway,
hoping it will satiate your hunger. It disgusts
you. Frustrated, you splash the blood all over
the sides of the hollow and howl in anger.
Your steps uncover a pile of half-buried plastic
bags. Nice. That human blood you smelled?
Donations from a local blood bank.

You’re just about to leap out of the hollow
when you feel the pitter-patter of a thousand,
tiny feet squirming all around you. Without
hesitating, you reach down and grab a large
sewer rat and drain it dry. Its blood doesn’t
taste very good but it holds your hunger in
check--for only a brief moment--but you need
more. A lot more. 

You drop to your knees and suck the blood
out of every rat you find until the Beast inside
you quiets down long enough for you to plan
your next move.

“They’ll do in a pinch,” a man steps out in
front of you. “Animal blood can be useful if
you’re stuck somewhere.” His imposing frame
frightens you, but there’s something about his
tense demeanor that tells you he’s important.

“My name is Karsh.”

You pick out a plump rat and pop it open
like a grape. “First name or last name?”

“Just Karsh.”

“Well, Karsh, do you mind if I eat? I’m still
pretty hungry and um... I’m kind of new to
this whole Gangrel vampire thing.”

“That’s part of the reason why I’m here,”
Karsh replies, leaning against the wall of the
hollow. “We’ve got a few things to discuss.”

You’re too busy sucking on a rat to respond,
but you do your best to politely wave your
approval. Karsh frowns. It’s obvious by the way
he fingers his beard that he disapproves of you,
but you’re not sure why.

“Before you became a vampire, were you
aware that we existed?”

“Nope.” You shake your head, tossing
another carcass on the growing pile of fur.

“The most important rule of being Kindred
is that your existence must be kept secret from
the prying eyes of mortals. We call this the
Masquerade and, though we vampires have
our differences, it is the one rule we all agree
upon. The Masquerade must be protected at
all costs. If one human learns that we exist,
and that human tells another human, then all
Kindred are threatened. Your sire, for example,
is a threat to the Masquerade.”

“Why?”

“Your sire can barely call himself Kindred
anymore. Gangrel must control our Beasts,
the demonic force that resides deep within
our chest. Otherwise, its animalistic nature
will spring from our bodies and change it in
unfathomable ways.”

Karsh’s words make sense, though you don’t
want to tell him that. You’re anxious to hear
what he has to say so you can go exploring. 

“Can you give me an example? I mean, what’s
the worst thing that can happen, right?”

“Imagine a pair of bony, stunted wings
sprouting from your back or your eyes
changing their shape into that of a large fish.”

“Ouch,” you say, fingering the features on
your face to show Karsh you’re listening. “Will
I turn into an animal? What’s that about? Are
the Gangrel werewolves...”

“No, the Lupines are our mortal enemy.”

“So then how do we all get along? I
mean, are there other laws of the night or
something?”

Karsh gives you a cold smile. “There are
laws and those, like myself, who will enforce
them. Then there is the Camarilla, a complex
organization connected from city to city by
an intricate court system. If you choose to
join your local Cam, you’ll answer to Prince
Julius Morganti, a formidable-but-fair leader.
Regardless of what you’ll decide, eventually
you’ll run into the Primogen of your clan, an
elder vampire that goes by the name of Luna
Santi.”

“Santi... Santi... That name sounds really
familiar?”

“Oh?” Karsh cocks an eyebrow. “Do you
believe that she Embraced you?”

“No, no,” you say, shaking your head. “I
think my sire mentioned something about
needing me alive.”

Laughing, Karsh extends a hand and pulls
you to your feet. “Well, you are alive, after a
fashion I suppose. I wasn’t sure you were going
to make it this far.”

“Me, neither,” you admit, putting your
hands in your pocket. You suspect Karsh isn’t
telling you all of this for your own benefit, but
for his, too. From what he’s told you, Kindred
life appears to be terribly complicated. You’re
pretty sure you didn’t sign up to become a
Gangrel to belong to some mysterious club or
answer to a Prince you’ve never met.

“So what’s up with the Gangrel, then? Do
we all have to join the Camarilla?”

Karsh chuckles. “Your sire is rare, for a
lot of reasons. Unlike him, most Gangrel are
independent. From what I hear, he’s been 
making the rounds. He’s pretty friendly with
a Toreador, goes by the name of Nathaniel Le
Roi.”

You shake your head in disbelief. Who
cares who your sire makes friends with? You
still haven’t met him yet. Shows you what he
thinks about you, doesn’t it?

“What about the other Kindred? Aren’t
there other clans out there?”

“Clans, bloodlines and different groups of
rogue Kindred that band together. A select
few, like Beckett for example, choose to live as
an Anarch, which is a kind of modern gypsy
that roams from place to place.”

“Sheesh. Karsh, this is... a lot of
information to take in.”

“And I haven’t even told you about the Path
of Humanity or the Book of Nod yet.”

You’ve had enough lectures for one night.
“Okay, Karsh. Let’s focus on the moment here.
Right now, what do I need to know?”

“If you succumb to your Beast and your
body morphs into a mutated animal, I will
train the new Sherriff to hunt you down and
kill you to protect the Masquerade.”

Your jaw drops slightly but you manage to
regain your composure quickly. “Okay, then.
Note to self: don’t piss Karsh off.”

Karsh winks at you with a knowing look in
his eye. “Now that that’s out of the way, I’d like
to invite you along with me to meet your sire.”

“What do you mean you’ll take me to him?
Isn’t it back in the park?” You check your
watch. It’s almost one-thirty. Already? “Oh.”

“We’ll be safe traveling underground,”
Karsh continues. “The tunnels in these sewers
are ancient, built before the city’s first trading
post even existed.”

“What choice do I have?” As new as you
are to this whole Kindred of the city park
thing, you don’t want to be suckered into
trusting another vampire without reviewing
all your options first. “This isn’t an ultimatum,
is it?”

Karsh shrugged. “You can always go back
the way you came.”

Where will you go? To [[jump back out-&gt;Section 14]] and go
to the other pit.
To [[follow Karsh-&gt;Section 29]] into the sewers.</tw-passagedata><tw-passagedata pid="10" name="Section 20" tags="" position="600,1422.8333333333335" size="100,100">“Sure, I could use some help getting out,”
you shout to the man with the burning red
eyes. “You’re not going to kill me or anything.
Are you?”

The man leans over and pulls you up and
out of the hole as if you were made of air. As
soon as your feet touch the soil, he lets go of
you and feebly attempts to brush the mud off
of his khakis. “My, you are newly hatched. Tell
me, how did it feel?”

Confused and a little creeped out, you take
a few steps backward toward the hole you just
came from. “How did what feel?”

“Oh, I would stay out of the shadows if I
were you. We Kindred may prefer the cover
of night, but not all of us lurk in that realm of
darkness. My name’s Beckett. What’s yours?”

“Um...” You’re not sure whether you
should talk to Beckett or run away from him.
Although the rest of him looks somewhat
normal, he has the eyes of an angry albino
cat. Truth be told, Beckett looks more like a 
frumpy college professor than a fierce vampire.
In addition to his muddy khakis, he’s wearing
a field vest and a crappy-looking fedora. If it
wasn’t for his glowing, red eyes, you’d swear he
was a character out of a pulp adventure novel.

“Fine, I’m sure this is all way too much for
you right now. Still, I would like to know how
it felt.”

“How what felt? I ate my boyfriend on our
anniversary. Do you want me to tell you about
that?”

Beckett regards you with disdain. “I just
wanted to know how it felt to be transformed
from mortal to Kindred. It’s been a long
time since I’ve had the opportunity to talk
to a neonate. You see, I’m on the hunt for
something, a piece of knowledge that’s very
important for our future.”

“I don’t give a damn about your hunt,” you
snap at him. “I’m a monster.”

Much to your surprise, Beckett seems to be
agreeing with you. “Yes, I can understand how
that must feel. Tell me, what were you before 
you were Embraced? I’m guessing some sort
of loner, no doubt? You’re obviously not very
good with people.”

For whatever reason, Beckett makes you
feel incredibly young—and not in a good way.
“I was a lab rat, a scientist who worked with
animals.”

“Ah,” Beckett says with a knowing smirk.
“Yes, that makes perfect sense. Troubling, as all
this is, I must leave you now before...”

“Before what?” You imagine a ghostly
shiver shooting up your spine. It’s obvious that
Beckett knows something you don’t. “What’s
out there? What won’t you tell me?”

Beckett gazes deep into your eyes. It may
just be your imagination, but you swear your
Beast recoils at the sight of him. “If you want
to be a Gangrel, you’ll have to figure some
things out for yourself. Use your instincts and
sniff out the truth.”

“So why’d you drag me out of that pit then.
To quiz me? Some help you are. That’s sick.”

Laughing, Beckett thumps you hard on
your back. “Oh, I’ve been called many things,
but sick is definitely not one of them. Even
Sascha would disagree with you on that
one. Tell you what. You seem to have a lot
of spunk. If you’re feeling adventurous, you
can walk with me and meet a friend of mine
passing through here on her way to Chicago.
Can’t guarantee she won’t eat you, but you
never know. Inyanga has a thing for younger
members of our clan.”

“And if I’m not?”

“Then I’d suggest you hide and hide well.
Perhaps find a hole in the pit I dragged you
out of ?”

You pretend to mull over Beckett’s offer,
but your mind is already made up.

To [[crawl back-&gt;Section 23]] to the shadows in the pit.
To [[visit Inyanga-&gt;Section 26]].</tw-passagedata><tw-passagedata pid="11" name="Section 23" tags="" position="750,1422.8333333333335" size="100,100">Against your better judgment, you decide
to face the mysterious woman who emerged
from the shadows.

“Well, better get this over with. What else
can happen tonight?” You tentatively wave a
hand, pressing against the wall of the pit, but
nothing is there.

“Looking for ussssss?”

You turn around, more than a little
frustrated. Just how many vampires are there
in this damn city, anyway? “Yeah, I guess so.
Who’s ‘usssssss’?” You mimic, half-hoping your
bad joke will draw the vampire out so you can
get a better look at him.

“Why, Dmitri, this one has a sense of
humor. I like her even more than Ariel.” A
woman cloaked in black smoke steps in front
of you. “The name is Cassandra. Cassandra
Veil.”

“Pleasure.” You’re not sure what the
protocol is for meeting a new vampire, but you
extend your hand out anyway. “I’m guessing
you’re a Toreador?”

“Why yes, I am. Good guess.” The corners
of Cassandra’s lips curl into a seductive smile.
“Dmitri, don’t be shy. Come meet your fellow
Gangrel. After all, you are the same generation,
I suppose.”

The other vampire almost trips over
Dennis’s corpse to get to you, but when
he does you recoil from the sight of him.
Compared to Cassandra, Dmitri is downright
monstrous. His misshapen spine looks like it
had been broken in three places then fused
into a permanent twist. You can’t tell which of
his arms is worse: the midget stump or the one
shaped like a pipe cleaner. And his ears? Two,
bat-like things spiraling toward the ceiling;
you assume he has excellent hearing. The only
thing remotely human about Dmitri is his
perfectly-shaped nose.

“We’re related?” You don’t want to be rude
but you don’t believe for a second Dmitri is
anything like you. Anything “but,” maybe.

Cassandra slips an arm through yours and
whispers in your ear. “Oh, but he was like
you. Young, fresh, full of ideas. Until his sire
tortured him and made him drink the blood
of his baby.”

“Kind of like what happened to me,”
you confess, wondering if underneath that
grotesque face, Dmitri is as scared as you are.
“Only I didn’t get the chance to say goodbye
to my boyfriend or my animals. Well, exboyfriend.”

Dmitri’s head bobs up and down in
agreement. “Take you to sire. Make payment.”

“You know who my sire is?”

“Sure,” Cassandra teases. “Everyone knows
who your sire is.”

“Then what do I have to do to meet him?”

Wagging a slender finger, Cassandra scolds
you gently. “Tsk, tsk, little one. I need you to
do something for me, first.”

“Name it.” You’re dying for a little payback
and you can’t wait to give it to him.

“You haven’t even heard what it is yet,”
Dmitri whines. You hate to admit it, but you
have to wonder what connects a hideous thing
like Dmitri with someone as beautiful as
Cassandra.

“Lay it on me.”

“Well...” Cassandra begins. “You see, all
Kindred have to answer to a higher power in
order to survive. Unless of course, you believe 
you can do better on your own, which is
something a large number of rogue vampires
will regret soon enough.”

“Rogue... vampires?” You want to hear
more about what Cassandra is hinting at, but
she ignores your question and moves on.

“Dmitri and I belong to the most powerful
group in the city, called ‘The Sabbat’. Our
mission might sound familiar to you,
especially if you followed politics when
you were alive. We simply want to be free
to exercise the dark gifts granted to all us
Kindred.”

You never really followed the elections,
but you suspect most politicians are sneaky
bastards. “Doesn’t sound too bad, but I need
some time to think it over. Do I have to make
my decision now?”

Dmitri grabs your hand. “You’re family
now. No waiting.”

You jerk your hand away and take a large
step back. “Nuh-uh. I may have wanted to be
part of the Kindred, but I’m not going to sign
up for any group just yet. Can’t you give me a
tour or something?”

Cassandra grins, revealing a set of dazzling,
white fangs. “Sure thing, sugar. Tell you what.
You can either decide to come with us, or we’ll
lead you to our mentor. What do you say?”

You realize you don’t really have much of a
choice. You’re alone in a pit with not one but
two vampires that obviously know more about
being Kindred than you do. “What about my
special powers? Don’t I get some of those?”

It was Dmitri’s turn to laugh. Coming from
his twisted throat, he sounded like he was
choking on a bone. “Super vampire. Wears
funny cape.”

“If I teach you how to use your Disciplines,
will you join the Sabbat?”

“Maybe.”

“There you go, then. Join us and learn how
to use what God cursed you for.”

“Or...”

“Or,” Cassandra stresses. “Simply lift that
trap door over there and chart a new course
with our dearest friend, Karsh.”

“I take it you don’t have a lot of love for this
guy?”

“You could say that,” she snarls. “Oh, before
you meet Karsh, you might want to fix your
hair... there’s a... um...”

It’s not just your hair that’s messed up,
you feel like you’ve been living on the streets
for months. You’re covered in mud and godknows-what-else
and don’t have anything else
to change into. “What? Do I have horns or
something?”

Dmitri stoops over a small pile of clothing
in the corner. He tosses you a hat—Dennis’s
hat.

“Thanks for the warning.” You pretend
Cassandra’s advice is meaningful, so you
put your boyfriend’s hat on and smooth out
your hair. Oh, crap. Your boyfriend--Dennis-is
dead. He may not have been the best
boyfriend, but he didn’t deserve to die. Did
he? Your chest aches with sadness and guilt,
but you don’t have time to wallow in self-pity.
Cassandra is waiting for an answer. What are
you going to do?

To [[lift the trap-&gt;Section 29]] door and talk to Karsh.
To [[join the Sabbat-&gt;Section 41]].</tw-passagedata><tw-passagedata pid="12" name="Section 26" tags="" position="600,1572.8333333333335" size="100,100">Beckett transforms into the shape of a large
wolf; he nuzzles your hand, urging you to
follow him. The wolf takes you deeper into the
park, padding softly on a well-lit path marked
by colorful bricks. Together, you wind through
an impressive display of topiary trimmed into
the shape of large animals.

One of the animals, a sleek leopard, regards
you with great interest.

The wolf howls loudly and runs off, leaving
you alone with the deadly cat. You feel your
Beast straining against your chest as if it, too,
wants you to change your shape—but into
what? What could possibly help you defend
yourself against a jungle cat?

“Thanks for nothing, Beckett.”

The leopard leaps on your chest and knocks
you to the ground. Before you have a chance
to react, it clamps its jaws around your waist
and flings you up toward the tree tops. You sail
high into the air, bounce off a tree branch, and
hit the ground hard. You wince in pain, but
realize you don’t hurt as bad as you think you
should. In fact, your muscles and skin stretch
back to normal. Your body has absorbed the
damage. You’re okay.

You roll over, only to see the face of an
ancient woman with very pronounced cat-like
features. Her hair is mottled with gray and
silver strands; her ebony skin is lined with the
memories of a thousand lifetimes. The matron
extends a hand and pulls you to your feet.

“That was your first lesson,” she instructs
you, sweeping her arm from the damp grass to
the rustling trees. Although she looks human,
you sense she was Embraced long ago, in a
time romanticized in history books. “Beckett
has brought you to me, Inyanga, because you
are young and full of burning questions. You
even smell like a suckling babe.”

You aren’t sure what to ask Inyanga, even
though you secretly agree with her. You don’t
like being compared to a baby, though—you’re
not that young. To her, though, you probably
are. “What do I do? I don’t even know who
made me this way.”

“That’s your choice. While most Gangrel
are independent, your sire has aligned himself
within the Camarilla. I view the Camarilla
as our government, one that protects all
vampires. Sure, it has its own laws, but it also
keeps us from succumbing to the darkest parts
of ourselves and from those who threaten
us. Without it, the world we know would be
threatened by the witch-hunters who walk in
the light.”

“What’s the alternative?”

You wait patiently for Inyanga to respond.
She turns away from you, tilting her head
toward the trees. It might be your imagination,
but you think the forest is speaking to Inyanga
and she’s talking back to it. “Many Gangrel
favor a solitary path. Though, I would not
recommend that one such as you walk the
path of an Anarch… yet. You still have a lot to
learn and could benefit from the teachings of
your sire. You’re much too young to declare
your independence. There is safety in numbers
for one such as you.”

Inyanga sniffs a fresh breeze, her nose
crinkles in disgust. “Do you believe in the
devil?”

“What?” Her question throws you for
a loop. “You mean the red skin, horns and
forked tongue kind?”

“I suppose I should have expected no less
from a fledgling. The idea of great evil, do you
place your faith in that?”

You were never religious; you’ve always
placed your faith in data. The idea of selling
your soul to the devil doesn’t freak you out.
“No, definitely not. I’m guessing I’m one of
the Damned now, but I don’t think the devil
has anything to do with it.”

Inyanga then describes a group that makes
the hair on your Beast’s back stand on end.
“The Sabbat is our equivalent of the devil.
There are many monsters that walk this earth,
but they are an abomination.”

“Sounds like you really hate the Sabbat.
Can’t you stake them or something?”

Her lips curve into a disapproving frown.
“This, childe, is the choice you now face. Prove
your worth to the Gangrel clan and meet your
sire. Or, seek out what hides in darkness, and
learn what you should be afraid of. Either path
will teach you a valuable lesson.”

Although you wish living your life on your
own terms as an Anarch was a third option,
you realize that Inyanga is not the type of
vampire you can simply suggest things to.
Mulling over your options, you realize the
wisdom in her words. She’s asking you if you
want to rise to an incredible challenge or if you
want to ignore her advice altogether. It’s clear
she believes you’re so full of confidence you
think you have more answers than she does.

Do you? You never considered yourself to
be an arrogant person. Well, maybe a little.
You did try to control your relationship with
Dennis and look where that ended up. This
is your chance to make things right—at least
with your clan.

To [[prove yourself-&gt;Section 32]] as an upstanding member
of the Gangrel clan.
To [[learn for yourself-&gt;Section 41]] why Inyanga hates the
Sabbat.</tw-passagedata><tw-passagedata pid="13" name="Section 32" tags="" position="525,1722.8333333333335" size="100,100">You stand at the foot of a wrestling ring
emblazoned with a sign that reads: Extreme
Wrestling Warfare. The room is crowded;
you spot a collection of odd characters on
the bleachers, including a mysterious group
wearing long, velvet robes covered in magical
sigils. Somewhere in that mess of fangs, claws
and bad hairstyles, is your sire.

The announcer is a vertically-challenged
figure dressed in green velvet from head-totoe.
“Annnnnnnnd in this corner, fresh from
the sewers beneath Prince Morganti’s fair
city, we have the fierce tenth generation...
Pomeranian.”

The crowd boos. Is he talking about you?
Shit. Feeling bold, you jump into the ring and
grab the microphone out of the announcer’s
tiny hands. “That’s right, sports fans. I’m the
Pomeranian because even though I’m little,
I’ve got plenty of teeth.”

Several people in the crowd start to laugh,
but you take that as a good sign.

“Go over there, kid.” The announcer points
to the far corner. “Try not to bleed all over
my ring. You’re not the only match scheduled
tonight.”

“Sure thing.” You dig deep inside of you
and tune into your Beast. You’ve never been
much of a fighter, but there’s something about
wrestling your Beast adores.

Trotting over to the other side, you come
face-to-face with one of the organizers.
“Congratulations. Usually he toys with childer
until you’re all a little older, but you’ve really
riled up the crowd this time.”

“Is that bad?”

“Let’s just put it this way, El Diablo Verde
has a reputation to uphold. Keep mouthing
off like that and you’ll find out why he’s
unbeatable.”

The lights in the makeshift arena snuff out.
A spotlight shines on the far side of the room
and a song—the theme song for Zorro?—
begins to play.

“And in this corner, your host—the Queen
of the Gangrel, Luna Santi—is pleased to
present... that masked luchador, the terror of
Tijuana... the scourge of the Southwest... El
Diablo Verde!”

The crowd goes wild. A huge, manly
specimen breaks through the door and
emerges into the ring. El Diablo Verde’s arms
are the size of tree trunks. His enormous head
is covered with a colorful mask, the tell-tale
mark of a Mexican luchador.

El Diablo Verde leaps over to his corner
and faces the crowd, egging them on. Your jaw
drops. He’s the size of a small car. Santi expects
you to fight that guy? The announcer steps
aside to make way for a referee. The ref, who
looks like something out of a slasher movie,
grabs a whistle and calls you both to the center
of the ring.

You shift uncomfortably and ask the ref if
there are any rules.

“There’s only one rule here, puppy: survive.”

Shit. You haven’t even seen a wrestling
match let alone been in one. And what’s this
guy all about anyway? He obviously has no
problem hitting girls. You drop back, raise
your fists and wait for the signal.

“Fight.”

You’re face-to-face with a deadly Mexican
luchador. To give El Diablo Verde [[a left hook-&gt;Section 35]].
To [[climb up on the ropes-&gt;Section 38]].</tw-passagedata><tw-passagedata pid="14" name="Section 41" tags="" position="675,1722.8333333333335" size="100,100">You enter into a stunted hedge maze that
barely reaches your knees. Over the tops of the
brush, you see a small ring of candles laid out
in the shape of a pentagram. Upon entering
the center, you notice the waxy candles are
tipped with black flames. You think this is
supposed to be some sort of fancy ritual, so
you kneel down in the center of the circle and
state your intention.

“I am here to join the Sabbat.”

A woman emerges from the far side of the
hedge. “I, Cassandra Veil, congratulate you.”
She slinks up to you and laces her fingers
through yours. “You’re now part of the Sabbat.
Right, Dmitri?”

The other vampire, whose misshapen body
looks like something Picasso would have
painted, grunts his approval. “Party now?”

“That’s it?” You’re beginning to feel you
made a mistake. So far, becoming a Kindred
was nothing like you thought it was going to
be. You’re definitely not impressed—especially
with these two. “I say I’m a member of the
Sabbat and now you’re my fairy godmother?”

Cassandra opens her mouth to respond,
but Dmitri cuts in front of her. “Look out,” he
yells. “Owls!”

From out of nowhere, a parliament of owls
spins around you. Large wings and sharp claws
flood the space in between you and Cassandra.
You shield your eyes from their beaks, but
to your surprise, they’re not attacking you—
they’re targeting them. Are you supposed to
help or run away?

“Whoooooo... would... doooo...” You
imagine words forming in the air all around
you, coming from the owls. “Dooooom.
Doooom the mooooon.”

Is this some sort of vampire special power?
You hope so. Well, whatever the words mean,
they’re good enough for you. You leave
Cassandra and Dmitri behind. After you bolt
out of the maze, you head toward a glowing,
red light. Your feet fly through the damp grass.
Your mind is racing. Screw the Sabbat. You
have nothing to gain by joining them. No
secrets, no fancy powers. Stick around, and
you’re sure they won’t let you live through the
night. Nothing is worth that.

You reach a small clearing and do a doubletake.
About a dozen scarlet-upholstered chairs
are arranged around a large ruby throne;
the entire arrangement is illuminated by
several glowing, red orbs hung to the trees.
At first you think they’re kind of pretty until
you move up a little closer. That’s when you
realize the decorations are all made out of
flesh. The chairs? Muscle and sinew, tissue and
membrane have been woven together to create
furniture. The lamps? Stomachs filled with
some sort of gas.

“Oh, God.” You say the words and feel
embarrassed. Does a vampire even pray
anymore? “What the fuck. Who would do
this?”

“Good,” you hear a sinister voice say. “Our
new recruit has arrived.”

A stringy, hard rope winds around your
ankles, locking them together. The more you
move, the harder it squeezes. “Yeah, I’m one
of the Sabbat now.” Maybe if you keep the
strangers talking, you can buy yourself some
time.

“Are you now?” A chorus of voices cackle.
“Luna Santi has done well. It’s amazing what
a little fear will do to our fellow vampires.
First, Ariel and now her. Perhaps we’ll begin
with your heart. Such an interesting muscle,
wouldn’t you say?”

Luna Santi is behind this? The Gangrel
Primogen? “Show yourself.” You may be in
trouble, but you’re not going down without a
fight. You feel another tendril snake up your
back and you try to ignore it—even though
your Beast can’t. That thing inside you recoils
in fear, telling you something terrible is about
to happen.

To retain control over your Beast, you close
your eyes and center yourself. If you focus, you
might be able to escape. “The Hound daresss
to speak to usssssssss.” When you open your
eyes, you see the chairs are flesh and their
mouths are talking. To you.

“Oh, shit.” Panicked, you try to wrench
yourself free, but wind up face first on the
ground. You inch further and further away
from the chair-mouth-things, but are held
back by the weird snake circling your forehead. 

“Laika will be pleassssssed,” one of the
chairs tells you. “You’re so fresssssh.”

“At least I don’t look like I’m from a
fucking rummage sale.”

Cassandra slinks over and helps you to your
feet. “That’s no way to treat your new Master,
little Hound. I know my place. Now you must
learn yours.”

“You lied to me. I’m not a member of the
Sabbat, am I?”

Laughing, she slakes her fingers up and
down your body, then slits her wrist and
raises it to your mouth. You refuse to drink,
but your Beast has already surrendered to
her blood. Once you’ve had a fair sample, she
dematerializes into shadow and speaks to you
from the blackness.

“What do you think of me now, little
Hound?”

Your head feels foggy, drugged. You want
to run and fight, but something has taken hold
of you. It’s too strong to resist. “I guess you’re
all right.”

Cassandra morphs back into her vampiric
shape and nods. “All yours.”

“Time to rejoin your Master.”

You open your mouth to reply, but as
soon as you do, the pink vine wraps itself
around your mouth. At one end of it is a large,
bloodshot eyeball. “I, Talus, declare your flesh
to be the property of the Sabbat.”

His eye forces its way all the way down
to your stomach, winding through your
intestines. You gag. Each involuntary swallow
you take forces the eye-stalk deeper into your
bowels. Your Beast howls in terror and rails
against it, but it’s no match for Talus. You
sense your Beast whimper and fade into the
background, taking what little is left of your
sanity along with it.

“Nope, nothing here.” The eye-stalk
contracts and spins its way out of your system
a lot faster than it went in. As soon as you are
released, you sink to your knees.

“Please, just... please kill me. I want to die.
Please.” 

Cassandra, Dmitri, the chairs and several
other vampires surround you with shadow.
“I’m sorry, my Love, but your nightmare is just
beginning.”

Faced with the inevitable, you howl at the
moon in anger. Not for what you have already
lost, but for the terrors you can no longer
wreak on the Gangrel who betrayed you: Luna
Santi.

[[THE END-&gt;Intro]]</tw-passagedata><tw-passagedata pid="15" name="Section 35" tags="" position="450,1872.8333333333335" size="100,100">You swing your fist with all your might and
manage to cuff El Diablo Verde square in the
jaw. Surprised, you take a step back and kick
him hard in the shin.

El Diablo Verde folds his arms across his
broad chest.

A hush falls over the crowd. You advance
towards the luchador, your fists moving faster
and faster in a flurry of punches. In between
jabs you notice something weird—he’s not
even paying attention. He’s scanning the
crowd: searching for Luna Santi, perhaps?

Without a second’s warning, El Diablo
Verde focuses all his attention on you. You
continue to pommel him, but nothing you do
has any effect on his massive frame. He steps
toward you, dropping some line about how
you’re a poor little chica.

You tell him to fuck off.

The words hit him harder than your fists
ever could. His thick arms wrap around you,
squeezing your chest until you feel your ribs
crack. Panicked, you suck air into your lungs
until you remember you don’t breathe.

“The Calamar Gigante Clutch everybody...”
the announcer howls. His statement echoes
over the silent crowd. Like you, they’re waiting
to see what happens next.

El Diablo Verde releases your crumpled
body to the mat. He then climbs up onto
the ropes and straightens his immense build,
forming a weapon—aimed at you.

“Oh God,” you whimper. Is there any man,
Beast or vampire that can help you now? You
want to cover your eyes, but you don’t. Your
Beast tells you to take it like a Gangrel, and
that’s exactly what you’re going to do.

The crowd chants El Diablo’s name. The
announcer screams, counting down the
seconds. “Five... four... three...”

Just when you think you’re safe, El Diablo
Verde leaps from the ropes, spins in mid-air
and slams your body to the ground, crushing
your spine. Before you have a chance to move,
he lifts your flattened form high above his
head and crumples it into a little ball. 

As the light in your eyes begins to fade, you
imagine your sire standing over you, chastising
you for being so weak.

The last figure you detect before you drift
off to a deep, restless sleep is the face--the
terrifying, masked face--of El Diablo Verde.
May he haunt your dreams forever.

[[THE END-&gt;Intro]] </tw-passagedata><tw-passagedata pid="16" name="Section 38" tags="" position="600,1872.8333333333335" size="100,100">You climb up on the ropes, pretending
you’re going to do one of those flying leap
move-thingies you’ve seen once on television,
but all you really want to do is stay out of the
luchador’s way.

This is the one time you and your Beast
agree on something.

El Diablo Verde senses your ruse but
he, too, pretends to give the crowd a show.
Climbing up on the opposite side of the ring,
he nods his head slightly, giving you the signal
to jump.

You leap high into the air the same time
he does, but you both manage to just miss
each other. He almost rips your arm out of
the socket, which doesn’t hurt as much as you
think it should. Your body is strangely resilient
to the bumps and bruises he’s giving you.

The crowd chatters excitedly. You continue
to dance with the luchador until you hear the
final countdown. “Three... two... one...”

“The Pomeranian has survived. Welcome to
Clan Gangrel!”

While you’re not so sure how you managed
to last for thirty seconds in a ring with a
vampire the size of Texas, you’re happy you
did. You walk over to El Diablo Verde and
thank him, just to make sure he has no hard
feelings. He simply places his thick hands on
his hips and gives you a wink. You know damn
well if it was a real match your body would be
in pieces right now.

Thankful you’re still alive, er... undead, you
wander over to the corner and exit the ring,
hoping you never see the likes of El Diablo
Verde—or Karsh for that matter—ever again.

Three vampires are there to greet you.
One introduces herself as Luna Santi, the
other says his name is Thalus Teratov, and
the last declares he’s referred to as Sapphire
GoldenClaw.

Sapphire GoldenClaw?

You’re not exactly sure what you’re
supposed to do in front of the Gangrel
primogen, but you try to be as charming as
possible. Luna Santi is a study in amber; her
caramel-colored skin and brown eyes are
lovely. Although she could pass for human in
a dark bar, she’d have a rough time covering
up her facial hair. “Ms. Santi? Thank you for
bringing me here.”

“Yes.” Luna glances over her shoulder. If
you didn’t know any better, you’d say she was
acting skittish. “Well, I congratulate you on
surviving my little test, anyway. Did Karsh
bring you here?”

You nod, trying not to betray your
emotions. Luna laughs. “Yeah, I bet you got
one hell of a lecture. Luckily for you, I figured
out a much easier way to help you transition
into our world.”

“Oh?” You choose your words carefully.
“Another trial?”

“Of a sort. You see, one of these vampires
has called in a favor I owe. The other Kindred
is your sire.”

“What does that have to do with me?”

“You get to choose who you’ll leave here
with. Your sire will immediately take you to
meet Prince Morganti, an honor typically
not handed down right after your Embrace. 

The other has guaranteed his intentions. For
Kindred, that means you won’t wind up in
torpor or set out in the sun.”

Your gut instinct tells you this deal smells
rotten, but you’re not about to argue with the
clan primogen. “Before I choose, I’d like to
hear more from these two.”

“Of course, of course,” Luna reassures you.
“But choose wisely, for among our kind, we
need to be very picky about the company we
keep. Le Roi taught me that.”

Talus is the first to step forward. The
gaunt man is a study in blurry lines, his black
suit looks like it’s made out of gauze. “I’m
pleased to finally meet you. I’m sorry you had
to go through this nasty business, but it was
necessary. Luna’s orders, of course.”

“So, you’re claiming to be my sire?” You try
to remember all the details, but you’ve been
through a lot tonight, more than you have in
months. “Can you tell me how it happened?”

“But of course,” he says, oozing confidence.
Talus describes everything that had happened
to you with perfect clarity--right down to the
part about your first test.

“You mean those two pits? Gee, that was
something.”

Talus smirks. “Aren’t you the feisty one? I
was right to ask the Prince to Embrace you.”

“Permission?” The more you hear about
what you’re supposed to do and what you’re
not, the less interested you become in joining
the Camarilla, the Sabbat or any other group
for that matter.

“What happens if I decide to go with
you? Where will you take me?” You ask
Talus carefully, hoping you don’t sound too
antagonistic. If this creepy guy really was your
sire, then he’d probably tell you to do whatever
was in his best interest. Sounds like something
a vampire would do, doesn’t it?

“We will go where you rightfully belong,
by my side. Of course, you will join my
organization, which is why your choice
tonight is so important. If you don’t come
with me, I cannot afford you any protections
or boons that come with our arrangement.”

“What kind of favors?” Bennies could be
good, right?

“The usual. Teaching you how to use your
Disciplines, maybe add a couple of special 
powers along the way...” Talus’s voice trails
off into a whisper, as if he’s distracted by
something only he can see.

You take that as your cue to talk to the
other Kindred. “And you? Sapphire?”

Sapphire GoldenClaw is a perfect
representation of what you imagine your Beast
looks like. The vampire is naked from the waist
up and is covered in fur. His broad, brown
face seems to have taken on the traits of a bear.
His hands look more like round paws than
anything else.

“I guess I don’t know what to say,” Sapphire
began. He looked anxious, like he has
something to hide, perhaps? “I followed the
rules, of course. I asked permission to Embrace
you from the Prince and Santi. Remember
how I got you to the park? Things didn’t go
the way I wanted them to, but you’re here now.
That’s what counts.”

Unlike Talus, Sapphire doesn’t remember
what happened to you after you were
Embraced, which makes you wonder what else
he doesn’t know.

“You know, the whole reason I picked
you was because you have a special way with
animals. I told Santi that’s why you’d make
the perfect Gangrel, because you’d be able
appreciate them in a way humans can’t.”

“Time’s up,” Luna butts in. “Talus, any final
words?”

Talus slinks over to you and takes your
cool hands in his. “I know this is hard for you,
childe, but I am your sire. If you acknowledge
this truth, you will become part of a larger
family of Kindred. Choose me and I will take
you to meet your sister Cassandra and your
brother Dmitri.”

Luna interrupts him. “Don’t forget to tell
her she’ll have to join the Sabbat, first.”

Talus leans over and whispers something in
Luna’s ear. Her eyes widen with fear. You’re not
sure what’s going on between the two of them,
but you’re not convinced it has anything to do
with you. Frustrated, you look to your Beast
for answers, but it’s on the defensive. Who will
you choose?

To [[follow Thalus-&gt;Section 41]] Teratov’s instructions and
join the Sabbat.
To [[leave-&gt;Section 44]] with Sapphire GoldenClaw.</tw-passagedata><tw-passagedata pid="17" name="Section 44" tags="" position="760,1909.5" size="100,100">“Wonderful! Let’s get going.” The whiskers
on your sire’s nose twitch with anticipation.
“Thank you, Luna. Theratov, always a
pleasure.”

He hastily excuses himself from Santi’s
presence and rushes you out of the ring. Even
though your sire looks like a big ole grizzly
bear, you’re pretty sure he’s not someone you
want to cuddle with.

“Hey, where are we—”

Sapphire scolds you. “Keep your voice
down. You don’t want to get us killed, do
you?”

Killed? What did you get yourself into,
anyway? You’re not sure if you’re happy he
Embraced you or if you should be pissed
at him. And what’s with that stupid name,
anyway? “So, I have to ask. Your name isn’t
really Sapphire GoldenClaw... is it?”

“Not here, okay?” Sapphire growls
menacingly. “We have an important meeting
to attend to. The kind I can’t afford to refuse.”

For the moment, you keep your mouth shut
and follow him back through the butcher shop
and into the sewers. After a few twists and
turns, you come to an intricately carved door
supported by two columns. Standing on either
side of the elegant doorway are two hooded
figures cloaked in velvet.

Sapphire leans forward and whispers
to one of them. The figure raises his hand
and the door dissolves, revealing a dimly-lit
passageway. You tread carefully, hoping you’re
not getting suckered into a trap.

“Okay, we have a few minutes.” Sapphire’s
shoulders droop. “Sorry to involve you in this
mess, but I am bound by the Prince’s orders.
Luna Santi has been a very bad girl.”

“I’m guessing it’s not a good idea to piss off
the Prince.”

“Ah, to be young and naïve again.” Your sire
stops about halfway down the hall on a tiled
landing. Wandering over to the wall, he starts
pressing various bricks and statues sticking out
of it. “You were right. My name isn’t Sapphire
GoldenClaw, by the way. It’s Urso.”

“Let me guess, the whole GoldenClaw bit
was a disguise?”

One of the statues slides back into the wall,
allowing a broad door to swing open. Karsh is
standing there, waiting for you.

“I see you’ve brought your childe,” he says,
eyeing you suspiciously. “That wasn’t part of
the deal.”

Urso holds his ground. “I know you don’t
like me much, warlord. You think I don’t play
by the rules, but you’re wrong. I brought my
childe here because she has a right to know
what’s going on.”

Karsh sticks his face into Urso’s. It is full of
threats. “You disobey two Princes by bringing
her here.”

You feel your Beast stirring. Either you do
something now, or both you and your sire are
going to wind up slaughtered. “Mister Karsh, I
asked him to tell me what was going on. Urso
felt it wasn’t safe to have our discussion out in
the open.” You do the best imitation of doe
eyes you can possibly muster. “I can leave if
you want me to.”

Your sire doesn’t seem affected by your
words, probably because he’s too busy
struggling with his Beast, but Karsh definitely
is. “Urso, you may tell her only what pertains
to her.”

You pull the back of Urso’s pants away from
Karsh. “Thank you, Karsh. We’ll be going
now.”

Karsh wanders deeper into the new
passageway, closing the door behind him.

“If he had his way, I’d be dead by now.”
Urso moans, kicking the stone wall. “He
doesn’t even care how rare I am. Just sticks to
his damn orders.”

“Yeah,” you say, fingering your forehead.
“I kind of got that impression. So what’s the
deal?”

“Luna Santi has been working with a clan
known as the Tzmisce. She’s been feeding
them opportunities to grab new Gangrel. You
just happened to be one of them.”

Although Urso is telling you what’s going
on, you’re not sure you understand the
seriousness of the situation. “I don’t get it.”

“Santi is trying to overthrow the Prince.
That particular plot happens a lot among our
kind. There’s always one vampire who wants
power over another but in this case, new
vampires and kine are getting caught in the
crossfire. Her war with Morganti is a huge
threat to the Masquerade.”

“And the Tzmisce? I’m guessing Talus was
one of them.”

“That clan is not part of the Camarilla.
They’re mostly Sabbat, which by our standards
is about the meanest, sickest, most terrifying
group of vampires known to man.”

“Why would Santi side with them? For
support?”

Urso’s shoulders droop. “Yes and no. Talus
is powerful, but until tonight I had no idea
how brave he was. He knew I was your sire
and yet he asked you to join the Sabbat right
in front of me. Santi must have promised him
part of the city in exchange for his help.”

“How bad can the Sabbat be, Urso?”

“Rumor has it they have power over bones
and flesh.” Urso shook his head, his face a
contorted mess of emotions. “They blend and
twist them in their hands like clay—while
you’re still alive, of course. With the Tzmisce,
mortals and Kindred alike are tools for their
nefarious ends.”

The thought of being turned into pottery
causes your Beast to howl. “So what now?
Karsh didn’t seem too keen on me being here.
From what you’re telling me, you need to
figure out how to end this threat.”

Urso takes a step back and gives you the
once-over. “I was right to choose you, little
one. There’s not much I can do for you now,
not with Karsh and the other Gangrel in town,
but I can give you a choice.”

“Lay it on me.”

“To prove your worth, jump back into the
ring with El Diablo Verde. If you win—for real
this time—it would be a tribute to me and to
Clan Gangrel. The only other option would
be to join the Sabbat and wait for me to rescue
you.”

You may be new to the Kindred, but you
weren’t born yesterday. “You want to use me as
bait.”

Urso places his fat paws on your shoulders.
“I can’t guarantee that I’d get to you in time,
but I’ll definitely try. ‘Course, it depends upon
how long this meeting takes. A lot of other
Gangrel and angry Kindred have appeared to
deal with this matter. Litrac, Inyanga, Beckett,
Karsh and Theo Bell just to name a few.”

“I guess it’s up to me, then. Either earn my
chops in the ring or show my support for the
clan.”

“That about covers it, yeah.” Urso hands
you a crudely drawn piece of paper. “If you
want to track Talus down, you’ll have to play
his game and join the Sabbat. If they let you
in, you can report from the inside.”

“Has anyone else signed up for this? I
mean, there’s got to be other spies—”

“Sure, kid. Ariel tried earlier tonight, but
she’s Malkavian. Whatever the Sabbat did
to her, she’s more messed up than before.
Obsessed with mirrors, poor thing. You
remember that suit who watched you wrestle?”

Your mind was so focused on El Diablo
Verde, you can’t remember who was sitting in
the audience. “I was a little busy...”

“Well, that was Nathaniel Le Roi. He’s this
Toreador guy. Kind of a stiff, really. Anyway,
I told him his childe was in danger and he
didn’t believe me. Nathaniel thinks the Prince
is going to give him protection just ‘cause he’s
got some dirt on him.”

“Great, so I guess it’s all up to me.”

Your mind is reeling. So far you’ve managed
to survive long enough to accomplish your
goal. Now that you’ve met your Sire, you’re
faced with a terrible decision that will impact
your immediate future. Truth be told, you’re
not sure who’s worse—El Diablo Verde or the
Sabbat. You start to laugh. Just yesterday you
were complaining about the weather. Now?
You might be the only one in the entire city
who can thwart a coup. Your gut tells you
this is not what you have to do, but what
you should do. You’re no longer a weak and
powerless mortal, you’re a vampire now, and
you better start acting like one.

“All right, Urso. I think I’ve made up my
mind. Tell Karsh I’ll see him later.”

Making a quick exit, you dash out of the
crypt and wind your way through the tunnels.
The twisting paths seem a little more familiar
to you now, so when you come to a fork you
know exactly where you want to go.

To veer right and [[face El Diablo-&gt;Section 32]] Verde in a
deadly re-match.
To [[join the Sabbat-&gt;Section 41]] to see what Talus is up to.</tw-passagedata><tw-passagedata pid="18" name="Section 29" tags="" position="846.6666666666666,1556.166666666667" size="100,100">Karsh’s chiseled frame stands next to a
massive, tiled pillar that looks like it’s strong
enough to support the entire city sprawling
above you. He fingers his beard, then beckons
you over to him. Together, you wind through
a deep network of tunnels that twist and turn
for miles. The deeper you go, the chattier he
gets. You can only make out about half of what
he says, but one thing is clear: he won’t stop
stressing the importance of the Masquerade.

“While we are more powerful than
humans, the Masquerade allows us to thrive
as a society. Without it, the world would be
plunged into chaos. That’s one of the reasons
why the relationship between a sire and childe
is important...”

Blah, blah, blah. You want to listen to
Karsh’s speech, but you can’t stop thinking
about who your sire might be and what he
looks like.

“Every vampire is different, every clan
unique,” he tells you. “We Gangrel were born
to hunt.”

You think you remember your sire telling
you something about that. “What? Like a dog
or a pigeon?”

Karsh freezes in his tracks. “You might
want to rethink that last statement.”

“I’m just asking...”

Before you can blink, the elder vampire
puts you in a head lock. You feel your Beast
rising to the surface, but you tell it to calm
the fuck down. Pissing Karsh off is not a good
idea. His skin is cold to the touch, but feels
hard, like a slab of thick marble. “Generations
of vampires have come before you, little one.
You’ll want to talk less and listen more.”

“Yes, sir.” You manage to croak.

“Hmmph,” he grunts. The next time you
blink, he is halfway up the tunnel. “Hurry up,
they’re waiting for you.”

“Why me?” You catch up to him and exit
the sewers through a slimy doorway into the
basement of a butcher shop. Long slabs of
skinned meat hang from the rusted ceiling.
Ragged saws threaten to erupt from of the 
wall at any moment. Karsh doesn’t seem to
care that you’re a little freaked out; he marches
down a rickety stairwell, taking you deeper
underground. You’re just about to ask Karsh
where the fuck you are, when you hear the
roar of a cheering crowd.

“Welcome to Extreme Wrestling Warfare,
where Beast meets Beast in a showdown to
Final Death or torpor, whichever comes first.
Tonight, we welcome a special guest to our
fair city. Your favorite luchador... the one... the
only... El Diablo Verde!”

The announcer’s voice is faint, but his
words are unmistakable: you’re about to enter
a vampire wrestling match.

“You can’t be serious,” you whisper
underneath your breath, hoping Karsh won’t
smell your fear.

“Santi has an unusual way of leading her
clan. In life, she was a huge sports fan, so it
makes sense she’d utilize the arena to welcome
new Gangrel to the fold.”

“You call this welcoming? Let me guess,
survive two minutes and I can finally meet my
sire?”

Karsh regards you with disdain. You
wonder what he’d do to you if he didn’t have
to answer to the Prince. “More like thirty
seconds.”

It’s been a long night for you, but the Beast
inside of you is itching for a fight. It smells the
danger and begs you to rise up and meet it.
“I’ll do it, for my sire.”

“Good, in you go.” Karsh tosses you head
first into the ring.

“Now just wait a second...” You mull
over your options. If you want to stay on
Karsh’s (and probably Luna’s, too) good side,
you should stay and fight. Still, you realize
you might have another option. There was
someone waiting for you in the shadows,
wasn’t there? Maybe you should find out what
she wants.

To [[jump out-&gt;Section 23]] of the ring and backtrack to
meet the woman filled with dark secrets.
To [[take on El Diablo-&gt;Section 32]] Verde.</tw-passagedata><tw-passagedata pid="19" name="Section 3" tags="" position="1488.6666666666667,840.8333333333334" size="100,100">Your choice seems to have surprised the
masked man with the black silk top hat. His
eyes widen, a gesture so strong that you can
see it even through the oval eye-holes of the
half-mask and when he speaks, his voice holds
a darkness that it did not before.

“You’re certain? You will take up the
Broken Mirror?” The tone of his voice
makes it clear that he thinks you’re crazy, but
somehow that only firms your resolve.

You nod, with more confidence than you
feel. “I’m sure.” After all, what are your other
choices? You’re no art snob, and animal fur
makes you sneeze. Besides—prophecy and
omens? How cool is that?

“So be it, then. Follow me.” Without a
further word, he turns and walks out of the
room, with a steady gait that suggests the cane
in his hand has some use other than support.

As you follow him, you realize you’re
not headed back out into the main area of
the nightclub, but instead have passed into
some sort of private zone towards the back
of the building. The noise from the bar fades
out, until the only sound is that of your own 
footsteps and the nervous pounding of your
heart drumming in your ears.

You pass through dark halls and darker
doorways as you follow the now-silent man
deeper into the labyrinthine maze. Your earlier
suspicion about his choice of accessory is
confirmed as he murmurs a few words in some
arcane tongue and the door-knob sized globe
beneath his hand begins to emit a faint and
flickering yellow-green glow.

You begin to ask him about it, but the
expression he casts your direction silences your
questions before they emerge from your lips.

The path forward is illuminated faintly by
the cane’s hellish flame as you continue into
the darkness. You follow him down stairs,
along hallways, and around corner after mindnumbing
corner until you have no sense of
direction or bearing.

At some point, you realize that the walls
themselves have changed. Paint and plaster
have been left behind, replaced first by grey
brick, then rough-hewn stone. The tunnel
itself takes on a surreal feel, as if the journey
you are undergoing is no longer one person
walking down a series of hallways.

You are an insect, crawling through the
center of the earth, too small to be noticed by
the human world above you.

You are a soul, transitioning from life to
death, from Earth to the great beyond, from
living to Limbo.

You are Everyman. The journey is eternal. It
will never end. It never began. It only Is.

Or, perhaps you’re just one human being,
being led to an unknown fate.

After you’ve walked long enough that
your legs are beginning to tire and you can no
longer imagine where within the city, let alone
the building, you’ve travelled, the masked man
leads you to what appears to be a dead end. He
pauses, fiddling with something in the center
of the wall at the end of the tunnel. You bob
and lean, trying to see past his shoulders, but
before you can catch a glimpse of what he’s
doing, the entire wall groans and shudders.

He steps back to reveal a narrow gap,
holding the light away so that only darkness
appears beyond the opening.

“If you are certain… your destiny lies
through there.” His tone is ominous.

With more confidence than you feel,
you nod and step through the gap, into the
darkness. As the door slides shut behind you,
you wonder just exactly what you’ve gotten
into.

Without the glowing ball of light, the room
appears at first to be pitch black inside. But as
your eyes adjust, you realize that you can pick
out shapes, even movement, around you.

You jump, and all around you, shadows
and shapes parody your startled gesture. You
squint and rub your eyes, and as the shadowy
figures around you mock your actions, you
realize that you are surrounded by mirrors.

Closer examination reveals that the room
is filled with them. Mirrored tiles cover the
walls, including the one that you think you
just entered through. The floor and ceiling are
similarly outfitted, giving a dizzying ambiguity
of perspective. Floor-length mirrors, some in
antique frames, some looking like they’ve just
been ripped from a school gym locker room,
are arranged at angles all around you. Some
hang on the walls, others seem to float on thin
air, are propped willy-nilly against one surface
or are layered, partially covering another. Very
subtle light radiates from behind several of the 
mirrors, just enough to cast shadow and mar
perspective.

“Forgive me,” a voice echoes in the
chamber, refracted like the light, making it
impossible to tell exactly where it originated.
“I know many find this room to be…
pretentious. But I do believe that symbolism is
just as important as ritual for truly embracing
the depth and import of such a momentous
occasion.”

A man’s image leaps into place in a hundred
locations around the room. Dark and dour, his
black clothing is only accessorized by a single
white tab at the center of his collar. The priest
is reflected over and over again until there is
an army of clergy surrounding you on all sides
and you are no longer certain which, if any, of
them are real and which are illusion.

“The journey you are about to undertake
is unlike any you have been upon in the past.
Are you certain of your choice?” The crowd of
identical priests waits for your answer.

You begin to nod, but before you’ve
finished the gesture, the lights go out. You
are grabbed, hard, from behind. A thousand 
hands, cold and unyielding, hold your body in
place. A hundred mouths, full of icicle shards,
cut into you. They pierce your neck, your
wrists, your skin, stinging and slicing. For one
endless moment, there is pain. For another
lifetime, there is pleasure.

And finally, there is only the cold.

You wake to find yourself alone in the
mirrored chamber once more. Or at least, you
hope you’re alone. Hundreds of eyes stare back
at you, reflected in the mirrors. You’re not
entirely sure that all of them are truly yours.

You do know for certain, however, that
you are hungrier than you could ever imagine
being.

Several of the mirrors have been knocked
askew. Their frames are slanted at strange
angles, crooked angles, wrong angles. You
realize that the placement of the mirrors
seems to hold some sort of a message, but it’s
distorted because some of them have been
disturbed.

The eyes follow you as you stand, waiting
for you to make a decision. No matter where 
you turn, they’re watching you. Judging you.
Reading your thoughts. Finding you wanting.

Another section of the mirror in front of
you has been moved to the side, revealing a
dark passageway beyond. You cannot see what
lies through the doorway, but at least there are
no mirrors there.

To [[straighten-&gt;Section 6]] the crooked mirrors and try to
understand their message.
To [[escape the eyes-&gt;Section 9]] that seem to bore into your
very soul, and find sanctuary down the hallway.</tw-passagedata><tw-passagedata pid="20" name="Section 4" tags="" position="2588.6666666666665,834.1666666666666" size="100,100">“You are exactly what I have been looking
for.” There is the hint of a foreign accent as
a dark-haired man in a tailored three-piece
suit addresses you. You take him in with a
quick glance from head to toe. His coloring,
cheekbones and styling of his shoulder- length
hair are curiously out of step with modern
appearances. Just under six feet, he is of a thin
runner’s build. As he gestures to the crowd
dismissively, you note the long, tapered hands
covered with a fine line of old scars across the
backs.

“What you and I must discuss is not for the
ears of the rabble. Come with me.”

You feel no reason to protest, even when
his uplifted hand caresses the side of your
face in a strangely possessive manner. Perhaps
it’s the eyes: steel blue, mesmerizing. All you
can do is nod in agreement, falling into step
beside his tall, gaunt figure. The two of you
walk for several minutes without an obvious
purpose, but heading away from activity and
others. A smothering silence is broken only by
the sounds of your feet, and your path is filled
with more shadows than light.

“My name is Nathaniel Le Roi,” he
murmurs, glancing over his shoulder before
gesturing towards the façade of an imposing
brownstone residence with a decoratively
carved walnut door.

As he leads you up the walkway, you to
take in the three-story building – noting the
bars on the first floor windows and the locked
gateway to the basement entrance to the right
of the steps. There appears to be one room on
the second floor, with a light shining through
a space in the closed drapes.

While your companion fiddles with the
door’s lock, a vague memory from French
lessons long past surfaces and you comment
aloud, “Nathaniel… the King?”

One side of his mouth curves upward in
a smile, visible as the door swings inward, to
reveal an entryway that is nothing less than
an idealized recreation from the Victorian
Era: Carved, ornate banisters and lush velvet
drapery, a chandelier of flickering candles and
vases of roses filing every flat surface in sight
and overwhelming the air with their scent.

“Not a King here.” He pauses. “But, I strive
to live with as many luxuries as this world can
provide.”

To [[enter-&gt;Section 7]] the brownstone at Nathaniel’s
invitation.
To [[decline-&gt;Section 22]] and leave.</tw-passagedata><tw-passagedata pid="21" name="Section 6" tags="" position="1413.6666666666667,990.8333333333334" size="100,100">You move to straighten the mirrors, staring
intently into them as you painstakingly assure
that each is perfectly aligned before going to
the next. The perfection of each adjusted angle
reassures you against the paranoid thoughts
that flooded you moments before.

Time passes slowly as you work your
way around the room, squaring each frame
and centering it against the backdrop of
reflections. You carefully wipe away each
fingerprint, breathing on the glass and
polishing it with the cuff of your shirt sleeve
until there’s no trace of your adjustments left
behind.

At length you stand back and admire your
work.

It is perfect.

“Have you finished?” A gentle voice behind
you startles you. You jump back, narrowly
avoiding crashing into one of the free-standing
mirrors.

For a moment, in your mind’s eye, the scene
plays out differently and you see the tall mirror
tumble to the ground, shattering into a million
pieces, all hope of understanding the message
found within it lost.

You blink, to find the mirror still whole.
Turning back towards the voice, you find an
angelic figure waiting patiently to speak with
you.

You believe it to be a woman, although
her body is as willowy as a young boy’s. Her
hair is almost silver-white, loose around
her shoulders. She is dressed in white silk, a
robe belted loosely at the waist. The fabric
undulates with each breath, but reveals
nothing of the body beneath. A strand of
scarlet rosary beads drapes across her chest.

“I’m to serve you, should you desire.”
There is something, a twitch at the corner
of her mouth, perhaps, that speaks of layers
of meaning below the obvious one. So much
import held in so few words.

All in all, she’s a vision, and you wonder
if she is, in fact, the truth you summoned by
undoing the chaos of misaligned mirrors. You
step closer and look deeply into her eyes.

They are full of stars. 

“My name is Ariel. The Reverend said that
you would be hungry?”

Your stomach gurgles.

She’s an angel. Her gaze holds the truth of
the ages.

And she smells like food.

You must look confused, because she steps
forward and takes the lead. Drawing a tiny
razor from the lining of her belt, she raises it
to her wrist, and before you can protest, draws
the blade across the inside of her wrist.

You want to be horrified. You want to
protest, to find her help for the wound that
has left a trail of crimson slowly winding its
way down the perfect snowdrift of her inner
arm.

But more than anything else, you want to
feed.

When she raises her wrist to your lips, you
try to protest. But the scent of her blood, the
sweet metallic tang is too much to resist, and
when she presses your lips against her skin,
your protestations are forgotten.

You lap at the scratch, intoxicated by the
trickle of blood against your tongue. And
when that does not sate you, you feel yourself
bite into her wrist, burying fangs you did not
know you possessed deeply into the vein there.

She gasps.

You drink, deeply. The hot coppery flow
of her vital blood over your tongue spurs you
on. Her moans turn from pleasure to protest,
and as she tries to pull away you hold her wrist
tightly.

“Stop! Not too much…” Ariel’s voice begins
to fade. You hear another voice, a male voice,
barking a command.

“Enough! We have business.” Somewhere
beyond the cloud of crimson pleasure that
has taken you over, you recognize the priest’s
voice, and the inherent threat that it carries.
Something about him is different now,
however. Something feels familiar. As if you
and he are two jagged pieces of a splintered
whole, and somehow you fit together.

There is more, though. Something in his
tone demands obedience, and you reluctantly
pull away from your meal.

Ariel slips to the floor, limply, crimson still
dripping from the wound at her wrist. The
stars in her eyes have dimmed, and her rosary
is skewed against the pristine white of her
robe. You reach out to straighten the beads,
and your fingers leave scarlet stains on the
angel’s gown.

“Lick her wound,” the priest commands.

You obey, although you are uncertain
why. To your amazement, the wound your
fangs left closes beneath your tongue, leaving
only the scratch the angel had inflicted on
herself to mar her perfect skin. Two robed
figures slip into the room from behind one of
the standing mirrors, and haul the angel off
between them.

With the angel’s blood still on your lips,
you turn to the priest.

“Drink too deeply from the well, and it will
surely run dry,” he says, handing you a cloth
and gesturing for you to clean your face and
hands. “In time, that choice and the weight
thereof, will rest solely in your hands, but
until you learn enough to choose… best to sip
lightly.”

You’re not certain exactly what the priest
means, but you nod anyway as he continues.

“I am Reverend Isaac Murik. You have
come here for a reason,” the clergyman
intones. “God has brought you here for
a purpose. Are you ready to take up your
duties?”

He waits for your answer.

To [[agree-&gt;Section 12]] with Reverend Murik and take up
your duties.
To [[refuse-&gt;Section 15]] the priest and try to ask more
questions about your situation.</tw-passagedata><tw-passagedata pid="22" name="Section 9" tags="" position="1805.3333333333335,969.1666666666667" size="100,100">Feeling a thousand gazes on your back
as you depart, you escape down the dark
hallway. As you leave, you think you hear a
soft chuckle from the room behind you, but
you don’t hesitate long enough to investigate
it. Whoever—or whatever—was there surely
intended you no good.

The hallway stretches out in front of you,
long and dark. You leave the light of the
mirrored room behind you, trying not to
think about who was back in there with you.

Or whether they’re following you.

They could be… right behind you.

You break into a half-run, concentrating
on what’s ahead of you. Stairs. A seemingly
endless series of stairs, spiraling up from the
belly of the building. You climb them at a
sprint, flight after flight, until you’re certain
you’ve left whatever was in the mirrored room
with you far behind.

You turn your attention upward.
Somewhere up there in the darkness, you sense
something. An almost imperceptible easing
of the blackness. A whisper of murmured
reassurances. The faintest stirrings of a breeze
against your skin. The scent of… food.

Your stomach growls, and you’re hit
with a hunger stronger than you have ever
remembered. Without willing them to do
so, your legs pick up the pace, propelling you
further and faster up the stairs towards the
faint light and the smell of sustenance.

As you draw near, the subtle glow of
illumination reveals itself to be a thin outline
of light coming from around what appears
to be a doorframe. After your time in the
darkness, the light beyond seems almost
blindingly bright. But equally intense is the
scent of sustenance, just beyond the door.

Hunger wracks your body, making your
hands shake with need. You scramble at the
door until your hand falls upon a lever of
some sort. You jerk and claw at it, until the
mechanism gives way and the door suddenly
swings inward, spilling you out of the stairwell
and onto an open roof.

A cacophony rises at your appearance. The
noise is coming from a circle of small buildings
surrounding you. Three or four of them, no 
bigger than bus stop stations. Each is filled
with a flock of highly irritated birds.

The pigeons protest your presence, flapping
violently within the confines of their wooden
prisons. As you draw near, the closest coop
goes mad, birds beating themselves against the
chicken-wire windows in an attempt to escape
from your presence. Claws rake against one
another as they struggle, and the night air is
filled with the scent that drew you up here.

You act before you can think, thrusting the
door open. A whirlwind of wings buffets at
you as your victims flee.

You drink. And when the broken body in
your hands offers no more sustenance, you
throw it aside and snatch up another, too
injured to have escaped with its fellows, and
drink that as well.

“What’s this now? Look at the mess
you’ve made!” A woman’s voice with a slight
British lilt to it scolds you. You turn to face
her, dropping the last, limp body from your
bloodstained hands.

She looks at you, elbows akimbo, hands
on hips. She’s a dour-faced woman of what
appears to be middle years, wearing a tweed
skirt suit and sensible brown alligator-skin
shoes. Her short auburn hair is carefully
coiffed in curls and her makeup is sedate
but expertly applied. She frowns at you, her
disapproving stare makes you incredibly aware
of the ludicrous picture you must present.

There’s something about her, something
beyond what you can see. She feels like you
felt when the darkness overtook you in the
mirrored room. Like she’s a part of you, in
some way. The feeling doesn’t provide you
with any comfort, though.

“You’re another of the Reverend’s now,
aren’t you? Damned shame, that one, making
childer and then not giving them the teachings
they need to feed without mussing up my
coops. It’s going to take me hours to get all
them home and settled in now!”

You apologize and begin to introduce
yourself, but the woman waves off your
explanations with an imperious gesture and
orders she obviously expects you to obey
without question.

“Enough of that. I’m Amelia Kettlesworth,
but you may call me Mrs. Kettlesworth. There
will be time for introductions on your part
when you learn who you are. Until then, you’re
nothing but mouthing the words, so no sense
in wasting the air. Gather those up there, and
put them down the chute. That goes to the
incinerator, so there won’t be questions.”

There’s something about her tone that
makes you certain there’s more to what
she’s saying than meets the eye. She doesn’t
want to know your name. That way you stay
anonymous.

“Hurry up now. We haven’t got all night.”
She nods towards a basket big enough to
hold the half-dozen pigeon carcasses you’ve
left scattered around the rooftop, and then
towards a small metal door set in the side of
the stairway.

Caution signs warn “Danger! Refuse
Depository: Dangerous Drop and Incinerator
Below. Insert only Trash!” The warnings clang
through your vision, echoing in your head.

Danger! Danger! Danger!

She doesn’t want to know your name.
You’re not a person to her. You’re just trash…

You begin to gather up the dead pigeons,
but you can feel Mrs. Kettleworth’s glare on
the back of your neck.

You killed her pigeons.

You reach for another of the dead bodies,
its wings splayed at unnatural angles.

You glance back over at the woman,
surreptitiously. She’s still glaring at you. Is she
closer than she was before?

The last pigeon lies near to the refuse
chute door. Unlike its companions who were
mottled browns and blacks, this one was white
as any dove. Pure, before you took it, but
smeared now with garish red where you ripped
its throat open with your bare teeth.

Mrs. Kettlesworth moves closer.

You pick up the last body, and place it atop
the rest in the basket. Its unblinking eye stares
up at you from the pile of its kin.

“That’s it,” the woman says, stepping up
behind you. “Now into the chute.”

You can feel her tension behind you, sense
her plans for you as clearly on the stink of her
perfume as if she was speaking them aloud.
She’s going to get revenge for you destroying
her pets. The chute is just shoulder-wide, and
the drop must be 20 stories.

You open the chute, and she moves behind
you. You only have a moment to make your
decision.

To fling Mrs. Kettlesworth [[down the chute-&gt;Section 24]]
before she can shove you in.
To throw the basket of dead birds at her and
[[escape-&gt;Section 27]].</tw-passagedata><tw-passagedata pid="23" name="Section 12" tags="" position="1338.6666666666667,1140.8333333333335" size="100,100">Although you’re uncertain of what exactly
the priest means by asking you if you’re ready
to “take up your duties”, you nod.

“I am ready,” you say, with more confidence
than you feel. But now that your hunger is
sated, you’re anxious to begin whatever it is
that this new existence holds for you.

The priest leads you into another chamber,
this one cavernous in size. The floor here is
hardwood, polished to a high gloss despite
its apparent age. The walls are covered in row
after row of ceiling-high bookshelves. Similar
shelves are arranged in rows, dividing the
room into aisles narrow enough that you could
touch a shelf on each side with outstretched
arms.

“Welcome to the Repository,” Reverend
Murik says, sweeping an arm out to draw
your attention to the room like a game-show
hostess displaying a new car to the audience.

Books of all types fill many of the shelves.
At a glance, you see modern graphic novels
stacked haphazardly beside leather-bound
tomes and magazines from the 1950s.
Leather hides inscribed with ornate-butfaded
illumination are heaped beside piles of
children’s books whose once-garish primary
color illustrations have also dulled to muted
tones with time.

“Members of Clan Malkavian have,
throughout the years, gathered this material
and brought it here to be studied. Each
piece was chosen because it resonated for the
individual who brought it here. Each item is a
piece of the puzzle. Somewhere in here lies the
answer.”

“The answer?” You follow the priest’s gaze
out over the shelves. At first you thought
they were filled solely with books, but as you
examine them, you see that here and there,
other media is also evident: VHS tapes, wax
audio tubes, paintings and sketches and even
player piano scrolls.

The bedlam makes you nauseous. It’s a
visual version of a first violin practice, as
performed with a chainsaw by an epileptic on
a fiddle made of alley cats.

You clench your jaw, fighting back waves of
revulsion, even as your fingers ache to begin
setting it to rights. Just one shelf, one spot
of order in the midst of all this, and you’d be
okay.

But before you can act, the priest begins
with his explanation again. You force all of
your attention upon his words, just to try to
keep the clutter from driving you mad. “There
are those who believe we—the Kindred—are
cursed. That this state, with its hungers and
needs, is a punishment from God levied
upon the first of our kind for unforgiveable
actions.” The priest frowned, shaking his
head at this last thought. “Some believe that
this is a permanent state. That the sins of our
forefathers blight our souls beyond any chance
of redemption. That this is why we have the
Hunger for blood. The Beast that drives us to
frenzy. Why the sun can destroy us and our
hearts no longer beat. Why we have no souls.”

“What do you think?”

“Personally, my views are simple.” the priest
answers. “The good Lord is a mighty God. He
asks much of us. He is not an easy master to
serve. He does not forgive lightly. But He is
just. If there were no chance of redemption, he
would have simply punished the sinner and let
that be the end of that. He would not give us
the opportunity to redeem ourselves, without
the possibility of doing so.”

You shake your head, confused at the
clergyman’s rambling explanation. “You think
there’s a way to cure vampires?”

“To call it a cure would mean that our
state is a disease. I believe—as do many of the
eldest and wisest of our clan—that just as God
offered Adam and Eve’s descendants his only
begotten son as an answer to the weight of
the Original Sin levied upon their ancestors,
so he offers us the opportunity to transcend
the sinful state we find ourselves in… a way to
become more than what we are, and to leave
the curse of thirst and rage behind us.”

“Vampires… but no drinking blood? No
having to hide from the sun? How is that
possible?”

The priest smiles at you. “The Good Lord
works in mysterious ways, my childe. But He
also provides us with all the answers—if we’re
willing to do the work to find them.”

“And you think the answer is… here?” You
look around the Repository.

“The secret to Golconda is contained
within these walls. I do not think it. I do not
believe it. I know it. I have faith. The question,
my childe, is… do you?”

The priest waits for your answer.

To [[begin your work-&gt;Section 18]] in the Repository.
To [[refuse the duties-&gt;Section 21]] Reverend Murik has set
before you.</tw-passagedata><tw-passagedata pid="24" name="Section 15" tags="" position="1530.3333333333335,1549.166666666667" size="100,100">“Duties?” You don’t know what the priest
is talking about. “I don’t want duties! I want
answers!”

The priest sighs, but nods. “Of course you
do. Forgive me, my childe. I forget, at times,
how confusing this can all be to those who are
newly baptized into this existence. Come with
me. I will explain all that I am able.”

The priest leads you down a dark hallway,
and through a long series of stairways and
tunnels. There are seven steps in the first
stairway, and two sets of thirteen in the
second. As you follow him, you contemplate
the possible meanings of these numbers.

Does it bode well? Or ill? Does the fact
that the smaller stairwell (with the more
traditionally “lucky” number of stairs)
came first mean that you made the right
choice about joining Clan Malkavian? Or
is it an omen of some upcoming fortune,
some situation you haven’t encountered
yet? And what of the double-dose of “bad
luck” numbered stairs? Do they cancel out
one another, or is it a sign of exponentially 
increased misfortune?

You’re so deep in your thoughts that you
almost run into Reverend Murik’s back when
he pauses before a bank of elevator doors. You
look around and realize you’ve left the tunnels
behind, and are now standing in what looks
like a modern office building lobby. The floors
are marble tile, inlaid every fifth intersection
with a disk of tarnished bronze. The interior
walls are a muted buckskin color, textured like
suede. The exterior is smoked glass from floor
to ceiling. Through it you can see a busy street
scene with cars rushing past in a constant
stream of head and tail lights.

In the elevator alcove, an ornate mirror in
a gilt frame reflects back a distorted image of
the city street. You meet your own eyes in the
reflection, and wonder who exactly it is that is
staring back at you.

The elevator opens, and Reverend Murik
ushers you inside. The doors close, and the car
jostles and begins to ascend. A chime sounds,
thirteen times, before the doors slide open
once more.

Murik leads you out of the elevator
and through a heavy double door with
“Reflections, Inc.” inscribed on the glass. On
the other side, he escorts you through an office
area and back to a private meeting room. Like
the lobby below, the entire exterior office wall
is glass, from floor to ceiling. Through it, you
can see the city arranged around you, lit up
like a Christmas tree against the night sky.

“They say that we’re madmen,” the priest
explains. “That our entire clan is tainted with
insanity.”

You nod. You’d heard the rumors, but
figured they were like those that said all
the Gangrel had fleas or that becoming a
Toreador was really just acquiring some sort of
supernatural STD.

Reverend Murik looks out the window over
the city. “And, of course, they’re right. We’re
mad, to a man.”

You blink. This wasn’t how you expected
this conversation to go.

“The Truth, however, is far deeper than
that,” the priest continues. “They think we’re
crazy because we don’t fit in with their reality.
What they don’t realize is that their reality is 
just a mirror. It’s a consensual creation that
reflects back to them what they want to see.”

You try to listen, but you find yourself
counting the windows in the building nearest
to this one. Some are lit. Some are dark. The
pattern blends with the priest’s speech.

“Madness isn’t an illness.” Two bright
windows and three dark.

“It’s not a curse.” One dark, two bright, and
one with a curtain pulled.

“It’s the ability to see between the cracks—”
A whole row dark.

“—in the mirror of consensual reality that
humanity has built for itself—” Two dark, one
half-drawn shade and two light.

“—and understand the nature of Truth that
lies behind and beyond that reflection.”

You understand what the Reverend means
now. Somewhere in the space between his
words and the pattern of the lights across the
street, it’s all become clear.

He turns, to face you. “There is a library,
down below. We call it the Repository.
Members of Clan Malkavian have brought
artifacts and information there for… decades.
Centuries, perhaps. There are times when one
of our line is called to seek for Truth amongst
these offerings. To find the secret which will
free us all.”

“The choice, of course, is yours. It must
be. Free will and all that. But I do hope you
will consider taking up the duties you have
been chosen for. It is, I believe, your destiny
to help us find the answers we’ve searched for
throughout history.”

To [[accept-&gt;Section 12]] Reverend Murik’s offer and begin
your duties.
To [[refuse-&gt;Section 21]] and set out on your own.</tw-passagedata><tw-passagedata pid="25" name="Section 18" tags="" position="1338.6666666666667,1285.8333333333335" size="100,100">You set yourself to the task at hand, certain
that if anyone can discover the Truth here in
the Repository, it is you. The priest has put his
faith in you, and you refuse to let him down.

As you look around the Repository, you
quickly realize that there is no way you can
work amidst this type of clutter. There doesn’t
seem to be any sort of organization system in
place, so you set about to establishing some
sort of order to the archives.

Hour after hour, night after night, you
group the artifacts in first one fashion and
then another. By era. By media. By material.
By geographic region or language or content.
And then, frustrated by the contradictions
unveiled by your classifications, you pile them
all together and begin sorting again.

Silent acolytes bring you sustenance as
if sensing when your hunger is growing.
Sometimes they bring vitae still-warm from
chalices encrusted with jewels and religious
icons. Other times, they kneel before you,
offering their own wrists and throats for your
holy communion. The angel is never among
them.

But still you work.

Occasionally new information is brought
to the Repository. It appears while you
slumber, and you wake to find some new
snippet of data, some new reliquary of
potential enlightenment waiting for you to
catalogue it. To decipher it. To weave it into
the tapestry of Truth.

The more you learn, however, the deeper
your confusion becomes. Just when you think
you’ve begun to grasp one truth, you turn over
a piece of paper and discover evidence that
unravels every thread of hypothesis you’ve
woven so far.

Time passes. You learn so much. But never
the Truth.

To set out on your own, [[turning your back-&gt;Section 21]] on
your duties.
To [[continue your studies-&gt;Section 42]].</tw-passagedata><tw-passagedata pid="26" name="Section 21" tags="" position="1165.3333333333333,1529.166666666667" size="100,100">You may not know much about things like
enlightenment and the great beyond, but you
know that you’re not about to spend the rest
of eternity in a library. Something tells you
that the Truth is out there, somewhere, in the
city, not sequestered in a bunch of dusty books
in some priest’s basement.

You make your apologies to the Reverend,
then find your way out to the street. The noise
here is deafening, a discordant orchestra of
vehicles and machinery. The sky overhead
is dark, but neon and traffic light up the
surface streets until they’re brighter than you
remember daytime being.

It’s all so loud, so bright, so chaotic. It takes
almost physical effort for you to tune out
the worst of it and get control of yourself so
that you can navigate the city streets without
shielding your eyes or stuffing your fingers
into your ears to dull the incoming sensory
onslaught.

Eventually you acclimate, though, and
can turn your thoughts to the important
challenges facing you. Safety. Sustenance.
Survival.

You’ll need a place to sleep through the
day, and those southern-facing windows that
seemed like such a bonus when you rented
your apartment are suddenly a major heathconcern.
Even the bathroom has a skylight,
which limits your choices for sleeping to “in
the closet” if you plan on finishing out your
lease.

You find yourself counting basement
windows as you pass them, and wondering
how many of “your kind” will be sleeping the
day away behind their painted-over panes.

Food’s another challenge. You don’t know
how often you’re going to have to feed, but
your first meal is already feeling like it’s
wearing a little thin. As you pass through
the night-crowds on the sidewalk, the other
pedestrians are all starting to smell a little…
appealing. Even the bums huddled back in the
alleyways are causing a reaction in your belly
that was once reserved for steaks hot off the
grill.

The idea both nauseates and excites you,
and as your stomach begins to rumble, you
consider backtracking to the mirrored room
and visiting the angel for a late-night snack.

You turn back, but your wanderings have
taken you out of the area of the city you’re
familiar with. Comfortable condos and
brownstones have made way for abandoned
storefronts, cavernous warehouses and the
occasional industrial factory. There are no
more briefcase-wielding business-folk hurrying
home from overtime shifts. The only presences
on these streets are those that gather in tightly
knit packs in doorway alcoves or drift back
into the shadows when you turn to look their
direction.

As you try to get your bearings, you
realize that you’re being followed. It’s nothing
concrete; you can’t actually see someone
tailing you. But the hackles standing up at the
back of your neck don’t lie.

You try to stay calm, but there’s a definite
feeling of being stalked… of being hunted.
Your pace quickens, first to a speedy walk,
then a half-run. You don’t bother slowing
when you get to the other sidewalk. After a
few blocks, you’re sprinting, trying to trace
your meandering path back out of the ghetto
and back towards civilization.

Your instinctual navigation fails you. You
dart down what you think is a connecting
street, buoyed by the promise of heavy traffic
and bright lights just beyond, only to find
yourself at a dead-end.

The streetlights have been broken out here,
the storefronts locked up tightly with security
bars, and the only car on the street looks like
it was stripped of its wheels, radio and any
fenceable parts years ago.

You turn back towards the arterial road,
hoping to double-back before you’re trapped,
but it’s too late. A figure in a long trench
coat slowly walks up the center of the street
towards you.

“So, this is the Reverend’s latest progeny…”
The voice is painfully well-enunciated, each
syllable razor sharp. “I’ve been curious about
that library he’s been gathering down in his
basement. So well protected, and he’s been
dreadfully recalcitrant about sharing even the
slightest tidbit of information on its contents.
How fortunate, then, that the Good Father
allows his latest apprentice to wander the city
streets alone.” 

The swarthy skinned vampire smiles, fangs
glistening despite the darkness. “Fortunate for
me, that is. Perhaps not so much for you.”

You begin to protest, but an army of
ethereal servants springs from seeming
nothingness around you. They grab you,
impossibly strong despite their translucent
forms, and hold you in place as their master
approaches.

Ghostly voices keen and howl in your ears
as the other vampire closes the space between
you. Spectral hands cover your mouth so
that you cannot scream as he begins his
interrogation.

It takes a very long time for him to believe
that you know nothing.

It takes an even longer time for you to die.

[[THE END-&gt;Intro]]</tw-passagedata><tw-passagedata pid="27" name="Section 42" tags="" position="1332,1437.5000000000002" size="100,100">You refuse to be daunted by the challenges
you’ve faced before, or your earlier failure
to discover the truth contained here in
the Repository. Somewhere, here amongst
the clutter, lies the secret to Golconda.
Somewhere, hidden in the disorder, the pieces
lie fallow, just waiting for you to put them
together in the right combination.

As you move between the aisles, you find
traces of those who have come before you,
remnants of previous presences here in the
Repository. They make no sense whatsoever to
you.

Notes scribbled on the back of envelopes
document one person’s studies, while those
scrawled on a series of used cocktail napkins
directly contradict the work of the first. You
discover instructions written in the margins
of newspapers and between the lines on pages
of sheet music, clawed into stone tablets and
painted in colored ink on the back of woven
tapestries.

There is truth here. You’re certain of it.
Each piece is like a personal message from
another member of your clan, a secret left for
you to decode.

But no matter how intently you study these
pieces, no matter how many nights you spend
dedicated to your work, the meaning of the
archived bits eludes you.

Some nights you sit without moving from
dusk ‘til dawn, studying a single artifact.
Others, you prowl through the aisles of the
Repository like some caged beast, unable to
focus, until the morning sun rises outside and
sends you back to your restless sleep.

Time passes, weeks becoming months,
months becoming years.

And still the Truth eludes you.

To [[continue-&gt;Section 18]] your studies.
To set out [[on your own-&gt;Section 21]], turning your back on
your duties.</tw-passagedata><tw-passagedata pid="28" name="Section 24" tags="" position="1725.3333333333335,1205.8333333333335" size="100,100">It’s her or you.

You prop the basket of dead birds on one
hip and pretend to struggle with the door to
the incinerator chute with your free hand. “I
can’t quite get it…”

You watch as Mrs. Kettlesworth draws
nearer. You can’t believe you’re considering
this, but you can tell by the way she looks at
you as she approaches, that it’s her or you.

“You ninny. It’s a simple matter.” She
reaches for the incinerator door, and you yank
it open at the same time and try to shoulder
her into the chute.

Unfortunately for you, the old bat is cagier
than she looks. She steps out of the way, and
you are forced to pretend that you slipped in
order to cover your assassination attempt.

“Watch it! You clumsy oaf !” She steps
back and brushes the rust stain from her suit
where you pushed her against the iron chute
door. She pulls a linen handkerchief from her
pocket, and works at the stain until there’s 
nothing left. For a moment, as she fusses with
her outfit, she seems like nothing more than
an uptight dowager. There’s nothing of the
conniving murderer you sensed before.

Maybe you were wrong about her. Maybe
she’s not really out to get you. Maybe she
doesn’t resent you for killing her pets.

But there’s no sense in being careless about
it.

You slowly back towards the exit from the
roof, still carrying the basket of dead pigeons.

“Wait— on second thought, there’s no use
wasting those.” She turns towards you, and you
once again sense a glint of something in her
eye. Is it malice? Resentment?

“I mean, they’re dead already. They may as
well be good to someone.” Is there a hidden
message in her words? Is she really talking
about you, rather than the birds?

You glance around the rooftop, but your
options are limited. Mrs. Kettlesworth stands
between you and the incinerator chute, and
the doorway to the stairs down is still most of
the way across the roof from you.

“You can take them downstairs, and tell
your sire what you’ve done.” Disapproval coats
her voice.

What you’ve done. What you’ve done.
You’ll have to pay for what you’ve done—that’s
what she really means.

“Perhaps he can find use for them in
feeding his flock.”

She’s not fooling you. You know what she
really means. Either she’s going to destroy you,
or she’s sending you to your doom. It’s as clear
as the moon in the sky above her: This will not
end well for you.

She begins slowly walking towards you, her
frown deepening as you frantically scour the
rooftop for an escape route.

You can see the rooftop of the next building
over. It would be a long leap, but it’s a story or
two lower, so maybe if you got a good run at
it, you might make it. On the other hand, you
must be ten stories up, and as far as you know,
none of your new vampiric powers include the
ability to fly.

If you don’t make it on the first leap, it’s a
long, long way down.

Mrs. Kettlesworth is walking towards
you. You’ve only got a second to make your
decision, and your options are limited.

To dart back into the building and try to
[[escape-&gt;Section 27]].
To [[take your chances-&gt;Section 39]] and try to leap to the
next building.</tw-passagedata><tw-passagedata pid="29" name="Section 27" tags="" position="1920.3333333333335,1195.8333333333335" size="100,100">Certain that a moment spent longer on
the rooftop will result in your death, you
fling the basket of dead birds towards Mrs.
Kettlesworth and dash for the door that led
you here. Pigeon carcasses flutter everywhere,
blanketing the rooftop in a gory snowstorm of
feathers and blood.

Although you’re certain you can feel her
right behind you the whole way, you manage
to sprint across the roof, throw open the door
and dart through it.

As the heavy metal door clangs shut
behind you, you hurl yourself down the stairs,
leaping down several stairs with each bound.
Your heart should be pounding; your breath
should be coming in ragged gasps. Instead,
the stairwell is silent, except for the sounds of
your escape: the slam of your weight against
the metal stairs each time you land, the echoes
of your hurried steps, and the squeal of your
shoes as you wheel your way round the corners
at each landing.

You’re sure the door shut before Mrs.
Kettlesworth could have slipped through. 

You don’t think she’s behind you.

You’re pretty sure, at least.

But there’s that feeling again, the one that
starts at the base of your spine and traces icy
fingertips up your back. You look behind you,
but there’s no one there.

No one you can see, anyway.

On the next landing, there’s a door leading
out to the seventh floor of the building. You
dart through it and slam the door shut behind
you, quickly enough that you’re certain no one
could have followed. You jimmy the locking
mechanism, forcing it closed and then bending
the cheap push-bar so that there’s no way
someone from either side will be able to pass
through it.

And then you wait.

No one tries to open the door.

You’re safe. At least for the moment.

You look around, and find yourself in
a long hallway. Other halls branch off at
right angles at either end. A series of doors, 
identified by discreet brass nameplates and
room numbers line the hall. Across from
the stairwell door, there’s a single elevator. A
small alcove with a hanging mirror provides
space for people to stand while waiting for the
elevator to arrive.

Is it a hotel? A professional building?
You’re not sure, but something about it doesn’t
feel right.

From around a corner, you hear voices.

“I know I heard something, Mikael,” one
says.

“No one’s supposed to be on this floor,” the
other replies. “Reverend Murik will have our
heads on a platter if someone’s messing around
up here.”

There’s the sound of a bullet being
chambered into a pistol before Mikael’s
companion responds.

“Not if we take care of it before it becomes
an issue…”

You look around for somewhere to hide,
but the hall is bare. You try several of the
doors, but they’re all locked.

The only possible concealment comes from
a shallow alcove near the elevators. If whoever
is looking for you walks past, you should be
fine, but if they look in, there’s nothing to hide
behind.

Or, you could try to explain yourself to the
two voices that are rapidly approaching your
current location.

To try to [[hide-&gt;Section 30]].
To [[give yourself up-&gt;Section 33]].</tw-passagedata><tw-passagedata pid="30" name="Section 39" tags="" position="1725.3333333333335,1355.8333333333335" size="100,100">You’re flying out into the open air between
one building and the next.

Your speed is amazing. The night wind
whips past you, pulling at your clothing,
tugging at your hair. You’re weightless, and you
wonder for a moment if this is what it feels
like to fly.

The next building’s rooftop looms, and
you’re sailing towards it. You stretch your arms
out, reaching for the relative safety it offers.

Then gravity grabs a hold of you, and you
begin to fall.

Time slows. You can see every detail of
the windows as you plummet past each floor.
Most of the rooms are empty, but from others
televisions flicker, holding the inhabitants
attentions mercifully away from you.

From one window, a young woman with
white hair and an angel’s face blows you a kiss
as you pass. You wish you had the presence of
mind to return the gesture.

The street rushes up at you. It’s an empty
street, but the parked cars grow larger by the
second, as you churn your limbs in a desperate
and hopeless effort to slow your fall. One
shoe comes off, and seems to defy gravity as it
dangles in the air beside you for what seems
like a lifetime.

You don’t die right away, when you hit
the pavement. You feel the impact, one leg
shattering as it hits first, then the other knee
and both arms. Your head hits last, but no
less hard. You can hear the shattering of your
skull from the inside as the speed and velocity
of your fall flatten it against the cool, rough
concrete.

You can’t move, can’t get up. Your eyes
are open, although you can’t see more than a
miniscule slice of the sidewalk directly in front
of your ruined face. It’s late. There’s no one on
the sidewalk. No one driving past. No one to
see you. No one to help you.

It hurts. But you’re not dead.

Not really dead.

Then footsteps draw near. 

“Tsk-tsk.” Even her disapproving noises
carry a slight air of the British Isles with them.

You can’t look up at her. Can’t respond.

A pair of brown alligator shoes step into
your field of vision, and Mrs. Kettlesworth
kneels down beside you.

You’re helpless.

She pulls out the soiled hankie, the one she
used before to remove the stain from her suit.
She uses it to roll you over, so that your blood
and brains and bile—whatever fluids those are
that you feel leaking out of you—don’t sully
her fingertips.

You can see her face now. There’s no
compassion there, no mercy. Only distain and
disapproval.

From an alligator bag that perfectly
matches her sensible footwear, she brings out
a piece of pine dowel. It’s been lacquered and
polished, and sharpened to a sharp, gleaming
point. The pointed end is shadowy, as if it had
been steeped in some dark liquid, soaked for
long enough that the color has leeched into
the wood grain itself.

She sighs. “I hate cleaning up the
Reverend’s messes.”

And with an expression of put-upon
martyrdom, she stabs the stake deeply into
your chest.

The shaft pierces your heart. Mrs.
Kettlesworth reaches down and closes your
eyelids, denying you even the power of sight.

It hurts. But you’re still not dead.

Not really.

You don’t die there on the street. And you
don’t die as she calls for the Reverend’s men to
come fetch you.

You don’t die when they take you down to
the basement, or when they leave you alone
with nothing but the rats scuttling over your
coffin for company.

You don’t die at all.

But you want to.

[[THE END-&gt;Intro]]</tw-passagedata><tw-passagedata pid="31" name="Section 30" tags="" position="1877.0000000000002,1352.5000000000002" size="100,100">Discretion is the better part of valor, and
you duck into the elevator alcove, hoping to
avoid detection.

There’s nothing here to hide behind, not
even an armchair or lamp, so you press your
back up against the wall and think “I’m
not here” thoughts with all your might.
You picture oatmeal. Rain. Glass windows.
Anything unnoticeable, and pray to whatever
gods might be listening that they stay in that
other hallway.

The voices come nearer.

“This way?” The first man seems skeptical.

“Yeah, I swear I heard something.” The
second is definitely suspicious.

The footsteps pause, and then turn and
begin approaching the stairwell you entered
through.

The men pause to rattle a few doorknobs,
just as you did a moment ago, but like you,
they find them all secure.

“Tight as a drum.” He sounds irritated at
his companion’s suspicions. “Let’s go back.
We’re not supposed to leave our station.”

That’s it. Go back. You squeeze your eyes
tight, straining with every fiber of your being
to mentally force the voices to turn around
and go back the way they came.

“Yeah, but I heard something. Come on.
I’m gonna check the door to the stairs.”

No! That’s right across from you. They’re
going to see you! You don’t want to look, but
you have to.

Two men, each the size of a football
linebacker, step into view. They’re casually
dressed in jeans and windbreaker jackets, but
everything about their stance screams “armed
guard”.

Their backs are turned towards you as they
examine the makeshift lock-job you did on
the door to the stairwell. Their attention isn’t
on you, but you’re stuck. There’s no way for
you to slip out of the alcove and down the hall
past them, or to signal the elevator without
drawing their attention. Between the two 
of them, their shoulders pretty much fill the
entire hallway. You can’t even see the stairwell
door past the mountains of muscle.

What isn’t blocked from view, however, is
the massive pistol one of the men is carrying.
You don’t know anything about firearms, but
if big means bad, the gun he’s toting has got to
be among the worst.

“You were right, Svara. Someone was here.”
The gun-wielder is pale and bald, and looks
like he could bench-press a small truck. He
rattles the door with the hand that isn’t toting
the pistol, but your slap-dash work holds
despite his obvious strength.

Maybe they’ll think you left through the
stairs. You don’t move a muscle.

“Whoever did this has got to be inside,”
Svara says. “They couldn’t do this from the
stairs.” He turns, looking down the hallway,
then back the way they came. Unlike Mikael,
he’s not carrying a gun. Instead, he’s got what
appears to be a foot-and-a-half long piece of
broom handle. The end has been sharpened to
a dagger-point.

You don’t know what he plans to do with
that, but you can’t imagine that it is healthy for
whoever’s on the receiving end.

You fear that you’re about to find out, firsthand.

Slowly, Svara turns to face you. His glance
flickers over the entirety of the ten-foot-square
alcove you’re standing in. His expression
doesn’t change.

Mikael looks as well, first into the alcove,
then back down the hallway in each direction.
Neither raises their weapon.

“The elevator?” Svara offers, frowning.

“We’d have heard it,” Mikael responds,
holstering his pistol in a side harness hidden
beneath his windbreaker. “Come on, let’s
report this to the Reverend and get back to
our station.”

The two men turn, and, as one, walk back
down the hallway.

They didn’t see you.

They looked right at you, both of them, and
didn’t so much as blink an eye.

Holy crap. They didn’t see you!

Elated by your apparent invisibility, you
creep out of the alcove and turn down the
hallway in the opposite direction the men had
taken. You’ve only gone a few steps when you
hear them stop and turn towards you.

“Hey!”

You’re not sure what you did differently,
but from the men’s reaction, your invisibility is
long gone. So is their patience. You see Mikael
reach for his pistol. Svara’s still got that huge
stake in his hand.

The hallway extends another 30 feet or
more before it takes a 90-degree corner that
might provide you some cover. There’s no way
you can make it to the corner before Mikael
can get his gun out.

You’ve really only got two options. You
can give up and try to talk your way out of the
situation before things get too bloody.

Or, you could just try to will yourself
invisible again and hope to hide as you did
before.

To [[talk your way-&gt;Section 33]] out of it.
To try to [[turn invisible-&gt;Section 36]] again.</tw-passagedata><tw-passagedata pid="32" name="Section 33" tags="" position="2112,1409.166666666667" size="100,100">You stop and raise your hands, in the
universal gesture of “Please, please, don’t
shoot me.” You’re not sure, but it’s possible
that you may have said those exact words as
well. There’s no shame in it; you’re not used to
people pointing guns at you.

To your surprise, the men appear to accept
your surrender. No bullets fly, but as Svara
comes up alongside of you, you can see that
he’s wielding the wooden weapon he was
carrying earlier.

You only have time to blurt out a single
sentence—“The Reverend brought me here”—
before he plunges the sharpened stake through
your ribcage and into your heart.

You freeze, from the shock of his attack,
and from the pain. You can’t move, but it
hurts, more than anything you can ever
imagine experiencing. Broken bones don’t
hurt this much. Childbirth can’t hurt this
much. Dying can’t. Nothing could.

You slump to the floor, immobilized
by Svara’s attack. Mikael breaks your fall, 
cushioning you from the worst of the drop,
but it doesn’t change the fact that you’ve still
got a foot-and-a-half of wood sticking out
from between your ribs.

Your eyes are open, but you can’t move a
muscle. You only see what’s happening directly
in front of you, which at the moment consists
of a fairly small expanse of office ceiling and
the two men arguing in the periphery of your
vision.

“Here with the Reverend! The old man’s
going to kill you for staking a guest!” Mikael
seems eager to pin the attack solely on his
companion, but Svara’s having none of it.

“Hey, I didn’t know! Could have been an
intruder. A Sabbat spy. An infiltrator. Almost
anything. I was just doing my job.” Svara
begins to pace, nervously, his path taking him
in and out of your limited field of vision.

“I’m calling the Reverend,” Mikael says,
and you hear the muted sound of a cell phone
being flicked open and the musical tones of
numbers being dialed.

Svara curses under his breath. “Just doing
my job, dammit. Don’t get paid enough for
this.”

After a moment, Mikael relays a brief
summary of what happened to the person
on the other end of the phone. Despite your
pain, you note that he’s carefully presenting
the facts in such a way that he and Svara are
the undeniable heroes of the situation. He
waits, while the person he called issues a series
of gruff commands, and then responds in an
obviously cowed tone.

“Yes, sir. Of course, sir. I understand,
sir.” He closes the cell phone, and Svara
immediately begins grilling him about the
conversation.

“What did he say? Is he pissed? Jeez, he’s
going to have my ass for this.” Svara continues
pacing.

Mikael’s tone is dour, and there’s fear in his
voice. You’re just not sure who he’s fearful for.
“He’s coming up.”

The two men wait in silence, and a few
moments later, the elevator chimes and then
slides open. Footsteps fall, solemn, succinct
footsteps making their way from the elevator
alcove down the hallway towards you.

Svara starts to explain, but then grunts and
stops rambling. From the sound of flesh on
flesh, you suspect it was a judicious application
of Mikael’s elbow to Svara’s ribs that silenced
him.

The newcomer’s footsteps come closer,
until a shadow falls across your field of vision.
Reverend Isaac Murik leans over you, moving
carefully around your fallen body until your
gaze and his are on a comfortable level.

“I wondered where you’d gotten to, my
childe,” he begins, as if he had found you
returning from a trip to the restroom, not
lying staked and immobile in an office hallway.

“You slipped away before I was able to
speak with you after your embrace. I regret I
was called away, but I am a man of extensive
responsibilities.” He checks his watch, and
frowns. “Even now, I fear my time is short.
Allow me to present my situation, albeit
briefly.”

You listen. You don’t have much choice.

“God has brought you here for a reason,”
the Reverend intones, as if beginning a
sermon. “Just as I have duties, so do you. Your 
choice is simply whether you will take up the
tasks at hand, or whether you will turn your
back upon them. The choice must be yours.”

He reaches down and grips the stake,
frowning at the wound it is protruding from.
“I regret to say, this is likely going to hurt quite
a bit.”

It does.

But after he’s pulled the stake out, you can
move once more. The pain begins to recede,
and as you concentrate on how much you
want the damage to be healed and the wound
to stop hurting, the pain slowly begins to fade.

He reaches down to help you up, handing
the bloodied stake back to Svara without
looking at the guardsman.

“So, I’m afraid I must ask for your answer,
my childe. Will you take up the duties you
were created to fulfill?”

To [[agree-&gt;Section 12]] to take up your duties.
To [[refuse-&gt;Section 15]] the priest and try to ask more
questions about your situation.</tw-passagedata><tw-passagedata pid="33" name="Section 36" tags="" position="1877.0000000000002,1502.5000000000002" size="100,100">It worked once, and so you try to replicate
your earlier performance. Screwing your
eyes tightly shut, you think of rain and
accountants, of thin, wafty banks of fog and
any other thing that might be likely to ignored
or overlooked.

“Stop or I’ll shoot!” There’s not a second
between the time that Mikael barks his
command and the time the first bullet
explodes from his gun. The round whizzes
past your ear, close enough for you to hear the
pocket of air rush back in its wake.

You drop to the floor, huddling there, still
thinking your invisible thoughts.

Please work. Please work. Please work.

It doesn’t work.

Mikael grabs you and holds you down with
a grip like steel. You struggle, but to no avail,
as Svara approaches with his wooden weapon
in hand.

You squeeze your eyes shut, frantically
trying to disappear again.

But, apparently your trick only works once,
or you’re just not very good at it yet. You
don’t know the whys and wherefores, but it’s
obvious that the Reverend’s security force have
had no trouble seeing you this time.

With one of the goons on each side of you,
they haul you down the hallway so quickly
that your feet barely touch the floor.

They bind your wrists and ankles, hogtying
them behind you until you’re trussed up like
a Sunday chicken. Some sort of sweaty rag is
stuffed in your mouth, deeply enough that
you’re thankful you no longer need to breathe.

You’re flung into a small room, no bigger
than a closet, and left there. From the other
side of the locked door, you can hear Mikael
and Svara arguing about what to do with you.

“The Reverend is going to be pissed off
that we let someone through security,” Svara
posits. “It could be our heads on the line here,
and I don’t think we’re going to like the boss’s
retirement package.”

“We’ve got to get rid of the problem before
the Reverend finds out.” You don’t like the 
finality in Mikael’s voice, and you like it even
less when Svara grunts agreement and the two
men make their way back to your makeshift
prison cell.

They don’t bother to untie you. Mikael
picks you up by your bindings as if you
weighed nothing, carting you through a series
of hallways. Svara walks ahead of you, and
pauses in front of one of the rooms you’d tried
to escape into. He slides an electric key-card
through the reader and opens the door.

Both men move through the room within
and out onto the metal balcony without
pausing.

The ties holding you are cut, allowing you
to stand upright, but before you can get your
balance, Mikael grabs you by the ankle and
turns you upside down. Your world spins, and
you buck and arch like a fish on a line, trying
to grab hold of him (or anything else). His
reach is just too broad, however, and you can
do nothing but struggle in vain as he dangles
you out over the balcony.

You struggle to beg for your life through
the balled up gag of cloth. You want to scream 
and cry and plead for them to rethink their
plan. To check with the Reverend. To at least
find out who you are.

What comes out is unintelligible around
your gag. But it doesn’t stop you from trying.

Mikael swings you like a human pendulum,
and you see the safety of the balcony arc
towards you and then away. Like a child
pumping a swing, your momentum moves
you faster and harder with each repetition.
Then, suddenly, he lets go. In an inhumanly
cruel twist of irony, your gag flies out of your
mouth, leaving you free to scream, now that
it’s too late.

[[Continue-&gt;Section 39]].</tw-passagedata><tw-passagedata pid="34" name="Section 7" tags="" position="2513.6666666666665,984.1666666666666" size="100,100">You can’t—don’t want to look away. When
your arm bushes against Nathaniel as you cross
the threshold, there is an inexplicable stirring
of lust, causing your heart to pound. The
sound is so loud to your ears, you are certain
he must hear it as well.

Taking off your coat, while Nathaniel does
the same, you comment, “I don’t think I have
been in a place this lovely in a long time.”

He does not reply, but the smile on your
companion’s face is echoed in his eyes this
time. He takes the compliment with pleasure
while pushing apart a pair of sliding doors.
“My refuge,” he says simply.

Before you is another feast for the eyes:
bookcases filled with texts and oddities, one lit
marble hearth behind an ornate mesh screen,
a sidebar stocked with decanters and various
drinking implements and a variety of animal
heads decorating the walls. You are drawn
inside by the desire to see more and when
you gesture with a tilt of your head to ask
permission, he nods silently.

Your fingers run along the leather spines of
one row of books, silently reading the titles—
some in French and Italian—while behind you
the room’s doors slide shut with a soft click.

“I have read some of your work, you know.”
Suddenly, Nathaniel is standing behind you,
“There is artistry in your writing. You have
such insight into how people think. What
motivates them. It’s a rare talent. Too rare.”
His voice sounds strange to your ears. The only
word that seems to fit is… covetous. “It can’t be
allowed to go to waste.”

“Thanks,” you reply, shivering the sudden
desire to lean back against him, wondering
what it would feel like to press your back to his
chest.

“May I offer you a drink?” he murmurs. He
remains equally still, but closer than a shadow.

Your head turns slightly trying to make eye
contact over your left shoulder. “Whatever
you’re having,” you quip.

“Indeed?” he purrs.

You feel a light pressure against your side
and look down to watch Nathaniel’s right 
hand snaking around your waist, fingers
tracing a line up the middle of your torso. He
closes the space between you, but there is no
instant warmth like you’d expect, just a solid
coolness. It reminds you of leaning against a
marble pillar. His left hand slides up your arm,
before coming to rest on your shoulder lightly.

Nathaniel whispers. “I was hoping you’d
say that.” His tongue traces the shape of your
ear and starts to trail down the side of your
neck. Your weight shifts from one foot to the
other as you prepare to turn around, wanting
to explore the taste of his mouth. Giving in to
the moment, no matter how out of character
it may be.

The pain of his bite startles you at first,
feeling his teeth—no, his fangs—sink into
your skin. You struggle to break free, only to
find that Nathaniel holds you in a vise-like
grip. Then, the panic gives way to a growing
passion. His lips remain, teasing at your neck.
A sudden, undeniable arousal moves through
your body like a fever. Nothing in your
memory compares with this—no lovers, no
acts of passion measure to a fraction of what
you feel, trapped in his arms. You shudder
with release, only to feel the unexpected
warmth of his kiss—surely his lips were cold
on your skin initially—stir your body again. 

He’s drinking your blood, you realize
in the dim recesses of your mind. And you
don’t mind. More than that, you want him to
continue. Nathaniel’s fangs sink in deeper and
you moan, becoming limp in his embrace. No
resistance, just pleasure.

Your pulse becomes frantic, pushing blood
through your body, and then slows while
Nathaniel drinks. You feel light-headed, vision
starting to blur. The flames from the fireplace
transform to a dull orange glow, seen through
half-closed eyes. You hear the pounding of
your heart again - loud in your ears, but so
very slow. This is what it means to be drained.
To die because there is nothing left for the
heart to use.

Nathaniel’s head lifts, your blood dripping
from the corners of his mouth. His expression
is one of satiation. His tongue sweeps over his
fangs once, as if savoring that last taste of you.

He sinks to the floor, ignoring the nearby
furniture, your body like a rag-doll in his arms.
Your breath comes in shallow, uneven gasps.
Dying. He tsks, “Know you your Shakespeare?
‘And he will make the face of Heaven so fine,
that all the world will be in love with night.’” 

With those words, Nathaniel rips open his
wrist with his fangs and presses the bleeding
wound to your open mouth. The tang on your
tongue hits like a small electrical shock. You
have never tasted anything so rich, so good.
You stir, limp arms lifting from the ground so
your hands can grasp his forearm. You lap at
the blood hungrily.

He whispers as the fingers of his free hand
stroke the top of your head, “My childe, you
will love the night. I know from your works,
this was destined—already a part of you.”

Long seconds pass, while you drink before
Nathaniel wrenches his arm away from your
mouth. You howl in frustration. In that instant
there is clarity as the revelation sinks in.
Nathaniel is a vampire.

You are a vampire.

And you are starving.

To [[attack Nathaniel-&gt;Section 10]].
To [[flee the room-&gt;Section 16]], horrified by the truth.</tw-passagedata><tw-passagedata pid="35" name="Section 22" tags="" position="2663.6666666666665,984.1666666666666" size="100,100">Double-click this passage to edit it.</tw-passagedata><tw-passagedata pid="36" name="Section 10" tags="" position="2438.6666666666665,1134.1666666666665" size="100,100">Nathaniel stands, one hand pressed over
the wound on his other forearm. You inhale
and the scent of his blood is irresistible.
Like a starving animal you leap up at him,
desperate for more. Your gaze fixes on the
dark red smears marring the perfection of his
translucent skin.

Your tongue draws across your teeth
remembering the taste, and you become aware
of your fangs for the first time. Unfortunately,
that second of distraction gives Nathaniel the
opportunity to backhand you with a blow
that sends you hurling against one of the tall
bookcases. The impact makes a loud clatter, as
the books fall in sections around your body.

Nathaniel glares, his gaze never breaking
contact. “Do not try that again, my childe. I
am older and far more powerful than you.”

You growl, crouching on your knees,
one hand on the ground for balance as you
gingerly touch the bite marks along your neck
then the fangs in your mouth. For a moment
despair threatens to overwhelm you.

“Other sires would not be so generous with
their own vitae. They will let their progeny
take only what is needed in the embrace and
no more. On the other hand, I prefer to deal
with a reasoning being.”

“Why?” you shout, filling the room with
your cry.

“To settle a debt. To take my revenge. To
replace what was lost.” Nathaniel’s eyes remain
cold. “Your embrace will fulfill all those needs.
And I think you are worthy.”

He continues. “The very fact you seem to
realize what has just transpired here, the fact
you have some control over your Beast even
now is further proof. You have not asked, but
you know what I am and now what you are.”

You turn your head to the side, unwilling to
look at his face.

“I know you are hungry.”

The mention of food makes you shudder,
reminds you of the clawing hunger inside and
your very fragile self-control. You can still taste
the ghost of Nathaniel’s blood on your tongue
and down the back of your throat.

He takes a step towards you, careful as any
hunter trying not to spook their prey. “My
childer take names from Shakespeare, whom
I adore. I have given some thought to it and
because of the circumstances involved I think
you will be called Morgan.” The last words rise
in pitch, almost but not quite a question.

“I don’t care what you call me,” you exhale
bitterly. “You have killed me.”

“Not so, my dear,” Nathaniel counters, “I
have opened up a new world for you. I am
your sire, your teacher. One day, Morgan, you
will not even remember what it is to be mortal.
But first, you must dine.”

As before, he reaches out a hand in
invitation, an offer to help you rise from your
still-crouching position. “I have food waiting
for you. A small buffet for your selection.”

You look at his hand, his face and back
down again, trying to make a rational decision,
fighting to control the blood hunger that
seems to build with each passing moment.

To [[accept-&gt;Section 13]] Nathaniel’s offer.
To [[reject-&gt;Section 16]] Nathaniel’s offer and flee the room.</tw-passagedata><tw-passagedata pid="37" name="Section 16" tags="" position="2588.6666666666665,1134.1666666666665" size="100,100">Food. All you can think about is food.
Blood. There is nothing to eat… No. Nothing
to drink here. You have to get out. Get away
and think about this. Away from him. From
the man who did this do you.

With a guttural growl, you backpedal as
you stand up, putting space between you and

Nathaniel. You start to circle the perimeter of
the room, moving to the doors.
Nathaniel pivots, mirroring your moves.
“My childe, you do not want to do this.”

“Back up!” you hiss and grab at one of the
glass decanters on the sidecar.

Bringing it down the edge of the furniture
with a crack, shards spray out, covering the
floor and chairs, embedding in your clothes
and cutting lines on your skin. In your hand,
you hold the remains of the bottleneck, a
weapon brandished to force Nathaniel to keep
his distance.

With your free hand, you push open one
sliding door and step into the entryway with
a quick glance behind to make sure no one
lingers there to trap you. Nathaniel remains in
a fixed spot, his hands upraised to show they 
are empty as he cajoles, “You can’t go outside
alone. You’d be in danger. Please don’t do this.
Trust me.”

You grab at a drapery tie and use that to
hold the sliding doors shut, trapping him
inside while you escape. Then, you run out
the front door into the night. You scoff at his
warning; how could things possibly become
any worse?

When you reach the street, you look over
your shoulder and see Nathaniel’s silhouette
in the window, watching you from the house,
unmoving.

Distraction comes in the form of laughter.
In the dark, some distance away you can
hear it: the sound of a woman’s high-pitched
laughter. It bears the promise of food—and
you are so hungry.

After running a few blocks in the direction
of the noise, you spot her leaning against a
streetlamp, talking into her cellphone, while
rummaging in her purse. Stupidly, she’s not
paying attention to her surroundings. Because
her blond hair is in a high ponytail and she
wears a low-cut top you can see the woman’s
neck clearly. You can almost feel the pulse of
her blood calling to you.

There is an alley entrance not ten feet from
where she is standing. Easy enough to pull
this woman out of the light and take what you
need.

Just before you commit to the attack, a
door opens, casting light onto the sidewalk,
not far from where you stand.

Jazz music pours forth, a slow, seductive
melody, and there is the clink of glasses and
the sound of more voices. You tilt your head
toward the sky, inhaling. There is blood on
the air, a good deal of it, coming from this
establishment. It’s at this point you notice the
sign above the door, “The Gilded Cage.”

“Leave it open, Steven,” says a woman’s
voice. “The night air is refreshing and you
never know what surprises might come
through the door.”

You look away from the jazz club, across the
street, noticing the blond woman has finished
her call and is starting to walk away, closer to
the alley.

To [[go after the blond woman-&gt;Section 25]].
To [[explore the blood-scent-&gt;Section 28]] in the Gilded
Cage.</tw-passagedata><tw-passagedata pid="38" name="Section 13" tags="" position="2438.6666666666665,1284.1666666666665" size="100,100">Waving off his offer of help, you stand up.
“I can barely think for the hunger.”

“I know.” He sounds almost sympathetic.
“Everyone who is Embraced has experienced
this. And you will find that this need will be
the base reason for everything you do, but you
can strive to control it.”

You dust off your clothing, and wipe
at your neck with water from one of the
decanters, hands shaking slightly. “Embraced?”

“It’s what we call the act of changing a
mortal to Kindred. What you call a vampire,”
he answers. “That is your first lesson. You are
Kindred. You are also of Clan Toreador. We
are the artists, the shining lights of grace and
civility among our kind. Remember that.”

Nodding absentmindedly, an idea occurs
to you and you start to uncork the various
bottles on the side bar, but the smell of alcohol
only seems to assault your nose, rather than
entice as it once did. “Don’t you keep blood in
bottles, like in the movies?” You turn, looking
at Nathaniel again. At your sire.

A grimace shadows Nathaniel’s face and
then is gone. “No. I prefer fresh. And if you are
ever offered such, do not take it.” He gestures
with a pointed finger for emphasis. “Not
unless you watch every step of the process. Try
never to drink blood if you are not certain of
the source. There will be times you will have
no choice—but hopefully they will be few and
far between.”

Again, you nod to confirm you have heard
his words but the conversation starts to
wear on your patience and self-control, “You
mentioned food. Where?”

Nathaniel offers the first smile since he
attacked you. “Only two blocks from here. A
friend has offered me hospitality tonight. I
intend for us to both partake.”

As you both head out of the house,
putting coats back on, your sire comments.
“Take note—your body will adapt to room
temperature unless you spend blood to alter
that.” He locks the front door. “That lesson
will keep for another night. But that does
mean you must observe the weather and what
mortals are wearing if you wish to blend in.”

Standing on the stairs you look out at the
street and notice something odd. “Everything
is brighter somehow.”

“Ah,” murmurs Nathaniel. “It seems we get
a hint of the gifts of the blood you will develop
first.”

As you head down the steps, this time
ahead of him, you can feel your sire’s gaze
resting on your body. “There will be plenty of
time for that as well.” His pace quickens, to
stride at your side. “I am so pleased. I think
you will be a credit to me and to our clan!”

[[Continue-&gt;Section 19]]</tw-passagedata><tw-passagedata pid="39" name="Section 19" tags="" position="2438.6666666666665,1434.1666666666665" size="100,100">Nathaniel gestures with a nod of his head,
“I am taking you to the Gilded Cage. The
owner is Victoria Ash and it is important you
make a good impression on her. She is…” He
pauses in thought, looking for the right words,
“…the social arbiter of our society. Something
of a records keeper, combined with gossip
columnist. The formal term we use is Harpy.
And she is powerful.”

A young couple holding hands comes out
of the dark, drawing near. They pass and your
head turns, sighting on them. Your hands
shake as you clench them into tight fists. The
urge to feed is so strong.

As if he can sense how close you are to
spinning about and attacking, Nathaniel grabs
your upper arm in his hand, a vise-like grasp.
“We are almost there. Patience. You will be
able to sate your hunger in safety.”

You nod, closing your eyes and slowly
opening your hands. You start to inhale, and
stop, startled by the realization that you have
not been breathing until this point—you took 
in air only to speak, to question, not because
you had the need. Your right hand lifts over
your heart. Silence.

“Oh my god,” you exhale in quiet wonder.

Nathaniel looks at you, the steel blue
eyes narrow, “Come. You are going to draw
unwanted attention.” He drags you away
with a thoughtful, frowning expression
on his face. Minutes later you stop, and he
knocks discreetly on door beneath a recessed
neon sign. “Steven, it’s Nathaniel. Victoria is
expecting me.”

The door swings outward, and for the
second time tonight you enter a strange place
you have never seen nor heard of before. In
this case, the atmosphere is of a hole-in-thewall
jazz club; empty tables, a bar running the
length of one wall, with a matching mirror
behind it. In a far corner an elevated stage with
permanent piano and space for a signer and
one or two instruments.

The burly man who you assume works as
the club’s bouncer greets Nathaniel. He gives 
you a once-over as your sire explains, “This
is my childe, Morgan. I have come to make
introductions to the harpy.”

Steven nods. “Unreleased, I assume?” His
bass voice is as rough as his battle-scarred face.

Nathaniel nods.

Your nose is assaulted by the smell of old
blood that permeates the room, layered with
something fresh and ripe. Your patience starts
to shred. “Where?” you hiss in Nathaniel’s ear,
demanding. “I need it. Now.”

Steven’s right eyebrow arches up, giving a
quizzical expression to his face. “Unreleased
and brand new. Interesting.” He calls out over
his shoulder. “Victoria, the Primogen of Clan
Toreador is paying you a visit.”

From behind a round table in a shadowfilled
alcove, a woman leans forward, her face
and upper torso caressed by indirect light. She
has been there all the while, secluded and still.
You had no idea she was there.

Even in your single-minded focus on
finding sustenance, you are momentarily
stunned by the sheer physical perfection, the
ideal that she embodies. Victoria is a platinumblonde
like the classical screen sirens of film
noir. Her elaborate 1940s hairstyle is pulled
away from her face by a vintage set of sapphirestudded
pins. She wears an electric blue silk
gown that clings to every curve and radiates
that icy sex appeal Alfred Hitchcock only
dreamed of capturing in his movies.

She looks first at Nathaniel, takes a drag
from her cigarette set in an elaborate holder
before turning her attention to you.

“This is Morgan,” Nathaniel gestures in
introduction. “We’ve come to take advantage
of your generous offer of hospitality.” He
smiles and places a kiss on her uplifted hand—
the custom of older times, but something that
seems so natural to them both.

A soft “ah” passes from her lips and her eyes
twinkle with amusement. She addresses your
sire, “I expect you need to make a phone call?”

“Actually, I think I had better handle this in
person. May I leave Morgan here?&quot;

“Of course.”

With a quick shake of his head, Nathaniel
tells you to stay while he heads to the back of
the club, passing out of site through a beadcurtained
doorway.

Victoria tucks a loose curl behind one ear
as she fixes her grey-green eyes on yours. Her
tone of voice is business-like. “For Nathaniel’s
progeny I extend consideration. Tonight is my
death-day gift to you. For the future…” She
shrugs, “I am sure you will find your footing in
no time, but if you need a back-up, there will
be expectations. And exchange of favors.”

You nod, not sure what the woman means,
but remembering Nathaniel’s words of
caution. This woman is a powerful vampire.
How to proceed?

To [[tell Victoria-&gt;Section 46]] you need to feed.
To [[ask Victoria-&gt;Section 48]] to explain about ‘favors’.</tw-passagedata><tw-passagedata pid="40" name="Section 46" tags="" position="2365.333333333333,1584.1666666666665" size="100,100">Nathaniel would not have brought you
here, left you with this woman if he didn’t
trust her. But the thought of food is becoming
all consuming. You look toward the exit
Nathaniel used, then back at Victoria, trying
to think of the most polite way to proceed.

“I’d like to thank you for your hospitality
as well, Miss Victoria. Perhaps you would…
hrm… favor me with more conversation after
dinner?”

She laughs softly, leaning back in her chair.
“Excellent manners, even when under duress.
Do you know what Hospitality is, young
vampire?”

“Hold that thought,” she continues
abruptly before you can reply. Then Victoria
looks beyond you and asks the bouncer,
“Steven, will you invite Violet to join us
please?”

She gestures to the empty chair across the
table. “Please sit. You will be provided for. And
while we wait, I will explain.”

“Thank you,” you murmur before taking the
indicated seat. “This has been a very difficult
evening for me.”

“Of course it has,” Victoria replies in a
soothing voice. “And if I am correct, you come
into our world as a true neonate. You have
not been a ghoul. You did not know we exist.
This is as it should be. It means in our city the
Masquerade has been preserved.”

She taps the mouthpiece of her cigarette
holder delicately against her perfectly white
teeth. “This is the first and most important
rule. We do not let mortals know we exist.”

She inhales then continues, “Never forget that.
You place everyone at risk should any hint of
our existence reach the wrong places. We will
kill our own to protect our safety. You will be
expected to do that as well if told.”

You inhale reflexively, fascinated by
Victoria’s words, by her smallest gestures. Each
move is almost a dance, so graceful. Although
she is not a type you have ever been attracted
to before, you find yourself wondering if this
might be what people mean by love at first
sight.

Pleased by your attention, Victoria smiles
and leans forward again, resting her glovecovered
elbows on the surface of the table. You
mirror her motions, content to stare into her
grey-green eyes for as long as she will let you.

A third party joins your table, sitting at
your right hand. A wine glass is placed on a
golden charger in between you and the new
arrival. You are vaguely aware of this, but
everything else seems unimportant, so long
as you can view Victoria. Even the gnawing
hunger in your stomach abates while your eyes
are captured by such beauty.

The spell of fascination breaks only
because she laughs again, clearly delighted,
before shifting her attention to welcome
the new arrival. “Oh there is no doubt you
are Toreador, definitely subject to our clan
weakness. I am going to enjoy having you
around to shake up the status quo, Morgan.”

You straighten up, with a slight shake of
your head. It feels like you were under sedation
and are waking up again.

Dressed all in shades of purple with a Bettie
Page-styled haircut, a girl who must be Violet 
murmurs a soft hello. She looks at Victoria,
arching her right eyebrow in question. Your
hostess smiles and lowers her eyelids once in
confirmation.

Violet holds up her left arm over the wine
glass and cuts a line across her wrist with her
other hand, using a delicate knife with a short,
two-inch blade.

Nothing else is as important to you in the
whole world at that instant than watching the
slow stream of her blood into the glass. You
note the scar marks on Violet’s wrist, old and
new—indicating she has done this before. You
can barely restrain yourself from grabbing the
glass. Your fingernails dig painfully into the
palms of your hands, while you force yourself
to wait, to be polite and civilized while in the
presence of Victoria.

When the contents of the glass equal a
standard pour of red wine, Victoria whispers,
“Violet dear…”

The silent woman pulls her wrist away and
twists in her chair, presenting her extended
arm to the blond goddess. Victoria’s tongue
laps gently at the wound, while she closes her
eyes for an instant. Then your hostess gestures
to the glass. “Be my guest.”

You remember to salute Victoria with a
toast of the glass before proceeding to drain
it dry. Manners can carry you only so far, but
at last the desperate urges are contained and
you feel less like a caged animal and more like
rational personal again.

Just as quietly as she arrived, Violet leaves
the table and disappears through the same
beaded doorway your sire used. You glance
about and realize that the bouncer has not
returned. The place is empty, except for the
two of you. Nathaniel should have been back
by now. That realization makes you vaguely
uncomfortable.

“I was going to explain some more to you, if
memory serves?” Victoria tilts her head to one
side, the smile back on her face though it does
not reach her eyes.

To [[ask Victoria to continue talking-&gt;Section 49]].
To [[go find Nathaniel-&gt;Section 50]].</tw-passagedata><tw-passagedata pid="41" name="Section 48" tags="" position="2513.6666666666665,1584.1666666666665" size="100,100">“Nathaniel mentioned debts and favors
when he changed me and you have mentioned
it now. This is important, isn’t it?”

Victoria smiles in approval. “Yes. You have
good instincts. Boons are the currency of our
society. While money is nice, given that you
live for decades and assuming you are smart
enough to do so, you will have basic needs
covered, but power comes from whom you
know, who you owe and who owes you.”

“Then, if I understand correctly, he’s
placing himself in debt to you on my behalf.”

“Yes.” She looks at you thoughtfully,
then continues, “This falls under the Fourth
Tradition, also called the Accounting. You
are a childe. Nathaniel is responsible for
everything you do. If you break our laws, he
can be made to pay.”

Tilting your head back and running your
tongue over your fangs, you take a moment to
think, before asking. “So how many of these
traditions are there?”

“Six. They are the basis of our law. Being
here, in my club, you are in my Domain. That
is the second. We must have the area and
mortals to sustain us so we do not reveal our
existence. Tonight you feed from my herd. In
time you will cultivate your own.”

At the mention of feeding, your
body stiffens in reaction. Victoria laughs
sympathetically. “Violet, dear…” she calls
towards the back of the club.

The beaded curtain over the doorway
jingles and a petite woman dressed only in
shades of purple, with a Bettie Page-styled
haircut, appears. She walks to your side and
looks at Victoria, arching her right eyebrow in
question. Your hostess smiles and lowers her
eyelids once in confirmation.

Violet holds out her left arm. You notice
the inside wrist is covered with scar-tissue.
Using a knife with her right hand, she opens a
cuts a new line and offers it up to you.

You glance at your hostess. Victoria
murmurs, “Please, be my guest.”

Her permission given, you drink directly
from the black-haired girl, enough to take the
edge off before you stop of your own accord. 

Violet sways slightly on her feet, eyes
heavily-lidded and complexion several shades
paler. You murmur a thank you as she slowly
makes her way towards the back of the club.

“Won’t you sit down?” Victoria points to
the empty chair across the table from where
she sits.

“May I ask a question?”

“Of course.”

“You said something about being a
Toreador and having the clan’s weakness?”

“Ah.” Victoria absent-mindedly twirls a
lock of hair hanging over her heart. “You will
not learn everything in one night, but you
should start somewhere.

“Toreador is a bloodline of vampires dating
back through eras of time. We are the lovers of
beauty, creators of art and muses that inspire
art. We are the most perfect, most lovely of
Kindred. We are the arbiters of taste. We
influence mortal fashion through our servants
and tools. We maintain the structure of
society.”

Victoria inhales and continues, “There
are other bloodlines in the night. Their
representatives are in this city as well—from
brutal, vicious Kindred who prefer nothing
more than to fight, to the sewer dwellers who
would make the Hunchback of Notre Dame
look like an Adonis. There are…”

The bouncer, Steven, interrupts as he
appears at Victoria’s side, holding out a cell
phone. “It’s Prince Morganti.”

Victoria looks surprised, but immediately
takes the call. She stands up, and walks
away while saying, “Good evening, my
Prince.” Once she reaches the far end of the
club, Victoria paces back and forth. The
conversation is one-sided as she answers only
with one word replies.

When she is done, Victoria walks up to
your side. She smiles down at you, brushing
the tips of her fingers along the line of your
jaw. “Nathaniel sends his love.”

“What does that mean?”

“He won’t be coming back tonight and
I have agreed to keep you with me.” She
tucks a loose strand of hair behind her ear. 

“Remember when I mentioned it’s all about
debts and favors? Other Kindred have called
in their debts and their negotiated payment
requires Nathaniel to be out of commission
for some time. As his unreleased child, you
have no protection. But, I have a haven—a
safe place—nearby. You will stay there until he
comes for you.”

As Victoria explains, you start to relax.
When Steven stakes you, pinning your torso to
the seatback, it comes as a complete surprise.

“Nathaniel will be unstaked in about ten
years, assuming the Prince doesn’t change his
mind. And I promise Morgan that the day
he is walking among us again, the first thing I
will do is release you to your sire’s care. Until
then, you will be perfectly safe.” You can
feel Victoria press her lips in a kiss on your
forehead. “I promise.”

[[THE END-&gt;Intro]]</tw-passagedata><tw-passagedata pid="42" name="Section 49" tags="" position="2290.333333333333,1734.1666666666665" size="100,100">“Nathaniel mentioned debts and favors
when he changed me and you have mentioned
it now. This is important isn’t it?”

“Yes. You have good instincts.” She leans
back, taking refuge in the shadows. “Boons
are the currency of our society. You will come
to see that power among the Kindred derives
from whom you know, who you owe and who
owes you.”

“If I understand correctly, my sire is placing
himself in debt to you on my behalf.”

“Yes.” Victoria exhales a lazy ring of
smoke, “Nathaniel will be held responsible for
everything you do. If you break our laws, the
Prince can penalize him—and likely will. He is
unyielding when it comes to the Traditions of
the Camarilla.”

“And if I wanted to start acquiring boons
myself ?”

Victoria’s mouth curls up in a slow smile.
“By rights, they would default to your sire
until you are released—acknowledged by the 
Prince as an independent vampire. That is…”
she taps her cigarette holder, allowing the ash
to drift to the floor, “if he knows about them.”

You ponder her reply while carefully
crafting your next question. “What about
committing to owe someone in the future? A
debt that takes effect when I am ‘released’?”

“Did you have something specific in mind,
Morgan?”

“I want to learn. I don’t want to be reliant
entirely on Nathaniel. I want to know the
things he won’t tell me. I want to live, and
knowledge is power.” You stare intently into
Victoria’s eyes. “If you will agree to help me,
then I would owe a future boon to you.”

One finger glides back and forth over
her lower lip as Victoria stares back at you,
considering. After a moment she says, “I will
require more than that. I like to anticipate
when there are shifts in power. I offer this—I
will educate you in how to survive and in turn
you will keep me apprised of any threats to my
position as Harpy from your sire or any others
you encounter in our city. Agreed?” 

“I don’t know what a Harpy is or does.” you
counter. “I would not know what would be a
threat to you.”

Her hand comes to rest on the tabletop as
the woman frames her reply. “The Harpy is the
final authority on who owes whom and what
standing an individual has in our society. The
best-connected Harpies can ruin their enemies
with a well-placed word. Reputations are made
and destroyed when a Harpy exercises their
influence. To be a harpy is to have power in
the Camarilla and I like power.” Victoria tilts
her head to one side, her smoky eyes making a
study of your face.

“So, if I hear someone plotting against you
or slandering you, then I would contact you
and simply tell you what I heard?”

She pauses, as if considering your words
before nodding in confirmation.

With a slight shrug of your shoulders, you
say, “Agreed.”

Victoria calls out, “Stephen, bring me the
book.”

The bouncer hands over an aged brown
leather journal, several inches thick, with two
buckled bands wrapped around its width,
holding the book closed. Victoria flips it open
and finds a blank page well towards the back.
At the top she writes “Morgan, Toreador,
Childe of Nathaniel Le Roi.”

When she has included the full details of
your verbal agreement, Victoria signs and
dates it before turning the book around and
offering you her pin.

You read the wording carefully and copy
her actions. When, out of curiosity, you finger
the edges of the book and flip back several
pages, Victoria quickly slams the cover shut on
your hand, leaning far across the table, so her
face is inches from your own.

You pull back, startled.

“No one will ever see your debts and boons,
so long as I am Harpy. Nor will you view that
of others trusted to my care.”

It is at this moment you see the killer
behind her elegant façade. She is as much a
monster as you are. A far older and betterpracticed
monster.

“Don’t be disturbed, Morgan. I do look
after my allies and informers. It’s to my benefit.
I value long-term relationships.”

Worried, you think back on what you have
agreed to. You have missed something, made a
mistake.

You slump in your chair, head in your
hands.

You forgot to specify a time limit or end
to this agreement. From the look in her eyes,
Victoria is not the type to renegotiate.

“Consider this your first lesson in Kindred
politics, Morgan.” she coos with cigarette
holder posed in her upturned hand.

[[THE END-&gt;Intro]]</tw-passagedata><tw-passagedata pid="43" name="Section 50" tags="" position="2426.9999999999995,1734.1666666666665" size="100,100">“Victoria, are you receiving?”

A new voice heralds a new arrival coming
through the main entrance. He passes by
the bouncer with a cordial bob of his head,
already confident of his reception. The man
wears a priest’s collar, a carved wooden crucifix
hanging from a chain about his neck and
carries a bible in his left hand. He bears a
striking resemblance to Richard Chamberlain
in The Thorn Birds mini-series. More, than
that, you feel as if you have seen him recently;
his face is so familiar.

You flinch, but feel no different in the
presence of the religious symbols.

“Fewer of us find garlic, crosses and the
like to be an issue than you might think.”
Victoria whispers before extending a welcome
to the man. “Reverend Murik, why am I not
surprised?”

“Dear lady,” he murmurs while kissing the
back of her offered hand. “I heard just now
about the newest member of our flock and
wanted to introduce myself.” 

The priest turns to you, with a pleasant
expression on his face, “So, Nathaniel has
selected Cymbeline for you? I think he must
have decided to go in reverse order.” He
thumps the flat of his hand on the bible, before
running one finger along the inside of his
collar as if it was too tight to be comfortable.
“Never mind. Never mind.” He mutters to
himself as you try not to stare in confusion.

“So, Morgan. Are you adjusting to um,
well, everything? I hope he… um…that is to
say, Nathaniel did handle it properly yes? You
look quite as I imagined, hoped you would.
Victoria, don’t you think Morgan looks just
as a Kindred should? I mean pallor…?” His
questions spill forth in a lower register of
voice, with a different accent and tempo of
speech. The priest tilts his head to one side and
says as he leans forward, “I would have let you
find your own name, you know.”

His questions rattle about in your head and
you inhale before selectively answering him.
“I suppose I am adjusting, but I will admit
to being overwhelmed.” You decide to play it
cautiously, and tack on a polite “thank you”
while the Reverend looks at you expectantly.

“Just so. Just so.” He looks at Victoria. “I
am going to invite young Morgan to join me
on my rounds. Hrm….You will let Nathaniel
know when he comes back, won’t you. I
suspect he will want to speak with me. He may
be looking for me even now.”

She exhales a puff of smoke. “I could never
say no to you, Reverend.” Laying her hand
against the table’s edge, Victoria asks him, “I
assume you’ve seen the Prince?”

“I made a point of speaking to him as soon
as I heard the news. You can update your
book accordingly. I think he was quite glad to
remove that sword of Damocles.”

You are unable to follow their train of
thought and lean back in your chair, as they
converse for a few moments in the same vein.
Then, Victoria rises and moves around the
table. “I have work to do upstairs. Recordkeeping.
Morgan, I have enjoyed your visit. Go
with the Reverend here and I will make sure
to tell Nathaniel you are with him when he
returns.

Even walking away, she moves with such
elegance you can’t help but feel a momentary
envy and wonder if you can acquire similar
grace and polish in the nights to come.

The Reverend sighs softly. “I hear music
when I watch her.” Then he taps your shoulder
with his book. “Come. Time is precious and
there is little of it left tonight to accomplish all
I must do.”

Bemused, you shrug and follow him out the
door and into the night.

The next hour is spent in apparently aimless
wandering. You find yourself answering
questions instead of asking them for a change.
The Reverend coaxes you to speak about your
family, your interests, and what you knew of
vampires before being Embraced. He shares
cautionary tales with you about some of the
older, more powerful and “quite insane”
vampires in the city.

You feel so comfortable that you even
volunteer the story of the first time you tried
mood-altering drugs. He laughs and mutters
something about blood being the only drug
he needs. Yet, other than talking with you and 
wandering the streets, the two of you visit with
no other vampires. Do nothing of purpose
that you can perceive.

“Well, we’ve come to the end of our time
together.” He stops abruptly. You look about
and realize you are standing before the same
brownstone where Nathaniel changed you to
Kindred.

“I want you to know I wish…” The
Reverend sighs. “Nathaniel shouldn’t have
done this to you.”

You angle your body away, turning your
head, to hide the expression on your face.
Sympathy is more than you can bear right now.
You are trying so hard to just come to terms
with your new condition.

“I will remember everything you have
shared with me tonight and I will keep an eye
on your family.”

You start to look up and ask what he means
by that last bit, and you see him drive the
crucifix into your chest, up to the crossbar. You
fall on your back, lying flat and immobile on
the ground.

The Reverend kneels down beside you. He
crosses himself before grabbing one of your
limp hands, holding it between both of his.
His eyes are not sane.

“I lost one of my childer at Nathaniel’s
hands and the Prince owed me a great debt
from years before you were born, Morgan. The
bible says “an eye for an eye.” Your sire did not
know I knew he murdered my youngest. Now
he will know that and he will know my pain.”

A blood-tear rolls down the Reverend’s
cheek. “I will mourn you. He didn’t cry for my
loss, but I am a better person. I will remember
you and I will honor you. You should have
been mine. I will choose my next childe from
your family and you will be part of the night
always, through them.”

These words terrify you, but all you can do
is scream inside where no one can hear.

Reverend Murik releases your hand, reaches
up to gently shut your eyes. Left in darkness,
you imagine you feel his hand trace the mark
of the cross on your brow.

Then you feel nothing at all.

[[THE END-&gt;Intro]]</tw-passagedata><tw-passagedata pid="44" name="Section 25" tags="" position="2778.6666666666665,1290.8333333333333" size="100,100">Although you are intrigued by the sounds
and smells from the open door, your instincts
scream at you to feed first and that your meal
is getting away.

Faster than you can ever remember running
before, you cross the street darting between
parked cars, careful to stay in the shadows. The
woman takes no more than ten or twelve steps,
while you have moved some 50 yards to close
the gap.

It makes perfect sense. After all, vampires
are always fast and strong in the movies. It’s
part of what makes them dangerous. What
makes you dangerous.

The woman is taken completely by surprise
when you grab her arm, yanking her offbalance
and into the alley. The fear in her eyes
is arousing.

As she inhales to scream, you react
instinctively, hitting the side of her face with
the back of your hand. She whimpers, head
turned to the side, exposing her neck to your
eyes and fangs.

The world turns red as you savage her
neck and shoulders, desperate for blood. You
bite repeatedly, each time pulling away to
swallow before sinking fangs into her scented
skin, while the woman makes sounds like a
wounded animal. She softly pleads for you to
stop, but the sheer taste of liquid life sliding
along the back of your throat is erotic.

This must be what Nathaniel felt when he
was draining you. Powerful. Intoxicated.

The terrible craving abates while you kneel
among the refuse littering the alley, bent
over your prey, enjoying the mingled scent of
jasmine perfume and blood while you pause in
feeding. The woman moans as her gaze fixes on
your face. Her voice is sandpaper rough as she
begs, “Please. Stop. …hurts.” Her neck most
closely resembles an over-used pincushion. It’s
impressive that she is able to speak at all after
what you have done to her.

What you have done.

The feeling of remorse pounds like a
sledgehammer. What have you done? You’ve
become a monster and the proof is before
you, crumpled like a broken doll against the 
building wall. Shaking your head in denial,
you wipe the back of your hand over your lips,
smearing her blood on your face.

“Are you just going to leave her like that?”

The deep voice comes from your left,
towards the street. Illuminated from behind
by the scattering of streetlamps and other
sources is a man of middling height, with close
cut brown hair.

This stranger wears a worn leather biker’s
jacket, blue jeans and boots. Standing with legs
apart, arms hanging loose at his sides, the man
carries himself with the confidence of a fighter.
This may be bolstered by the presence of two
other people flanking him, dressed in similar
clothing—a woman with curly red hair and a
man of Asian descent.

You have no idea how long they’ve been
standing there, watching you.

“I don’t know you,” the group’s leader says
flatly. “This means you are new or foolish.”

Your sharp eyes catch the shine and shape
of fang in his mouth. You exhale in relief, 
tension easing with the realization he’s not the
police and from his behavior, not the woman’s
boyfriend.

“New.” You touch the side of your neck in a
self-conscious gesture.

His gaze tracks the motion of your
hand as his eyes narrow. The man looks
away, exchanging a glance with each of his
companions. His head tilts to the side, as if
listening to something, but you hear nothing.

“New, I can believe. Foolish is something
left to be determined.”

The red-head leans forward, gesturing to
your still breathing victim who is clinging to
consciousness, “You are in violation of the
Camarilla’s First Tradition: ‘Thou shalt not
reveal thy true nature to those not of the
Blood.’ This mortal knows what you are. In
most cities this will cost you your life.” She
places emphasis on the last two words, her lips
curled up in a strange sort of smirk.

The Asian man moves quietly along the
opposite side of the alley, flanking you, to
mirror his companions, who are blocking the
exit leading to the street.

“In this situation, you really have only one
option.” Their apparent leader speaks again,
“Make sure she never speaks of what she saw.
That or face your own death.”

Momentarily stunned by his words, you
close your eyes. Will the horrors of this night
never end? Now you must be a killer as well?

To [[make the death as quick and painless-&gt;Section 31]] as
possible.
If you [[can’t bring yourself-&gt;Section 43]] to take the woman’s
life.</tw-passagedata><tw-passagedata pid="45" name="Section 28" tags="" position="2958.6666666666665,1285.8333333333333" size="100,100">For the second time tonight you enter a
strange place you have never seen nor heard
of before. In this case, a hole-in-the-wall jazz
club; every table empty, a bar running the
length of one wall, with a mirror behind it.
In a far corner there’s an elevated stage with
a permanent piano and space for a signer and
one or two instruments.

The burly man who you assume works
as the club’s bouncer gives you a once-over,
before looking across at a booth whose
occupants can be concealed by velvet drapes.
“Victoria?” he asks.

The glow of a lighted cigarette in the
darkness indicates there is one person relaxing
in the shadows. A woman’s voice, smoky and
sensual, calls out. “Let this one pass.”

Steven’s right eyebrow arches up, giving a
quizzical expression to his face. “Interesting.”
The man steps aside, allowing you entrance,
but you get the impression he has memorized
your face and also determined that in a fight
you would be easy for him to take down.

Seated behind a large round table, the
woman leans forward, her face and upper
torso caressed by carefully-placed lights. The
fingers of one hand are wrapped around an
empty wine glass while an old-fashioned
cigarette holder rests in the other.

Even in your single-minded focus on
finding sustenance, you are momentarily
stunned by the sheer physical perfection, the
ideal that she embodies. Victoria is a platinumblonde,
like the classical screen sirens of film
noir. Her elaborate 1940s hairstyle is pulled
away from her face by a vintage set of sapphirestudded
pins. She wears an electric blue silk
gown that clings to every curve and radiates
that icy sex appeal Alfred Hitchcock only
dreamed of capturing in his movies.

She takes a drag from her cigarette holder
and comments off-handedly with a slight smile
which allows you to make note of her fangs, “I
suspect you are hungry.”

She is a vampire. That is both a relief
and a reason to panic. You twist your body,
the better to keep an eye on her and on the 
bouncer, Steven. You feel increasingly nervous
about being trapped in an unfamiliar place,
where you would have to fight to get out
again.

“Relax, childe. If you were going to run
anywhere, you had either the wisdom or the
luck to find my door. The Scourge and Sheriff
won’t harm you in my domain,” Victoria
pauses, a thoughtful look on her face. “Unless
I ask them to.”

The woman tucks a loose curl behind one
ear as she fixes her grey-green eyes on yours.
She places the cigarette holder across the
crystal ashtray at her side and proceeds to pull
the stopper from a green-glass wine bottle,
pouring a finger’s width of dark red liquid into
the glass in her right hand. A second later, the
aroma of blood fills your nose and you take a
few steps closer to Victoria and her table, as if
compelled.

She addresses you in the manner of a
business negotiation. “Your sire is Nathaniel,
correct? You do match the description.”

“You know the man who did this to me?”
Reflexively, your left hand lifts up to feed the
bite marks that scar your neck.

“He has promised to owe me a favor if I was
able help you tonight. For the future…” she
shrugs, “I am sure you will find your footing in
no time. So, Morgan, child of Nathaniel, how
can I assist you?”

To [[tell Victoria-&gt;Section 47]] you need to feed before you
can talk.
To [[ask Victoria-&gt;Section 48]] to explain about ‘favors’.</tw-passagedata><tw-passagedata pid="46" name="Section 31" tags="" position="2828.6666666666665,1435.8333333333333" size="100,100">You access a hidden reserve of practicality.
If it’s you or her, you want to live. So, this
woman who happened to be at exactly the
wrong place and wrong time needs to die.

It feels like a burden is suddenly lifted from
your shoulders. Not so hard a decision to make
after all. You open your eyes and after glancing
at two vampires still blocking your escape from
the alley, you cross over to the blood-covered
woman.

She starts to scramble away from you with
slow, weak movements, shaking her head in
denial. The panicked woman tries to speak,
but the only sounds from her throat are low,
gruff squeaks – the damage to her neck has
clearly hampered any ability to call for help.

You are startled by a flash of silver that
comes over your shoulder. A knife, tossed by
the Asian man, is embedded with a dull thud
into the right side of your victim’s torso. “Saw
you didn’t have one of your own,” he speaks for
the first time, with a perfect English accent.
“You’re welcome to use mine.” 

You head spins. You had decided to kill,
but not how to do it. But the knife solves
that problem. That will be much easier than
choking or trying to break her neck.

For a second you feel qualms about the fact
you are sitting here, thinking how best to take
another person’s life. Then that is gone and the
practical, survival-oriented voice inside your
head is urging you to just be done with it. Kill
the woman and get out of this place.

You don’t look at her face or murmur any
soft words of comfort or apology. Grasping
the knife, you yank it out of her torso and
draw the blade deep into the woman’s flesh in
a jagged line across her throat.

Blood splashes on your clothes, droplets
decorating your face and arms like tiny pieces
of glitter. The woman’s eyes roll back, her skin
pales to a shade of blue and she falls over on
her side, unmoving.

It is done. In silence you stare at this first
victim of your vampire life. Everything has
changed with no hope of being normal again. 

Behind you there is the sound of applause,
one pair of hands clapping in a slow rhythm.
“Bravo.”

All three watchers are smiling, each
showing fangs. You look down at the knife in
your hand, and pause to wipe it on the dead
woman’s top and skirt, so it gleams again in
the glow of streetlights before offering it hiltfirst,
back to its owner.

“New, but definitely not Camarilla
material.” Approval colors every word the
Asian man says.

“I agree,” states the redhead, standing
behind the third vampire and resting her chin
on his shoulder. “You belong with us.”

Their leader extends his right hand to you,
asking, “Who is your sire?”

You shake your head in confusion and
ignore his offer of a handshake. His hand
drops to his side.

“The one who changed you, gave you the
Embrace,” he explains. 

“The man who killed me said his name was
Nathaniel Le Roi,” you reply, not bothering to
hide the anger or hatred in your voice.

He nods, folding his arms across his chest.
“If that’s the case, perhaps we can help each
other. We’ve been hunting Nathaniel, among
others, because he killed some friends of ours.”
The man gestures with a nod of his head to
the other two vampires, “I’m Randall, this is
Lexie and that’s Jody. Our pack’s called Caine’s
Mercy.”

“You’re lucky you got away before he
could brainwash you,” Randall continues.
“In this city, you are either a member of the
Camarilla—that’s your sire’s group—or they
hunt you down and try to kill you. They won’t
stop until you leave the city or are dust. We’re
Sabbat. We look after each other and we don’t
buy their party line.”

Lexie interjects, “Actually, tonight we
were planning a little sabotage action, but
finding you is so much better than that. You
see, Nathaniel will be frantic to find his lost
childe. He’ll come looking for you and he’ll be 
vulnerable, careless even.” She tilts her head up
to whisper in Randall’s ear. “This could be our
chance.”

Randall makes a short nod, acknowledging
her words, but his attention remains focused
on you. “Would you like to get even with
Nathaniel for what he’s done to you? If you
throw in with us, we can teach you about what
you are, help you find a safe place to rest before
the sun comes up and help you get revenge.
What do you say?”

To [[join forces-&gt;Section 34]] with Caine’s Mercy.
To [[turn down their offer-&gt;Section 40]].</tw-passagedata><tw-passagedata pid="47" name="Section 43" tags="" position="2718.6666666666665,1440.8333333333333" size="100,100">This is your breaking point. It’s all too
much. Vampires are real. You’re a vampire.
Everything you know has changed in the space
of a few hours.

Out of habit, you run the fingers of both
hands through your hair, digging along your
scalp, trying to think. This has to be a bad
dream. Please let it be a bad dream.

Their leader interrupts your musings,
“Who is your sire?”

You glance in his direction, confused by the
question. “Uhh, what?”

“The one who changed you, gave you the
Embrace,” he elaborates. “Made you one of us.”

“He said his name was Nathaniel Le Roi,”
you reply, not bothering to hide the bitterness
in your voice.

The redhead steps up behind the speaker,
keeping her eyes on you as she murmurs to
him. “Randall, if that’s true…”

He cuts her off with a sharp glance, before
returning his focus to you. 

“Describe him to me.”

You get the sense he is accustomed to
giving orders and having them obeyed without
question. On edge, the descriptive details of
Nathaniel’s appearance spill from your lips to
the growing approval of your audience.

Randall nods when you are finished. “It
seems you are the childe then of the Toreador
Primogen. How lucky.” he smirks, folding his
arms across his chest.

Something in his stance or expression sets
you off like a spark to tinder. “Lucky! I don’t
feel the least bit lucky!”

You point to the still-breathing woman
who has pushed herself to an upright, sitting
position against the building wall, one
blood-stained hand pressed against her neck,
eyelids half-closed as she fights to retain
consciousness. “She doesn’t feel lucky!”

Behind you, the Asian man glides over to
the woman’s side and casually snaps her neck,
before you can react. “Now she doesn’t feel
anything. Better?”

“Jody, you could have waited.” The woman
tsks, with a pout on her face. “I was hungry.”

Your mouth hangs open you take a few
steps away from the dead body and her killer.
This unfortunately brings you closer to the
other two vampires. Taking advantage of your
distracted state, they act.

First here is a sharp pain in your chest,
starting at your back. When you look down,
the point of a blood-covered wooden stake is
jutting out from the space your heart should
be. Your muscles lock up and you become
paralyzed.

You can feel hands supporting you from
behind. The world tilts and spins, until you are
staring straight up at the night sky, stars mostly
obscured by the glow of electric lights. The
tall buildings telescope on either side of your
peripheral vision.

Then, bending over so her ratty hair drapes
like a frame around her face, the woman
speaks, while lightly caressing your cheek.
“You’ll be given a chance to prove your
worthiness to the Sword of Caine after we
kill your sire. All you have to do is lie there.”
She laughs, and for the first time you see the
depths of madness in her eyes. “We’re doing
you a favor. Really.”

[[Continue-&gt;Section 45]]</tw-passagedata><tw-passagedata pid="48" name="Section 45" tags="" position="2718.6666666666665,1590.8333333333333" size="100,100">It seems like an hour, maybe two hours have
passed. Rats crawl over your still body. Your
sense of smell was never so keen as now, when
blood and urine, garbage and decay, gasoline
and alcohol mix to form a cocktail of aromas
you can’t ignore.

Then, you sense him coming. No better way
to describe it. You hear steps, a purposeful,
confident stride.
“Morgan!”

His form appears looming over your
unblinking eyes. “Who has done this to you?”
Nathaniel radiates concern and anger. “I
promise you, my childe, my poor childe, they
will pay.”

He starts to kneel down, hand going
toward the stake, when Jody, the Asian
vampire, appears literally out of nowhere,
fangs bared, claws for hands, attacking him.
The other two vampires join in.

You can only hear and see snippets of the
fight. It is brutal and brief. Bodies fly in the
air above you, blood trails make arcs in the air
like solid red rainbows, before splashing across
your face and the ground.

The three move as one. Nathaniel howls in
pain. Then you hear only slurping and silence.

“Jody, grab our little Toreador.” You hear
Randall order his companion. You are lifted
from the ground, like a sack of flour, tossed
over one shoulder.

Your head is lifted up by your hair and find
yourself staring at the disembodied head of
your sire. “The trophy of our hunt. Tonight we
have dealt a major blow to the Camarilla and
that is due to you.”

Randall’s eyes are fever-red and his face
flushed with color. “Nathaniel’s soul was
exquisite. One day, if you are very careful and
smart, you too will know what it is to enrich
your blood. The taste of another vampire—of
your enemy’s life—is like nothing else.”

He releases your hair, so your head flops
back down, face pressed against Jody’s jacket.
“We will teach you everything you need to
know, Morgan.” You feel his hand trace along
your spine as the group heads back out into
the street, brazen and unafraid of the night.
“Welcome to the Sabbat.”

[[THE END-&gt;Intro]]</tw-passagedata><tw-passagedata pid="49" name="Section 34" tags="" position="2848.6666666666665,1585.8333333333333" size="100,100">The idea of making Nathaniel pay for what
he’s done to you overwhelms any concern you
might have about the intentions of your newfound
friends. The enemy of my enemy is my
friend.

For the first time since you left that party
tonight, you smile in reply, fangs showing as
theirs did earlier.

“It sounds like a great idea.” Just thinking
about what you want to do to your sire sends a
rush of endorphins through your body. Images
of torture, burning and cutting flood through
your mind as you think about ripping out his
fangs, all of his teeth, about gouging out his
eyes—making him as vulnerable, even more so
than what he did to you.

He’ll beg for mercy, ask your forgiveness,
grovel at your feet and only then will you kill
him.

Lexie steps forward, lightly resting her hand
on your arm in a gesture of welcome, which
serves to pull your attention back from your
reverie. 

She exhales, “I knew just by watching you
that we’d be friends. You’re going to be just
fine.”

Randall looks past you towards Jody, the
Asian, who nods once.

You are stunned by a heavy blow on the
back of your head. Your last thought is “How
could I be so stupid?” You fall into darkness as
your eyes shut.

[[Continue-&gt;Section 37]]</tw-passagedata><tw-passagedata pid="50" name="Section 40" tags="" position="2978.6666666666665,1582.5" size="100,100">The idea of making Nathaniel pay appeals
to you and for a moment you want to accept
Randall’s offer.

For the first time since all this insanity
started, you smile in reply, fangs showing as
theirs did earlier.

“I appreciate the offer, but this isn’t me,”
you gesture to the dead woman’s body. “Not
the real me. I killed her, yes. But I don’t want
to do that every night. To have to do that every
night.”

Out of habit, you run both hands through
your hair, heedless of the blood still on your
fingers. “I think I need to get out of town. You
said they hunt you until you leave or die. Can
you… Will you help me?”

Lexie steps forward, lightly resting her
hand on your arm in a gesture of reassurance.
She looks…sad as she exhales, “We can help.
Nathaniel will never find you. The Camarilla
will never find you.”

You are stunned by a heavy blow on the
back of your head. Jody drops the plank of
wood and grabs your shoulders, while the
other two attack you from the front.

Randall hisses in your ear, “One thing your
sire would have taught you about, if given the
time. Diablerie. In the Sabbat, we strengthen
our blood by draining the souls of other
vampires. Weak vampires. Those unworthy of
the dark gift.”

You feel the sharp bite of three sets of
fangs, in your arm, your back, and your neck.
That last, Randall’s bite, overlays the marks
you endured earlier this evening. The same
sensation of being drained is repeated, at a
greatly accelerated rate, painfully.

And your last thought is “How could I be
so stupid?”

[[THE END-&gt;Intro]]</tw-passagedata><tw-passagedata pid="51" name="Section 37" tags="" position="2848.6666666666665,1735.8333333333333" size="100,100">You hear the sound of distant chanting,
one voice echoed by many others in a call-andresponse
as you start to regain consciousness.
You open your eyes to darkness. There is a soft
but heavy weight covering your body, and you
inhale the smell of freshly overturned earth.
Dirt slides into your open mouth.

You have been buried alive!

With strength born of panic, or perhaps
the power you have gained from becoming a
vampire, you start to claw your way through
the dirt. For a moment you feel disoriented.
What if you are digging in the wrong
direction, going deeper?

No. You pause, listening for the chanting
voices, feeling the pull of gravity and you start
to struggle toward the surface.

Suddenly, there is light and air as you pull
yourself inch by inch out of this improvised
grave. You are not alone. There is a large group
of people—some fifteen to twenty bodies—in
a loose circle around a pit about ten feet in
diameter. 

Nearer to you, also escaping from the earth
are four other vampires. In fact, everyone
present is a vampire.

There are lit torches spaced at uneven
points and a large bonfire some distance past
that, to the east. Its very proximity makes you
oddly uncomfortable. You see two bodies,
hanging upside down from tree limbs, blood
dripping from their limp forms into ornate
punchbowls placed directly on the ground
below them.

Instead of being appalled, you feel curious
and just a little hungry again.

The chanting stops as in one voice, the
assembled circle of Kindred watching turn to
face the woman you know as Lexie. She calls
out, “Praise Caine!”

“Praise Caine!” the vampires answer as one
before lifting their voices in a cacophony of
joyous sounds.

From his place in the circle, Randall tosses
a leather jacket at your feet. “Welcome to the
Sabbat.”

[[THE END-&gt;Intro]]</tw-passagedata><tw-passagedata pid="52" name="Section 47" tags="" position="3110.333333333333,1432.5" size="100,100">Your eyes slip from Victoria’s face to rest
on the glass she just drained. You can smell
the last drops of drying blood that cling to the
side.

She exhales a soft understanding sigh.
“Hold that thought.” Victoria looks beyond
you and asks the bouncer, “Steven, will you
invite Violet to join us please?”

She gestures to the empty chair across
the table. “Please sit. You will be provided
for. And while we wait, I will educate you.
Some Kindred say it is one of the duties of a
Harpy.” Victoria’s voice gives a subtle emphasis
to the word before she continues in a more
casual tone, “But I like to think of it as a sidebenefit.”

“Thank you,” you murmur.

Victoria smiles and leans forward, “You
must answer one question for me so I can
better help you, Morgan. You come into our
world as a true neonate, yes? You have not
been a ghoul. You did not know we exist?”

You nod, because talking requires too much
energy, and all you want to do is reach across
the table, to steal the glass from her hand and
lick the minute trace of blood that remains.

Victoria continues to speak, filling the
passage of time. “The First Tradition is our
most important rule. We do not let mortals
know we exist.” She puffs on the cigarette,
and then continues, “Never forget that. You
place everyone at risk should any hint of our
existence reach the wrong places. We will kill
our own to protect our safety. You will be
expected to do that as well, if ordered to.”

You are drawn in, distracted from your
hunger by Victoria’s words, by her smallest
gestures. Each move is almost a dance, so
graceful. You have never seen anything like
her. Although she is not a type you have ever
been attracted to before, you find yourself
wondering if this might be what people mean
by love at first sight.

Pleased by your obvious fascination,
Victoria smiles and leans forward again,
resting her glove-covered elbows on the
surface of the table. You mirror her motions,
content to stare into her grey-green eyes for as
long as she will let you.

A third party joins your table, sitting at
your right hand. A wine glass is placed on a
golden charger in between you and the new
arrival. You are vaguely aware of this, but
everything else seems unimportant, so long
as you can view Victoria. Even the gnawing
hunger in your stomach abates while your eyes
are captured by such beauty.

The spell of fascination breaks only
because she laughs again, clearly delighted,
before shifting her attention to welcome
the new arrival. “Oh there is no doubt you
are Toreador, definitely subject to our clan
weakness. I am going to enjoy having you
around, Morgan.”

You straighten up, with a slight shake of
your head. It feels like you were under sedation
and are waking up.

Dressed all in shades of purple with a Bettie
Page-styled haircut, a girl who must be Violet
murmurs a soft hello. She looks at Victoria,
arching her right eyebrow in question. Your
hostess smiles and lowers her eyelids once in
confirmation.

Violet holds up her left arm over the wine
glass and cuts a line across her wrist with her 
other hand, using a delicate knife with a short,
two-inch blade.

Nothing else is as important to you in the
whole world at that instant than watching the
slow stream of her blood into the glass. You
note the scar marks on Violet’s wrist, old and
new, indicating she has done this before. You
can barely restrain yourself from grabbing the
glass. Your fingernails dig painfully into the
palms of your hands.

Manners can carry you only so far, but at
last the desperate urges are contained and
you feel less like a caged animal and more like
rational personal again.

Just as quietly as she arrived, Violet leaves
the table. You glance about and realize that the
bouncer has not returned. The place is empty,
except for the two of you.

“I was going to explain some more to you, if
memory serves?” Victoria tilts her head to one
side, the smile back on her face though it does
not reach her eyes.

To [[ask Victoria-&gt;Section 49]] to continue talking.
To [[go find Nathaniel-&gt;Section 50]].</tw-passagedata></tw-storydata>

<script title="Twine engine code" data-main="harlowe">"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var _slicedToArray=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */
var requirejs,require,define;!function(e){function t(e,t){return v.call(e,t)}function n(e,t){var n,r,i,o,a,s,u,c,l,f,p,d,h=t&&t.split("/"),m=g.map,y=m&&m["*"]||{};if(e){for(e=e.split("/"),a=e.length-1,g.nodeIdCompat&&w.test(e[a])&&(e[a]=e[a].replace(w,"")),"."===e[0].charAt(0)&&h&&(d=h.slice(0,h.length-1),e=d.concat(e)),l=0;l<e.length;l++)if(p=e[l],"."===p)e.splice(l,1),l-=1;else if(".."===p){if(0===l||1===l&&".."===e[2]||".."===e[l-1])continue;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}if((h||y)&&m){for(n=e.split("/"),l=n.length;l>0;l-=1){if(r=n.slice(0,l).join("/"),h)for(f=h.length;f>0;f-=1)if(i=m[h.slice(0,f).join("/")],i&&(i=i[r])){o=i,s=l;break}if(o)break;!u&&y&&y[r]&&(u=y[r],c=l)}!o&&u&&(o=u,s=c),o&&(n.splice(0,s,o),e=n.join("/"))}return e}function r(t,n){return function(){var r=b.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),f.apply(e,r.concat([t,n]))}}function i(e){return function(t){return n(t,e)}}function o(e){return function(t){h[e]=t}}function a(n){if(t(m,n)){var r=m[n];delete m[n],y[n]=!0,l.apply(e,r)}if(!t(h,n)&&!t(y,n))throw new Error("No "+n);return h[n]}function s(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function u(e){return e?s(e):[]}function c(e){return function(){return g&&g.config&&g.config[e]||{}}}var l,f,p,d,h={},m={},g={},y={},v=Object.prototype.hasOwnProperty,b=[].slice,w=/\.js$/;p=function(e,t){var r,o=s(e),u=o[0],c=t[1];return e=o[1],u&&(u=n(u,c),r=a(u)),u?e=r&&r.normalize?r.normalize(e,i(c)):n(e,c):(e=n(e,c),o=s(e),u=o[0],e=o[1],u&&(r=a(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:r}},d={require:function(e){return r(e)},exports:function(e){var t=h[e];return"undefined"!=typeof t?t:h[e]={}},module:function(e){return{id:e,uri:"",exports:h[e],config:c(e)}}},l=function(n,i,s,c){var l,f,g,v,b,w,x,T=[],S="undefined"==typeof s?"undefined":_typeof(s);if(c=c||n,w=u(c),"undefined"===S||"function"===S){for(i=!i.length&&s.length?["require","exports","module"]:i,b=0;b<i.length;b+=1)if(v=p(i[b],w),f=v.f,"require"===f)T[b]=d.require(n);else if("exports"===f)T[b]=d.exports(n),x=!0;else if("module"===f)l=T[b]=d.module(n);else if(t(h,f)||t(m,f)||t(y,f))T[b]=a(f);else{if(!v.p)throw new Error(n+" missing "+f);v.p.load(v.n,r(c,!0),o(f),{}),T[b]=h[f]}g=s?s.apply(h[n],T):void 0,n&&(l&&l.exports!==e&&l.exports!==h[n]?h[n]=l.exports:g===e&&x||(h[n]=g))}else n&&(h[n]=s)},requirejs=require=f=function(t,n,r,i,o){if("string"==typeof t)return d[t]?d[t](n):a(p(t,u(n)).f);if(!t.splice){if(g=t,g.deps&&f(g.deps,g.callback),!n)return;n.splice?(t=n,n=r,r=null):t=e}return n=n||function(){},"function"==typeof r&&(r=i,i=o),i?l(e,t,n,r):setTimeout(function(){l(e,t,n,r)},4),f},f.config=function(e){return f(e)},requirejs._defined=h,define=function(e,n,r){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");n.splice||(r=n,n=[]),t(h,e)||t(m,e)||(m[e]=[e,n,r])},define.amd={jQuery:!0}}(),define("almond",function(){}),function(e,t){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e,t){t=t||te;var n=t.createElement("script");n.text=e,t.head.appendChild(n).parentNode.removeChild(n)}function r(e){var t=!!e&&"length"in e&&e.length,n=he.type(e);return"function"===n||he.isWindow(e)?!1:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){return he.isFunction(t)?he.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?he.grep(e,function(e){return e===t!==n}):"string"!=typeof t?he.grep(e,function(e){return ae.call(t,e)>-1!==n}):Oe.test(t)?he.filter(t,e,n):(t=he.filter(t,e),he.grep(e,function(e){return ae.call(t,e)>-1!==n&&1===e.nodeType}))}function o(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function a(e){var t={};return he.each(e.match(Ne)||[],function(e,n){t[n]=!0}),t}function s(e){return e}function u(e){throw e}function c(e,t,n){var r;try{e&&he.isFunction(r=e.promise)?r.call(e).done(t).fail(n):e&&he.isFunction(r=e.then)?r.call(e,t,n):t.call(void 0,e)}catch(e){n.call(void 0,e)}}function l(){te.removeEventListener("DOMContentLoaded",l),e.removeEventListener("load",l),he.ready()}function f(){this.expando=he.expando+f.uid++}function p(e){return"true"===e?!0:"false"===e?!1:"null"===e?null:e===+e+""?+e:De.test(e)?JSON.parse(e):e}function d(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(qe,"-$&").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n=p(n)}catch(e){}Fe.set(e,t,n)}else n=void 0;return n}function h(e,t,n,r){var i,o=1,a=20,s=r?function(){return r.cur()}:function(){return he.css(e,t,"")},u=s(),c=n&&n[3]||(he.cssNumber[t]?"":"px"),l=(he.cssNumber[t]||"px"!==c&&+u)&&He.exec(he.css(e,t));if(l&&l[3]!==c){c=c||l[3],n=n||[],l=+u||1;do o=o||".5",l/=o,he.style(e,t,l+c);while(o!==(o=s()/u)&&1!==o&&--a)}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}function m(e){var t,n=e.ownerDocument,r=e.nodeName,i=We[r];return i?i:(t=n.body.appendChild(n.createElement(r)),i=he.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),We[r]=i,i)}function g(e,t){for(var n,r,i=[],o=0,a=e.length;a>o;o++)r=e[o],r.style&&(n=r.style.display,t?("none"===n&&(i[o]=Le.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&Be(r)&&(i[o]=m(r))):"none"!==n&&(i[o]="none",Le.set(r,"display",n)));for(o=0;a>o;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}function y(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&he.nodeName(e,t)?he.merge([e],n):n}function v(e,t){for(var n=0,r=e.length;r>n;n++)Le.set(e[n],"globalEval",!t||Le.get(t[n],"globalEval"))}function b(e,t,n,r,i){for(var o,a,s,u,c,l,f=t.createDocumentFragment(),p=[],d=0,h=e.length;h>d;d++)if(o=e[d],o||0===o)if("object"===he.type(o))he.merge(p,o.nodeType?[o]:o);else if(Je.test(o)){for(a=a||f.appendChild(t.createElement("div")),s=(Ue.exec(o)||["",""])[1].toLowerCase(),u=Xe[s]||Xe._default,a.innerHTML=u[1]+he.htmlPrefilter(o)+u[2],l=u[0];l--;)a=a.lastChild;he.merge(p,a.childNodes),a=f.firstChild,a.textContent=""}else p.push(t.createTextNode(o));for(f.textContent="",d=0;o=p[d++];)if(r&&he.inArray(o,r)>-1)i&&i.push(o);else if(c=he.contains(o.ownerDocument,o),a=y(f.appendChild(o),"script"),c&&v(a),n)for(l=0;o=a[l++];)Ge.test(o.type||"")&&n.push(o);return f}function w(){return!0}function x(){return!1}function T(){try{return te.activeElement}catch(e){}}function S(e,t,n,r,i,o){var a,s;if("object"===("undefined"==typeof t?"undefined":_typeof(t))){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)S(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),i===!1)i=x;else if(!i)return e;return 1===o&&(a=i,i=function(e){return he().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=he.guid++)),e.each(function(){he.event.add(this,t,i,r,n)})}function O(e,t){return he.nodeName(e,"table")&&he.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e:e}function j(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function k(e){var t=rt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function C(e,t){var n,r,i,o,a,s,u,c;if(1===t.nodeType){if(Le.hasData(e)&&(o=Le.access(e),a=Le.set(t,o),c=o.events)){delete a.handle,a.events={};for(i in c)for(n=0,r=c[i].length;r>n;n++)he.event.add(t,i,c[i][n])}Fe.hasData(e)&&(s=Fe.access(e),u=he.extend({},s),Fe.set(t,u))}}function A(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ze.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function E(e,t,r,i){t=ie.apply([],t);var o,a,s,u,c,l,f=0,p=e.length,d=p-1,h=t[0],m=he.isFunction(h);if(m||p>1&&"string"==typeof h&&!pe.checkClone&&nt.test(h))return e.each(function(n){var o=e.eq(n);m&&(t[0]=h.call(this,n,o.html())),E(o,t,r,i)});if(p&&(o=b(t,e[0].ownerDocument,!1,e,i),a=o.firstChild,1===o.childNodes.length&&(o=a),a||i)){for(s=he.map(y(o,"script"),j),u=s.length;p>f;f++)c=o,f!==d&&(c=he.clone(c,!0,!0),u&&he.merge(s,y(c,"script"))),r.call(e[f],c,f);if(u)for(l=s[s.length-1].ownerDocument,he.map(s,k),f=0;u>f;f++)c=s[f],Ge.test(c.type||"")&&!Le.access(c,"globalEval")&&he.contains(l,c)&&(c.src?he._evalUrl&&he._evalUrl(c.src):n(c.textContent.replace(it,""),l))}return e}function N(e,t,n){for(var r,i=t?he.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||he.cleanData(y(r)),r.parentNode&&(n&&he.contains(r.ownerDocument,r)&&v(y(r,"script")),r.parentNode.removeChild(r));return e}function _(e,t,n){var r,i,o,a,s=e.style;return n=n||st(e),n&&(a=n.getPropertyValue(t)||n[t],""!==a||he.contains(e.ownerDocument,e)||(a=he.style(e,t)),!pe.pixelMarginRight()&&at.test(a)&&ot.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function P(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function I(e){if(e in pt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=ft.length;n--;)if(e=ft[n]+t,e in pt)return e}function M(e,t,n){var r=He.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function L(e,t,n,r,i){var o,a=0;for(o=n===(r?"border":"content")?4:"width"===t?1:0;4>o;o+=2)"margin"===n&&(a+=he.css(e,n+$e[o],!0,i)),r?("content"===n&&(a-=he.css(e,"padding"+$e[o],!0,i)),"margin"!==n&&(a-=he.css(e,"border"+$e[o]+"Width",!0,i))):(a+=he.css(e,"padding"+$e[o],!0,i),"padding"!==n&&(a+=he.css(e,"border"+$e[o]+"Width",!0,i)));return a}function F(e,t,n){var r,i=!0,o=st(e),a="border-box"===he.css(e,"boxSizing",!1,o);if(e.getClientRects().length&&(r=e.getBoundingClientRect()[t]),0>=r||null==r){if(r=_(e,t,o),(0>r||null==r)&&(r=e.style[t]),at.test(r))return r;i=a&&(pe.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+L(e,t,n||(a?"border":"content"),i,o)+"px"}function D(e,t,n,r,i){return new D.prototype.init(e,t,n,r,i)}function q(){ht&&(e.requestAnimationFrame(q),he.fx.tick())}function R(){return e.setTimeout(function(){dt=void 0}),dt=he.now()}function H(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=$e[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function $(e,t,n){for(var r,i=(W.tweeners[t]||[]).concat(W.tweeners["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,t,e))return r}function B(e,t,n){var r,i,o,a,s,u,c,l,f="width"in t||"height"in t,p=this,d={},h=e.style,m=e.nodeType&&Be(e),y=Le.get(e,"fxshow");n.queue||(a=he._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,he.queue(e,"fx").length||a.empty.fire()})}));for(r in t)if(i=t[r],mt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!y||void 0===y[r])continue;m=!0}d[r]=y&&y[r]||he.style(e,r)}if(u=!he.isEmptyObject(t),u||!he.isEmptyObject(d)){f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],c=y&&y.display,null==c&&(c=Le.get(e,"display")),l=he.css(e,"display"),"none"===l&&(c?l=c:(g([e],!0),c=e.style.display||c,l=he.css(e,"display"),g([e]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===he.css(e,"float")&&(u||(p.done(function(){h.display=c}),null==c&&(l=h.display,c="none"===l?"":l)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1;for(r in d)u||(y?"hidden"in y&&(m=y.hidden):y=Le.access(e,"fxshow",{display:c}),o&&(y.hidden=!m),m&&g([e],!0),p.done(function(){m||g([e]),Le.remove(e,"fxshow");for(r in d)he.style(e,r,d[r])})),u=$(m?y[r]:0,r,p),r in y||(y[r]=u.start,m&&(u.end=u.start,u.start=0))}}function V(e,t){var n,r,i,o,a;for(n in e)if(r=he.camelCase(n),i=t[r],o=e[n],he.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=he.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function W(e,t,n){var r,i,o=0,a=W.prefilters.length,s=he.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=dt||R(),n=Math.max(0,c.startTime+c.duration-t),r=n/c.duration||0,o=1-r,a=0,u=c.tweens.length;u>a;a++)c.tweens[a].run(o);return s.notifyWith(e,[c,o,n]),1>o&&u?n:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:he.extend({},t),opts:he.extend(!0,{specialEasing:{},easing:he.easing._default},n),originalProperties:t,originalOptions:n,startTime:dt||R(),duration:n.duration,tweens:[],createTween:function(t,n){var r=he.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),l=c.props;for(V(l,c.opts.specialEasing);a>o;o++)if(r=W.prefilters[o].call(c,e,l,c.opts))return he.isFunction(r.stop)&&(he._queueHooks(c.elem,c.opts.queue).stop=he.proxy(r.stop,r)),r;return he.map(l,$,c),he.isFunction(c.opts.start)&&c.opts.start.call(e,c),he.fx.timer(he.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function z(e){var t=e.match(Ne)||[];return t.join(" ")}function U(e){return e.getAttribute&&e.getAttribute("class")||""}function G(e,t,n,r){var i;if(he.isArray(t))he.each(t,function(t,i){n||kt.test(e)?r(e,i):G(e+"["+("object"===("undefined"==typeof i?"undefined":_typeof(i))&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==he.type(t))r(e,t);else for(i in t)G(e+"["+i+"]",t[i],n,r)}function X(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(Ne)||[];if(he.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function J(e,t,n,r){function i(s){var u;return o[s]=!0,he.each(e[s]||[],function(e,s){var c=s(t,n,r);return"string"!=typeof c||a||o[c]?a?!(u=c):void 0:(t.dataTypes.unshift(c),i(c),!1)}),u}var o={},a=e===qt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function Y(e,t){var n,r,i=he.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&he.extend(!0,e,r),e}function Z(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function Q(e,t,n,r){var i,o,a,s,u,c={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=c[u+" "+o]||c["* "+o],!a)for(i in c)if(s=i.split(" "),s[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]])){a===!0?a=c[i]:c[i]!==!0&&(o=s[0],l.unshift(s[1]));break}if(a!==!0)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function K(e){return he.isWindow(e)?e:9===e.nodeType&&e.defaultView}var ee=[],te=e.document,ne=Object.getPrototypeOf,re=ee.slice,ie=ee.concat,oe=ee.push,ae=ee.indexOf,se={},ue=se.toString,ce=se.hasOwnProperty,le=ce.toString,fe=le.call(Object),pe={},de="3.1.1",he=function e(t,n){return new e.fn.init(t,n)},me=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ge=/^-ms-/,ye=/-([a-z])/g,ve=function(e,t){return t.toUpperCase()};he.fn=he.prototype={jquery:de,constructor:he,length:0,toArray:function(){return re.call(this)},get:function(e){return null==e?re.call(this):0>e?this[e+this.length]:this[e]},pushStack:function(e){var t=he.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return he.each(this,e)},map:function(e){return this.pushStack(he.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(re.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:oe,sort:ee.sort,splice:ee.splice},he.extend=he.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"===("undefined"==typeof a?"undefined":_typeof(a))||he.isFunction(a)||(a={}),s===u&&(a=this,s--);u>s;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],r=e[t],a!==r&&(c&&r&&(he.isPlainObject(r)||(i=he.isArray(r)))?(i?(i=!1,o=n&&he.isArray(n)?n:[]):o=n&&he.isPlainObject(n)?n:{},a[t]=he.extend(c,o,r)):void 0!==r&&(a[t]=r));return a},he.extend({expando:"jQuery"+(de+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===he.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=he.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,n;return e&&"[object Object]"===ue.call(e)?(t=ne(e))?(n=ce.call(t,"constructor")&&t.constructor,"function"==typeof n&&le.call(n)===fe):!0:!1},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"===("undefined"==typeof e?"undefined":_typeof(e))||"function"==typeof e?se[ue.call(e)]||"object":"undefined"==typeof e?"undefined":_typeof(e)},globalEval:function(e){n(e)},camelCase:function(e){return e.replace(ge,"ms-").replace(ye,ve)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,i=0;if(r(e))for(n=e.length;n>i&&t.call(e[i],i,e[i])!==!1;i++);else for(i in e)if(t.call(e[i],i,e[i])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(me,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(r(Object(e))?he.merge(n,"string"==typeof e?[e]:e):oe.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:ae.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;a>o;o++)r=!t(e[o],o),r!==s&&i.push(e[o]);return i},map:function(e,t,n){var i,o,a=0,s=[];if(r(e))for(i=e.length;i>a;a++)o=t(e[a],a,n),null!=o&&s.push(o);else for(a in e)o=t(e[a],a,n),null!=o&&s.push(o);return ie.apply([],s)},guid:1,proxy:function e(t,n){var r,i,e;return"string"==typeof n&&(r=t[n],n=t,t=r),he.isFunction(t)?(i=re.call(arguments,2),e=function(){return t.apply(n||this,i.concat(re.call(arguments)))},e.guid=t.guid=t.guid||he.guid++,e):void 0},now:Date.now,support:pe}),"function"==typeof Symbol&&(he.fn[Symbol.iterator]=ee[Symbol.iterator]),he.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){se["[object "+t+"]"]=t.toLowerCase()});var be=function(e){function t(e,t,n,r){var i,o,a,s,u,c,l,p=t&&t.ownerDocument,h=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==h&&9!==h&&11!==h)return n;if(!r&&((t?t.ownerDocument||t:$)!==I&&P(t),t=t||I,L)){if(11!==h&&(u=ye.exec(e)))if(i=u[1]){if(9===h){if(!(a=t.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(p&&(a=p.getElementById(i))&&R(t,a)&&a.id===i)return n.push(a),n}else{if(u[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((i=u[3])&&T.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(i)),n}if(!(!T.qsa||U[e+" "]||F&&F.test(e))){if(1!==h)p=t,l=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(xe,Te):t.setAttribute("id",s=H),c=k(e),o=c.length;o--;)c[o]="#"+s+" "+d(c[o]);l=c.join(","),p=ve.test(e)&&f(t.parentNode)||t}if(l)try{return Q.apply(n,p.querySelectorAll(l)),n}catch(e){}finally{s===H&&t.removeAttribute("id")}}}return A(e.replace(se,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>S.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[H]=!0,e}function i(e){var t=I.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=n.length;r--;)S.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return function(t){return"form"in t?t.parentNode&&t.disabled===!1?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Oe(t)===e:t.disabled===e:"label"in t?t.disabled===e:!1}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function f(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function p(){}function d(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function h(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=V++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var c,l,f,p=[B,s];if(u){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(f=t[H]||(t[H]={}),l=f[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=l[o])&&c[0]===B&&c[1]===s)return p[2]=c[2];if(l[o]=p,p[2]=e(t,n,u))return!0}return!1}}function m(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function y(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,c=null!=t;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),c&&t.push(s));return a}function v(e,t,n,i,o,a){return i&&!i[H]&&(i=v(i)),o&&!o[H]&&(o=v(o,a)),r(function(r,a,s,u){var c,l,f,p=[],d=[],h=a.length,m=r||g(t||"*",s.nodeType?[s]:s,[]),v=!e||!r&&t?m:y(m,p,e,s,u),b=n?o||(r?e:h||i)?[]:a:v;if(n&&n(v,b,s,u),i)for(c=y(b,d),i(c,[],s,u),l=c.length;l--;)(f=c[l])&&(b[d[l]]=!(v[d[l]]=f));if(r){if(o||e){if(o){for(c=[],l=b.length;l--;)(f=b[l])&&c.push(v[l]=f);o(null,b=[],c,u)}for(l=b.length;l--;)(f=b[l])&&(c=o?ee(r,f):p[l])>-1&&(r[c]=!(a[c]=f))}}else b=y(b===a?b.splice(h,b.length):b),o?o(null,a,b,u):Q.apply(a,b)})}function b(e){for(var t,n,r,i=e.length,o=S.relative[e[0].type],a=o||S.relative[" "],s=o?1:0,u=h(function(e){return e===t},a,!0),c=h(function(e){return ee(t,e)>-1},a,!0),l=[function(e,n,r){var i=!o&&(r||n!==E)||((t=n).nodeType?u(e,n,r):c(e,n,r));return t=null,i}];i>s;s++)if(n=S.relative[e[s].type])l=[h(m(l),n)];else{if(n=S.filter[e[s].type].apply(null,e[s].matches),n[H]){for(r=++s;i>r&&!S.relative[e[r].type];r++);return v(s>1&&m(l),s>1&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,r>s&&b(e.slice(s,r)),i>r&&b(e=e.slice(r)),i>r&&d(e))}l.push(n)}return m(l)}function w(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,u,c){var l,f,p,d=0,h="0",m=r&&[],g=[],v=E,b=r||o&&S.find.TAG("*",c),w=B+=null==v?1:Math.random()||.1,x=b.length;for(c&&(E=a===I||a||c);h!==x&&null!=(l=b[h]);h++){if(o&&l){for(f=0,a||l.ownerDocument===I||(P(l),s=!L);p=e[f++];)if(p(l,a||I,s)){u.push(l);break}c&&(B=w)}i&&((l=!p&&l)&&d--,r&&m.push(l))}if(d+=h,i&&h!==d){for(f=0;p=n[f++];)p(m,g,a,s);if(r){if(d>0)for(;h--;)m[h]||g[h]||(g[h]=Y.call(u));g=y(g)}Q.apply(u,g),c&&!r&&g.length>0&&d+n.length>1&&t.uniqueSort(u)}return c&&(B=w,E=v),m};return i?r(a):a}var x,T,S,O,j,k,C,A,E,N,_,P,I,M,L,F,D,q,R,H="sizzle"+1*new Date,$=e.document,B=0,V=0,W=n(),z=n(),U=n(),G=function(e,t){return e===t&&(_=!0),0},X={}.hasOwnProperty,J=[],Y=J.pop,Z=J.push,Q=J.push,K=J.slice,ee=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\x00-\\xa0])+",ie="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",oe=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),le=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),fe=new RegExp(oe),pe=new RegExp("^"+re+"$"),de={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},he=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},xe=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Te=function(e,t){return t?"\x00"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Se=function(){P()},Oe=h(function(e){return e.disabled===!0&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Q.apply(J=K.call($.childNodes),$.childNodes),J[$.childNodes.length].nodeType}catch(e){Q={apply:J.length?function(e,t){Z.apply(e,K.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}T=t.support={},j=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},P=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:$;return r!==I&&9===r.nodeType&&r.documentElement?(I=r,M=I.documentElement,L=!j(I),$!==I&&(n=I.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Se,!1):n.attachEvent&&n.attachEvent("onunload",Se)),T.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),T.getElementsByTagName=i(function(e){return e.appendChild(I.createComment("")),!e.getElementsByTagName("*").length}),T.getElementsByClassName=ge.test(I.getElementsByClassName),T.getById=i(function(e){return M.appendChild(e).id=H,!I.getElementsByName||!I.getElementsByName(H).length}),T.getById?(S.filter.ID=function(e){var t=e.replace(be,we);return function(e){return e.getAttribute("id")===t}},S.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&L){var n=t.getElementById(e);return n?[n]:[]}}):(S.filter.ID=function(e){var t=e.replace(be,we);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},S.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&L){var n,r,i,o=t.getElementById(e);if(o){if(n=o.getAttributeNode("id"),n&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if(n=o.getAttributeNode("id"),n&&n.value===e)return[o]}return[]}}),S.find.TAG=T.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):T.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},S.find.CLASS=T.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&L?t.getElementsByClassName(e):void 0},D=[],F=[],(T.qsa=ge.test(I.querySelectorAll))&&(i(function(e){M.appendChild(e).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&F.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||F.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+H+"-]").length||F.push("~="),e.querySelectorAll(":checked").length||F.push(":checked"),e.querySelectorAll("a#"+H+"+*").length||F.push(".#.+[+~]")}),i(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=I.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&F.push("name"+ne+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&F.push(":enabled",":disabled"),M.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&F.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),F.push(",.*:")})),(T.matchesSelector=ge.test(q=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&i(function(e){T.disconnectedMatch=q.call(e,"*"),q.call(e,"[s!='']:x"),D.push("!=",oe)}),F=F.length&&new RegExp(F.join("|")),D=D.length&&new RegExp(D.join("|")),t=ge.test(M.compareDocumentPosition),R=t||ge.test(M.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return _=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!T.sortDetached&&t.compareDocumentPosition(e)===n?e===I||e.ownerDocument===$&&R($,e)?-1:t===I||t.ownerDocument===$&&R($,t)?1:N?ee(N,e)-ee(N,t):0:4&n?-1:1)}:function(e,t){if(e===t)return _=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],u=[t];if(!i||!o)return e===I?-1:t===I?1:i?-1:o?1:N?ee(N,e)-ee(N,t):0;if(i===o)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;s[r]===u[r];)r++;return r?a(s[r],u[r]):s[r]===$?-1:u[r]===$?1:0},I):I},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==I&&P(e),n=n.replace(le,"='$1']"),!(!T.matchesSelector||!L||U[n+" "]||D&&D.test(n)||F&&F.test(n)))try{var r=q.call(e,n);if(r||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,I,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==I&&P(e),R(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==I&&P(e);var n=S.attrHandle[t.toLowerCase()],r=n&&X.call(S.attrHandle,t.toLowerCase())?n(e,t,!L):void 0;return void 0!==r?r:T.attributes||!L?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.escape=function(e){return(e+"").replace(xe,Te)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(_=!T.detectDuplicates,N=!T.sortStable&&e.slice(0),e.sort(G),_){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return N=null,e},O=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=O(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=O(t);return n},S=t.selectors={cacheLength:50,createPseudo:r,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,we),e[3]=(e[3]||e[4]||e[5]||"").replace(be,we),
"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&fe.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(ae," ")+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var c,l,f,p,d,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s,b=!1;if(g){if(o){for(;m;){for(p=t;p=p[m];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&v){for(p=g,f=p[H]||(p[H]={}),l=f[p.uniqueID]||(f[p.uniqueID]={}),c=l[e]||[],d=c[0]===B&&c[1],b=d&&c[2],p=d&&g.childNodes[d];p=++d&&p&&p[m]||(b=d=0)||h.pop();)if(1===p.nodeType&&++b&&p===t){l[e]=[B,d,b];break}}else if(v&&(p=t,f=p[H]||(p[H]={}),l=f[p.uniqueID]||(f[p.uniqueID]={}),c=l[e]||[],d=c[0]===B&&c[1],b=d),b===!1)for(;(p=++d&&p&&p[m]||(b=d=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++b||(v&&(f=p[H]||(p[H]={}),l=f[p.uniqueID]||(f[p.uniqueID]={}),l[e]=[B,b]),p!==t)););return b-=i,b===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,n){var i,o=S.pseudos[e]||S.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[H]?o(n):o.length>1?(i=[e,e,"",n],S.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=ee(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=C(e.replace(se,"$1"));return i[H]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(be,we),function(t){return(t.textContent||t.innerText||O(t)).indexOf(e)>-1}}),lang:r(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,we).toLowerCase(),function(t){var n;do if(n=L?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===M},focus:function(e){return e===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:c(!1),disabled:c(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},S.pseudos.nth=S.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})S.pseudos[x]=u(x);return p.prototype=S.filters=S.pseudos,S.setFilters=new p,k=t.tokenize=function(e,n){var r,i,o,a,s,u,c,l=z[e+" "];if(l)return n?0:l.slice(0);for(s=e,u=[],c=S.preFilter;s;){(!r||(i=ue.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=ce.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(se," ")}),s=s.slice(r.length));for(a in S.filter)!(i=de[a].exec(s))||c[a]&&!(i=c[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):z(e,u).slice(0)},C=t.compile=function(e,t){var n,r=[],i=[],o=U[e+" "];if(!o){for(t||(t=k(e)),n=t.length;n--;)o=b(t[n]),o[H]?r.push(o):i.push(o);o=U(e,w(i,r)),o.selector=e}return o},A=t.select=function(e,t,n,r){var i,o,a,s,u,c="function"==typeof e&&e,l=!r&&k(e=c.selector||e);if(n=n||[],1===l.length){if(o=l[0]=l[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&L&&S.relative[o[1].type]){if(t=(S.find.ID(a.matches[0].replace(be,we),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=de.needsContext.test(e)?0:o.length;i--&&(a=o[i],!S.relative[s=a.type]);)if((u=S.find[s])&&(r=u(a.matches[0].replace(be,we),ve.test(o[0].type)&&f(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&d(o),!e)return Q.apply(n,r),n;break}}return(c||C(e,l))(r,t,!L,n,!t||ve.test(e)&&f(t.parentNode)||t),n},T.sortStable=H.split("").sort(G).join("")===H,T.detectDuplicates=!!_,P(),T.sortDetached=i(function(e){return 1&e.compareDocumentPosition(I.createElement("fieldset"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),T.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);he.find=be,he.expr=be.selectors,he.expr[":"]=he.expr.pseudos,he.uniqueSort=he.unique=be.uniqueSort,he.text=be.getText,he.isXMLDoc=be.isXML,he.contains=be.contains,he.escapeSelector=be.escape;var we=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&he(e).is(n))break;r.push(e)}return r},xe=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Te=he.expr.match.needsContext,Se=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,Oe=/^.[^:#\[\.,]*$/;he.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?he.find.matchesSelector(r,e)?[r]:[]:he.find.matches(e,he.grep(t,function(e){return 1===e.nodeType}))},he.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(he(e).filter(function(){for(t=0;r>t;t++)if(he.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;r>t;t++)he.find(e,i[t],n);return r>1?he.uniqueSort(n):n},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&Te.test(e)?he(e):e||[],!1).length}});var je,ke=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ce=he.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||je,"string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ke.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof he?t[0]:t,he.merge(this,he.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:te,!0)),Se.test(r[1])&&he.isPlainObject(t))for(r in t)he.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=te.getElementById(r[2]),i&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):he.isFunction(e)?void 0!==n.ready?n.ready(e):e(he):he.makeArray(e,this)};Ce.prototype=he.fn,je=he(te);var Ae=/^(?:parents|prev(?:Until|All))/,Ee={children:!0,contents:!0,next:!0,prev:!0};he.fn.extend({has:function(e){var t=he(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(he.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&he(e);if(!Te.test(e))for(;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&he.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?he.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?ae.call(he(e),this[0]):ae.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(he.uniqueSort(he.merge(this.get(),he(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),he.each({parent:function e(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return we(e,"parentNode")},parentsUntil:function(e,t,n){return we(e,"parentNode",n)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return we(e,"nextSibling")},prevAll:function(e){return we(e,"previousSibling")},nextUntil:function(e,t,n){return we(e,"nextSibling",n)},prevUntil:function(e,t,n){return we(e,"previousSibling",n)},siblings:function(e){return xe((e.parentNode||{}).firstChild,e)},children:function(e){return xe(e.firstChild)},contents:function(e){return e.contentDocument||he.merge([],e.childNodes)}},function(e,t){he.fn[e]=function(n,r){var i=he.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=he.filter(r,i)),this.length>1&&(Ee[e]||he.uniqueSort(i),Ae.test(e)&&i.reverse()),this.pushStack(i)}});var Ne=/[^\x20\t\r\n\f]+/g;he.Callbacks=function(e){e="string"==typeof e?a(e):he.extend({},e);var t,n,r,i,o=[],s=[],u=-1,c=function(){for(i=e.once,r=t=!0;s.length;u=-1)for(n=s.shift();++u<o.length;)o[u].apply(n[0],n[1])===!1&&e.stopOnFalse&&(u=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(u=o.length-1,s.push(n)),function t(n){he.each(n,function(n,r){he.isFunction(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==he.type(r)&&t(r)})}(arguments),n&&!t&&c()),this},remove:function(){return he.each(arguments,function(e,t){for(var n;(n=he.inArray(t,o,n))>-1;)o.splice(n,1),u>=n&&u--}),this},has:function(e){return e?he.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=s=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},he.extend({Deferred:function(t){var n=[["notify","progress",he.Callbacks("memory"),he.Callbacks("memory"),2],["resolve","done",he.Callbacks("once memory"),he.Callbacks("once memory"),0,"resolved"],["reject","fail",he.Callbacks("once memory"),he.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return he.Deferred(function(t){he.each(n,function(n,r){var i=he.isFunction(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&he.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){function o(t,n,r,i){return function(){var c=this,l=arguments,f=function(){var e,f;if(!(a>t)){if(e=r.apply(c,l),e===n.promise())throw new TypeError("Thenable self-resolution");f=e&&("object"===("undefined"==typeof e?"undefined":_typeof(e))||"function"==typeof e)&&e.then,he.isFunction(f)?i?f.call(e,o(a,n,s,i),o(a,n,u,i)):(a++,f.call(e,o(a,n,s,i),o(a,n,u,i),o(a,n,s,n.notifyWith))):(r!==s&&(c=void 0,l=[e]),(i||n.resolveWith)(c,l))}},p=i?f:function(){try{f()}catch(e){he.Deferred.exceptionHook&&he.Deferred.exceptionHook(e,p.stackTrace),t+1>=a&&(r!==u&&(c=void 0,l=[e]),n.rejectWith(c,l))}};t?p():(he.Deferred.getStackHook&&(p.stackTrace=he.Deferred.getStackHook()),e.setTimeout(p))}}var a=0;return he.Deferred(function(e){n[0][3].add(o(0,e,he.isFunction(i)?i:s,e.notifyWith)),n[1][3].add(o(0,e,he.isFunction(t)?t:s)),n[2][3].add(o(0,e,he.isFunction(r)?r:u))}).promise()},promise:function(e){return null!=e?he.extend(e,i):i}},o={};return he.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[0][2].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=re.call(arguments),o=he.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?re.call(arguments):n,--t||o.resolveWith(r,i)}};if(1>=t&&(c(e,o.done(a(n)).resolve,o.reject),"pending"===o.state()||he.isFunction(i[n]&&i[n].then)))return o.then();for(;n--;)c(i[n],a(n),o.reject);return o.promise()}});var _e=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;he.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&_e.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},he.readyException=function(t){e.setTimeout(function(){throw t})};var Pe=he.Deferred();he.fn.ready=function(e){return Pe.then(e).catch(function(e){he.readyException(e)}),this},he.extend({isReady:!1,readyWait:1,holdReady:function(e){e?he.readyWait++:he.ready(!0)},ready:function(e){(e===!0?--he.readyWait:he.isReady)||(he.isReady=!0,e!==!0&&--he.readyWait>0||Pe.resolveWith(te,[he]))}}),he.ready.then=Pe.then,"complete"===te.readyState||"loading"!==te.readyState&&!te.documentElement.doScroll?e.setTimeout(he.ready):(te.addEventListener("DOMContentLoaded",l),e.addEventListener("load",l));var Ie=function e(t,n,r,i,o,a,s){var u=0,c=t.length,l=null==r;if("object"===he.type(r)){o=!0;for(u in r)e(t,n,u,r[u],!0,a,s)}else if(void 0!==i&&(o=!0,he.isFunction(i)||(s=!0),l&&(s?(n.call(t,i),n=null):(l=n,n=function(e,t,n){return l.call(he(e),n)})),n))for(;c>u;u++)n(t[u],r,s?i:i.call(t[u],u,n(t[u],r)));return o?t:l?n.call(t):c?n(t[0],r):a},Me=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};f.uid=1,f.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Me(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[he.camelCase(t)]=n;else for(r in t)i[he.camelCase(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][he.camelCase(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){he.isArray(t)?t=t.map(he.camelCase):(t=he.camelCase(t),t=t in r?[t]:t.match(Ne)||[]),n=t.length;for(;n--;)delete r[t[n]]}(void 0===t||he.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!he.isEmptyObject(t)}};var Le=new f,Fe=new f,De=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,qe=/[A-Z]/g;he.extend({hasData:function(e){return Fe.hasData(e)||Le.hasData(e)},data:function(e,t,n){return Fe.access(e,t,n)},removeData:function(e,t){Fe.remove(e,t)},_data:function(e,t,n){return Le.access(e,t,n)},_removeData:function(e,t){Le.remove(e,t)}}),he.fn.extend({data:function e(t,n){var r,i,e,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(e=Fe.get(o),1===o.nodeType&&!Le.get(o,"hasDataAttrs"))){for(r=a.length;r--;)a[r]&&(i=a[r].name,0===i.indexOf("data-")&&(i=he.camelCase(i.slice(5)),d(o,i,e[i])));Le.set(o,"hasDataAttrs",!0)}return e}return"object"===("undefined"==typeof t?"undefined":_typeof(t))?this.each(function(){Fe.set(this,t)}):Ie(this,function(e){var n;if(o&&void 0===e){if(n=Fe.get(o,t),void 0!==n)return n;if(n=d(o,t),void 0!==n)return n}else this.each(function(){Fe.set(this,t,e)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Fe.remove(this,e)})}}),he.extend({queue:function e(t,n,r){var e;return t?(n=(n||"fx")+"queue",e=Le.get(t,n),r&&(!e||he.isArray(r)?e=Le.access(t,n,he.makeArray(r)):e.push(r)),e||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=he.queue(e,t),r=n.length,i=n.shift(),o=he._queueHooks(e,t),a=function(){he.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Le.get(e,n)||Le.access(e,n,{empty:he.Callbacks("once memory").add(function(){Le.remove(e,[t+"queue",n])})})}}),he.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?he.queue(this[0],e):void 0===t?this:this.each(function(){var n=he.queue(this,e,t);he._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&he.dequeue(this,e)})},dequeue:function(e){return this.each(function(){he.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=he.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=Le.get(o[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,He=new RegExp("^(?:([+-])=|)("+Re+")([a-z%]*)$","i"),$e=["Top","Right","Bottom","Left"],Be=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&he.contains(e.ownerDocument,e)&&"none"===he.css(e,"display")},Ve=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i},We={};he.fn.extend({show:function(){return g(this,!0)},hide:function(){return g(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Be(this)?he(this).show():he(this).hide()})}});var ze=/^(?:checkbox|radio)$/i,Ue=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ge=/^$|\/(?:java|ecma)script/i,Xe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Xe.optgroup=Xe.option,Xe.tbody=Xe.tfoot=Xe.colgroup=Xe.caption=Xe.thead,Xe.th=Xe.td;var Je=/<|&#?\w+;/;!function(){var e=te.createDocumentFragment(),t=e.appendChild(te.createElement("div")),n=te.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),pe.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",pe.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ye=te.documentElement,Ze=/^key/,Qe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ke=/^([^.]*)(?:\.(.+)|)/;he.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,c,l,f,p,d,h,m,g=Le.get(e);if(g)for(n.handler&&(o=n,n=o.handler,i=o.selector),i&&he.find.matchesSelector(Ye,i),n.guid||(n.guid=he.guid++),(u=g.events)||(u=g.events={}),(a=g.handle)||(a=g.handle=function(t){return"undefined"!=typeof he&&he.event.triggered!==t.type?he.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Ne)||[""],c=t.length;c--;)s=Ke.exec(t[c])||[],d=m=s[1],h=(s[2]||"").split(".").sort(),d&&(f=he.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=he.event.special[d]||{},l=he.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&he.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||(p=u[d]=[],p.delegateCount=0,f.setup&&f.setup.call(e,r,h,a)!==!1||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,l):p.push(l),he.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,c,l,f,p,d,h,m,g=Le.hasData(e)&&Le.get(e);if(g&&(u=g.events)){for(t=(t||"").match(Ne)||[""],c=t.length;c--;)if(s=Ke.exec(t[c])||[],d=m=s[1],h=(s[2]||"").split(".").sort(),d){for(f=he.event.special[d]||{},d=(r?f.delegateType:f.bindType)||d,p=u[d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)l=p[o],!i&&m!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(p.splice(o,1),l.selector&&p.delegateCount--,f.remove&&f.remove.call(e,l));a&&!p.length&&(f.teardown&&f.teardown.call(e,h,g.handle)!==!1||he.removeEvent(e,d,g.handle),delete u[d])}else for(d in u)he.event.remove(e,d+t[c],n,r,!0);he.isEmptyObject(u)&&Le.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=he.event.fix(e),u=new Array(arguments.length),c=(Le.get(this,"events")||{})[s.type]||[],l=he.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,s)!==!1){for(a=he.event.handlers.call(this,s,c),t=0;(i=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)(!s.rnamespace||s.rnamespace.test(o.namespace))&&(s.handleObj=o,s.data=o.data,r=((he.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u),void 0!==r&&(s.result=r)===!1&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||c.disabled!==!0)){for(o=[],a={},n=0;u>n;n++)r=t[n],i=r.selector+" ",void 0===a[i]&&(a[i]=r.needsContext?he(i,this).index(c)>-1:he.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&s.push({elem:c,handlers:o})}return c=this,u<t.length&&s.push({elem:c,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(he.Event.prototype,e,{enumerable:!0,configurable:!0,get:he.isFunction(t)?function(){return this.originalEvent?t(this.originalEvent):void 0}:function(){return this.originalEvent?this.originalEvent[e]:void 0},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[he.expando]?e:new he.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==T()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===T()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&he.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return he.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},he.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},he.Event=function(e,t){return this instanceof he.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?w:x,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&he.extend(this,t),this.timeStamp=e&&e.timeStamp||he.now(),void(this[he.expando]=!0)):new he.Event(e,t)},he.Event.prototype={constructor:he.Event,isDefaultPrevented:x,isPropagationStopped:x,isImmediatePropagationStopped:x,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=w,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=w,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=w,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},he.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ze.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Qe.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},he.event.addProp),he.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){he.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!he.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),he.fn.extend({on:function(e,t,n,r){return S(this,e,t,n,r)},one:function(e,t,n,r){return S(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,he(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===("undefined"==typeof e?"undefined":_typeof(e))){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=x),this.each(function(){he.event.remove(this,e,n,t)})}});var et=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,tt=/<script|<style|<link/i,nt=/checked\s*(?:[^=]|=\s*.checked.)/i,rt=/^true\/(.*)/,it=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;he.extend({htmlPrefilter:function(e){return e.replace(et,"<$1></$2>")},clone:function e(t,n,r){var i,o,a,s,e=t.cloneNode(!0),u=he.contains(t.ownerDocument,t);if(!(pe.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||he.isXMLDoc(t)))for(s=y(e),a=y(t),i=0,o=a.length;o>i;i++)A(a[i],s[i]);if(n)if(r)for(a=a||y(t),s=s||y(e),i=0,o=a.length;o>i;i++)C(a[i],s[i]);else C(t,e);return s=y(e,"script"),s.length>0&&v(s,!u&&y(t,"script")),e},cleanData:function(e){for(var t,n,r,i=he.event.special,o=0;void 0!==(n=e[o]);o++)if(Me(n)){if(t=n[Le.expando]){if(t.events)for(r in t.events)i[r]?he.event.remove(n,r):he.removeEvent(n,r,t.handle);n[Le.expando]=void 0}n[Fe.expando]&&(n[Fe.expando]=void 0)}}}),he.fn.extend({detach:function(e){return N(this,e,!0)},remove:function(e){return N(this,e)},text:function(e){return Ie(this,function(e){return void 0===e?he.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return E(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=O(this,e);t.appendChild(e)}})},prepend:function(){return E(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=O(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return E(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return E(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(he.cleanData(y(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return he.clone(this,e,t)})},html:function(e){return Ie(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!tt.test(e)&&!Xe[(Ue.exec(e)||["",""])[1].toLowerCase()]){e=he.htmlPrefilter(e);try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(he.cleanData(y(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return E(this,arguments,function(t){var n=this.parentNode;he.inArray(this,e)<0&&(he.cleanData(y(this)),n&&n.replaceChild(t,this))},e)}}),he.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){he.fn[e]=function(e){for(var n,r=[],i=he(e),o=i.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),he(i[a])[t](n),oe.apply(r,n.get());return this.pushStack(r)}});var ot=/^margin/,at=new RegExp("^("+Re+")(?!px)[a-z%]+$","i"),st=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)};!function(){function t(){if(s){s.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Ye.appendChild(a);var t=e.getComputedStyle(s);n="1%"!==t.top,o="2px"===t.marginLeft,r="4px"===t.width,s.style.marginRight="50%",i="4px"===t.marginRight,Ye.removeChild(a),s=null}}var n,r,i,o,a=te.createElement("div"),s=te.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",pe.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),he.extend(pe,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return t(),r},pixelMarginRight:function(){return t(),i},reliableMarginLeft:function(){return t(),o}}))}();var ut=/^(none|table(?!-c[ea]).+)/,ct={position:"absolute",visibility:"hidden",display:"block"},lt={letterSpacing:"0",fontWeight:"400"},ft=["Webkit","Moz","ms"],pt=te.createElement("div").style;he.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=_(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function e(t,n,r,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,a,s,u=he.camelCase(n),e=t.style;return n=he.cssProps[u]||(he.cssProps[u]=I(u)||u),s=he.cssHooks[n]||he.cssHooks[u],void 0===r?s&&"get"in s&&void 0!==(o=s.get(t,!1,i))?o:e[n]:(a="undefined"==typeof r?"undefined":_typeof(r),"string"===a&&(o=He.exec(r))&&o[1]&&(r=h(t,n,o),a="number"),null!=r&&r===r&&("number"===a&&(r+=o&&o[3]||(he.cssNumber[u]?"":"px")),pe.clearCloneStyle||""!==r||0!==n.indexOf("background")||(e[n]="inherit"),s&&"set"in s&&void 0===(r=s.set(t,r,i))||(e[n]=r)),void 0)}},css:function(e,t,n,r){var i,o,a,s=he.camelCase(t);return t=he.cssProps[s]||(he.cssProps[s]=I(s)||s),a=he.cssHooks[t]||he.cssHooks[s],a&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=_(e,t,r)),"normal"===i&&t in lt&&(i=lt[t]),""===n||n?(o=parseFloat(i),n===!0||isFinite(o)?o||0:i):i}}),he.each(["height","width"],function(e,t){he.cssHooks[t]={get:function(e,n,r){return n?!ut.test(he.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?F(e,t,r):Ve(e,ct,function(){return F(e,t,r)}):void 0},set:function(e,n,r){var i,o=r&&st(e),a=r&&L(e,t,r,"border-box"===he.css(e,"boxSizing",!1,o),o);return a&&(i=He.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=he.css(e,t)),M(e,n,a)}}}),he.cssHooks.marginLeft=P(pe.reliableMarginLeft,function(e,t){return t?(parseFloat(_(e,"marginLeft"))||e.getBoundingClientRect().left-Ve(e,{
marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),he.each({margin:"",padding:"",border:"Width"},function(e,t){he.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+$e[r]+t]=o[r]||o[r-2]||o[0];return i}},ot.test(e)||(he.cssHooks[e+t].set=M)}),he.fn.extend({css:function(e,t){return Ie(this,function(e,t,n){var r,i,o={},a=0;if(he.isArray(t)){for(r=st(e),i=t.length;i>a;a++)o[t[a]]=he.css(e,t[a],!1,r);return o}return void 0!==n?he.style(e,t,n):he.css(e,t)},e,t,arguments.length>1)}}),he.Tween=D,D.prototype={constructor:D,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||he.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(he.cssNumber[n]?"":"px")},cur:function(){var e=D.propHooks[this.prop];return e&&e.get?e.get(this):D.propHooks._default.get(this)},run:function(e){var t,n=D.propHooks[this.prop];return this.pos=t=this.options.duration?he.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=he.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){he.fx.step[e.prop]?he.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[he.cssProps[e.prop]]&&!he.cssHooks[e.prop]?e.elem[e.prop]=e.now:he.style(e.elem,e.prop,e.now+e.unit)}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},he.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},he.fx=D.prototype.init,he.fx.step={};var dt,ht,mt=/^(?:toggle|show|hide)$/,gt=/queueHooks$/;he.Animation=he.extend(W,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return h(n.elem,e,He.exec(t),n),n}]},tweener:function(e,t){he.isFunction(e)?(t=e,e=["*"]):e=e.match(Ne);for(var n,r=0,i=e.length;i>r;r++)n=e[r],W.tweeners[n]=W.tweeners[n]||[],W.tweeners[n].unshift(t)},prefilters:[B],prefilter:function(e,t){t?W.prefilters.unshift(e):W.prefilters.push(e)}}),he.speed=function(e,t,n){var r=e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))?he.extend({},e):{complete:n||!n&&t||he.isFunction(e)&&e,duration:e,easing:n&&t||t&&!he.isFunction(t)&&t};return he.fx.off||te.hidden?r.duration=0:"number"!=typeof r.duration&&(r.duration=r.duration in he.fx.speeds?he.fx.speeds[r.duration]:he.fx.speeds._default),(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){he.isFunction(r.old)&&r.old.call(this),r.queue&&he.dequeue(this,r.queue)},r},he.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Be).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=he.isEmptyObject(e),o=he.speed(t,n,r),a=function(){var t=W(this,he.extend({},e),o);(i||Le.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=he.timers,a=Le.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&gt.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&he.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=Le.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=he.timers,a=r?r.length:0;for(n.finish=!0,he.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),he.each(["toggle","show","hide"],function(e,t){var n=he.fn[t];he.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(H(t,!0),e,r,i)}}),he.each({slideDown:H("show"),slideUp:H("hide"),slideToggle:H("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){he.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),he.timers=[],he.fx.tick=function(){var e,t=0,n=he.timers;for(dt=he.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||he.fx.stop(),dt=void 0},he.fx.timer=function(e){he.timers.push(e),e()?he.fx.start():he.timers.pop()},he.fx.interval=13,he.fx.start=function(){ht||(ht=e.requestAnimationFrame?e.requestAnimationFrame(q):e.setInterval(he.fx.tick,he.fx.interval))},he.fx.stop=function(){e.cancelAnimationFrame?e.cancelAnimationFrame(ht):e.clearInterval(ht),ht=null},he.fx.speeds={slow:600,fast:200,_default:400},he.fn.delay=function(t,n){return t=he.fx?he.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=te.createElement("input"),t=te.createElement("select"),n=t.appendChild(te.createElement("option"));e.type="checkbox",pe.checkOn=""!==e.value,pe.optSelected=n.selected,e=te.createElement("input"),e.value="t",e.type="radio",pe.radioValue="t"===e.value}();var yt,vt=he.expr.attrHandle;he.fn.extend({attr:function(e,t){return Ie(this,he.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){he.removeAttr(this,e)})}}),he.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?he.prop(e,t,n):(1===o&&he.isXMLDoc(e)||(i=he.attrHooks[t.toLowerCase()]||(he.expr.match.bool.test(t)?yt:void 0)),void 0!==n?null===n?void he.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=he.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!pe.radioValue&&"radio"===t&&he.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(Ne);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),yt={set:function(e,t,n){return t===!1?he.removeAttr(e,n):e.setAttribute(n,n),n}},he.each(he.expr.match.bool.source.match(/\w+/g),function(e,t){var n=vt[t]||he.find.attr;vt[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=vt[a],vt[a]=i,i=null!=n(e,t,r)?a:null,vt[a]=o),i}});var bt=/^(?:input|select|textarea|button)$/i,wt=/^(?:a|area)$/i;he.fn.extend({prop:function(e,t){return Ie(this,he.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[he.propFix[e]||e]})}}),he.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&he.isXMLDoc(e)||(t=he.propFix[t]||t,i=he.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=he.find.attr(e,"tabindex");return t?parseInt(t,10):bt.test(e.nodeName)||wt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),pe.optSelected||(he.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),he.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){he.propFix[this.toLowerCase()]=this}),he.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(he.isFunction(e))return this.each(function(t){he(this).addClass(e.call(this,t,U(this)))});if("string"==typeof e&&e)for(t=e.match(Ne)||[];n=this[u++];)if(i=U(n),r=1===n.nodeType&&" "+z(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");s=z(r),i!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(he.isFunction(e))return this.each(function(t){he(this).removeClass(e.call(this,t,U(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Ne)||[];n=this[u++];)if(i=U(n),r=1===n.nodeType&&" "+z(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");s=z(r),i!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n="undefined"==typeof e?"undefined":_typeof(e);return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(he.isFunction(e)?function(n){he(this).toggleClass(e.call(this,n,U(this),t),t)}:function(){var t,r,i,o;if("string"===n)for(r=0,i=he(this),o=e.match(Ne)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(void 0===e||"boolean"===n)&&(t=U(this),t&&Le.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Le.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+z(U(n))+" ").indexOf(t)>-1)return!0;return!1}});var xt=/\r/g;he.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=he.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,he(this).val()):e,null==i?i="":"number"==typeof i?i+="":he.isArray(i)&&(i=he.map(i,function(e){return null==e?"":e+""})),t=he.valHooks[this.type]||he.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=he.valHooks[i.type]||he.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(xt,""):null==n?"":n)}}}),he.extend({valHooks:{option:{get:function(e){var t=he.find.attr(e,"value");return null!=t?t:z(he.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=0>o?u:a?o:0;u>r;r++)if(n=i[r],!(!n.selected&&r!==o||n.disabled||n.parentNode.disabled&&he.nodeName(n.parentNode,"optgroup"))){if(t=he(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=he.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=he.inArray(he.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),he.each(["radio","checkbox"],function(){he.valHooks[this]={set:function(e,t){return he.isArray(t)?e.checked=he.inArray(he(e).val(),t)>-1:void 0}},pe.checkOn||(he.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Tt=/^(?:focusinfocus|focusoutblur)$/;he.extend(he.event,{trigger:function(t,n,r,i){var o,a,s,u,c,l,f,p=[r||te],d=ce.call(t,"type")?t.type:t,h=ce.call(t,"namespace")?t.namespace.split("."):[];if(a=s=r=r||te,3!==r.nodeType&&8!==r.nodeType&&!Tt.test(d+he.event.triggered)&&(d.indexOf(".")>-1&&(h=d.split("."),d=h.shift(),h.sort()),c=d.indexOf(":")<0&&"on"+d,t=t[he.expando]?t:new he.Event(d,"object"===("undefined"==typeof t?"undefined":_typeof(t))&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:he.makeArray(n,[t]),f=he.event.special[d]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!he.isWindow(r)){for(u=f.delegateType||d,Tt.test(u+d)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(r.ownerDocument||te)&&p.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=p[o++])&&!t.isPropagationStopped();)t.type=o>1?u:f.bindType||d,l=(Le.get(a,"events")||{})[t.type]&&Le.get(a,"handle"),l&&l.apply(a,n),l=c&&a[c],l&&l.apply&&Me(a)&&(t.result=l.apply(a,n),t.result===!1&&t.preventDefault());return t.type=d,i||t.isDefaultPrevented()||f._default&&f._default.apply(p.pop(),n)!==!1||!Me(r)||c&&he.isFunction(r[d])&&!he.isWindow(r)&&(s=r[c],s&&(r[c]=null),he.event.triggered=d,r[d](),he.event.triggered=void 0,s&&(r[c]=s)),t.result}},simulate:function(e,t,n){var r=he.extend(new he.Event,n,{type:e,isSimulated:!0});he.event.trigger(r,null,t)}}),he.fn.extend({trigger:function(e,t){return this.each(function(){he.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?he.event.trigger(e,t,n,!0):void 0}}),he.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){he.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),he.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),pe.focusin="onfocusin"in e,pe.focusin||he.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){he.event.simulate(t,e.target,he.event.fix(e))};he.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=Le.access(r,t);i||r.addEventListener(e,n,!0),Le.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Le.access(r,t)-1;i?Le.access(r,t,i):(r.removeEventListener(e,n,!0),Le.remove(r,t))}}});var St=e.location,Ot=he.now(),jt=/\?/;he.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return(!n||n.getElementsByTagName("parsererror").length)&&he.error("Invalid XML: "+t),n};var kt=/\[\]$/,Ct=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Et=/^(?:input|select|textarea|keygen)/i;he.param=function(e,t){var n,r=[],i=function(e,t){var n=he.isFunction(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(he.isArray(e)||e.jquery&&!he.isPlainObject(e))he.each(e,function(){i(this.name,this.value)});else for(n in e)G(n,e[n],t,i);return r.join("&")},he.fn.extend({serialize:function(){return he.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=he.prop(this,"elements");return e?he.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!he(this).is(":disabled")&&Et.test(this.nodeName)&&!At.test(e)&&(this.checked||!ze.test(e))}).map(function(e,t){var n=he(this).val();return null==n?null:he.isArray(n)?he.map(n,function(e){return{name:t.name,value:e.replace(Ct,"\r\n")}}):{name:t.name,value:n.replace(Ct,"\r\n")}}).get()}});var Nt=/%20/g,_t=/#.*$/,Pt=/([?&])_=[^&]*/,It=/^(.*?):[ \t]*([^\r\n]*)$/gm,Mt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Lt=/^(?:GET|HEAD)$/,Ft=/^\/\//,Dt={},qt={},Rt="*/".concat("*"),Ht=te.createElement("a");Ht.href=St.href,he.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:St.href,type:"GET",isLocal:Mt.test(St.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":he.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Y(Y(e,he.ajaxSettings),t):Y(he.ajaxSettings,e)},ajaxPrefilter:X(Dt),ajaxTransport:X(qt),ajax:function(t,n){function r(t,n,r,s){var c,p,d,w,x,T=n;l||(l=!0,u&&e.clearTimeout(u),i=void 0,a=s||"",S.readyState=t>0?4:0,c=t>=200&&300>t||304===t,r&&(w=Z(h,S,r)),w=Q(h,w,S,c),c?(h.ifModified&&(x=S.getResponseHeader("Last-Modified"),x&&(he.lastModified[o]=x),x=S.getResponseHeader("etag"),x&&(he.etag[o]=x)),204===t||"HEAD"===h.type?T="nocontent":304===t?T="notmodified":(T=w.state,p=w.data,d=w.error,c=!d)):(d=T,(t||!T)&&(T="error",0>t&&(t=0))),S.status=t,S.statusText=(n||T)+"",c?y.resolveWith(m,[p,T,S]):y.rejectWith(m,[S,T,d]),S.statusCode(b),b=void 0,f&&g.trigger(c?"ajaxSuccess":"ajaxError",[S,h,c?p:d]),v.fireWith(m,[S,T]),f&&(g.trigger("ajaxComplete",[S,h]),--he.active||he.event.trigger("ajaxStop")))}"object"===("undefined"==typeof t?"undefined":_typeof(t))&&(n=t,t=void 0),n=n||{};var i,o,a,s,u,c,l,f,p,d,h=he.ajaxSetup({},n),m=h.context||h,g=h.context&&(m.nodeType||m.jquery)?he(m):he.event,y=he.Deferred(),v=he.Callbacks("once memory"),b=h.statusCode||{},w={},x={},T="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(l){if(!s)for(s={};t=It.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return l?a:null},setRequestHeader:function(e,t){return null==l&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==l&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)S.always(e[S.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||T;return i&&i.abort(t),r(0,t),this}};if(y.promise(S),h.url=((t||h.url||St.href)+"").replace(Ft,St.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(Ne)||[""],null==h.crossDomain){c=te.createElement("a");try{c.href=h.url,c.href=c.href,h.crossDomain=Ht.protocol+"//"+Ht.host!=c.protocol+"//"+c.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=he.param(h.data,h.traditional)),J(Dt,h,n,S),l)return S;f=he.event&&h.global,f&&0===he.active++&&he.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Lt.test(h.type),o=h.url.replace(_t,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Nt,"+")):(d=h.url.slice(o.length),h.data&&(o+=(jt.test(o)?"&":"?")+h.data,delete h.data),h.cache===!1&&(o=o.replace(Pt,"$1"),d=(jt.test(o)?"&":"?")+"_="+Ot++ +d),h.url=o+d),h.ifModified&&(he.lastModified[o]&&S.setRequestHeader("If-Modified-Since",he.lastModified[o]),he.etag[o]&&S.setRequestHeader("If-None-Match",he.etag[o])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&S.setRequestHeader("Content-Type",h.contentType),S.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Rt+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)S.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(h.beforeSend.call(m,S,h)===!1||l))return S.abort();if(T="abort",v.add(h.complete),S.done(h.success),S.fail(h.error),i=J(qt,h,n,S)){if(S.readyState=1,f&&g.trigger("ajaxSend",[S,h]),l)return S;h.async&&h.timeout>0&&(u=e.setTimeout(function(){S.abort("timeout")},h.timeout));try{l=!1,i.send(w,r)}catch(e){if(l)throw e;r(-1,e)}}else r(-1,"No Transport");return S},getJSON:function(e,t,n){return he.get(e,t,n,"json")},getScript:function(e,t){return he.get(e,void 0,t,"script")}}),he.each(["get","post"],function(e,t){he[t]=function(e,n,r,i){return he.isFunction(n)&&(i=i||r,r=n,n=void 0),he.ajax(he.extend({url:e,type:t,dataType:i,data:n,success:r},he.isPlainObject(e)&&e))}}),he._evalUrl=function(e){return he.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},he.fn.extend({wrapAll:function(e){var t;return this[0]&&(he.isFunction(e)&&(e=e.call(this[0])),t=he(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return this.each(he.isFunction(e)?function(t){he(this).wrapInner(e.call(this,t))}:function(){var t=he(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=he.isFunction(e);return this.each(function(n){he(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){he(this).replaceWith(this.childNodes)}),this}}),he.expr.pseudos.hidden=function(e){return!he.expr.pseudos.visible(e)},he.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},he.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var $t={0:200,1223:204},Bt=he.ajaxSettings.xhr();pe.cors=!!Bt&&"withCredentials"in Bt,pe.ajax=Bt=!!Bt,he.ajaxTransport(function(t){var n,r;return pe.cors||Bt&&!t.crossDomain?{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o($t[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}:void 0}),he.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),he.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return he.globalEval(e),e}}}),he.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),he.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=he("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),te.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Vt=[],Wt=/(=)\?(?=&|$)|\?\?/;he.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Vt.pop()||he.expando+"_"+Ot++;return this[e]=!0,e}}),he.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=t.jsonp!==!1&&(Wt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=he.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Wt,"$1"+i):t.jsonp!==!1&&(t.url+=(jt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||he.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?he(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Vt.push(i)),a&&he.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),pe.createHTMLDocument=function(){var e=te.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),he.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var r,i,o;return t||(pe.createHTMLDocument?(t=te.implementation.createHTMLDocument(""),r=t.createElement("base"),r.href=te.location.href,t.head.appendChild(r)):t=te),i=Se.exec(e),o=!n&&[],i?[t.createElement(i[1])]:(i=b([e],t,o),o&&o.length&&he(o).remove(),he.merge([],i.childNodes))},he.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=z(e.slice(s)),e=e.slice(0,s)),he.isFunction(t)?(n=t,t=void 0):t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&(i="POST"),a.length>0&&he.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?he("<div>").append(he.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},he.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){he.fn[t]=function(e){return this.on(t,e)}}),he.expr.pseudos.animated=function(e){return he.grep(he.timers,function(t){return e===t.elem}).length},he.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,c,l=he.css(e,"position"),f=he(e),p={};"static"===l&&(e.style.position="relative"),s=f.offset(),o=he.css(e,"top"),u=he.css(e,"left"),c=("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1,c?(r=f.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),he.isFunction(t)&&(t=t.call(e,n,he.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+i),"using"in t?t.using.call(e,p):f.css(p)}},he.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){he.offset.setOffset(this,e,t)});var t,n,r,i,o=this[0];if(o)return o.getClientRects().length?(r=o.getBoundingClientRect(),r.width||r.height?(i=o.ownerDocument,n=K(i),t=i.documentElement,{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r):{top:0,left:0}},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===he.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),he.nodeName(e[0],"html")||(r=e.offset()),r={top:r.top+he.css(e[0],"borderTopWidth",!0),left:r.left+he.css(e[0],"borderLeftWidth",!0)}),{top:t.top-r.top-he.css(n,"marginTop",!0),left:t.left-r.left-he.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===he.css(e,"position");)e=e.offsetParent;return e||Ye})}}),he.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;he.fn[e]=function(r){return Ie(this,function(e,r,i){var o=K(e);return void 0===i?o?o[t]:e[r]:void(o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i)},e,r,arguments.length)}}),he.each(["top","left"],function(e,t){he.cssHooks[t]=P(pe.pixelPosition,function(e,n){return n?(n=_(e,t),at.test(n)?he(e).position()[t]+"px":n):void 0})}),he.each({Height:"height",Width:"width"},function(e,t){he.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){he.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||o===!0?"margin":"border");return Ie(this,function(t,n,i){var o;return he.isWindow(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?he.css(t,n,s):he.style(t,n,i,s)},t,a?i:void 0,a)}})}),he.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),he.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return he});var zt=e.jQuery,Ut=e.$;return he.noConflict=function(t){return e.$===he&&(e.$=Ut),t&&e.jQuery===he&&(e.jQuery=zt),he},t||(e.jQuery=e.$=he),he}),/*!
  * https://github.com/paulmillr/es6-shim
  * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
  *   and contributors,  MIT License
  * es6-shim: v0.35.1
  * see https://github.com/paulmillr/es6-shim/blob/0.35.1/LICENSE
  * Details and documentation:
  * https://github.com/paulmillr/es6-shim/
  */
function(e,t){"function"==typeof define&&define.amd?define("es6-shim",t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t():e.returnExports=t()}(this,function(){var e,t=Function.call.bind(Function.apply),n=Function.call.bind(Function.call),r=Array.isArray,i=Object.keys,o=function(e){return function(){return!t(e,this,arguments)}},a=function(e){try{return e(),!1}catch(e){return!0}},s=function(e){try{return e()}catch(e){return!1}},u=o(a),c=function(){return!a(function(){Object.defineProperty({},"x",{get:function(){}})})},l=!!Object.defineProperty&&c(),f="foo"===function(){}.name,p=Function.call.bind(Array.prototype.forEach),d=Function.call.bind(Array.prototype.reduce),h=Function.call.bind(Array.prototype.filter),m=Function.call.bind(Array.prototype.some),g=function(e,t,n,r){!r&&t in e||(l?Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n}):e[t]=n)},y=function(e,t,n){p(i(t),function(r){var i=t[r];g(e,r,i,!!n)})},v=Function.call.bind(Object.prototype.toString),b="function"==typeof/abc/?function(e){return"function"==typeof e&&"[object Function]"===v(e)}:function(e){return"function"==typeof e},w={getter:function(e,t,n){if(!l)throw new TypeError("getters require true ES5 support");Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:n})},proxy:function(e,t,n){if(!l)throw new TypeError("getters require true ES5 support");var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,{configurable:r.configurable,enumerable:r.enumerable,get:function(){return e[t]},set:function(n){e[t]=n}})},redefine:function(e,t,n){if(l){var r=Object.getOwnPropertyDescriptor(e,t);r.value=n,Object.defineProperty(e,t,r)}else e[t]=n},defineByDescriptor:function(e,t,n){l?Object.defineProperty(e,t,n):"value"in n&&(e[t]=n.value)},preserveToString:function(e,t){t&&b(t.toString)&&g(e,"toString",t.toString.bind(t),!0)}},x=Object.create||function(e,t){var n=function(){};n.prototype=e;var r=new n;return"undefined"!=typeof t&&i(t).forEach(function(e){w.defineByDescriptor(r,e,t[e])}),r},T=function(e,t){return Object.setPrototypeOf?s(function(){var n=function t(n){var r=new e(n);return Object.setPrototypeOf(r,t.prototype),r};return Object.setPrototypeOf(n,e),n.prototype=x(e.prototype,{constructor:{value:n}}),t(n)}):!1},S=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")},O=S(),j=O.isFinite,k=Function.call.bind(String.prototype.indexOf),C=Function.apply.bind(Array.prototype.indexOf),A=Function.call.bind(Array.prototype.concat),E=Function.call.bind(String.prototype.slice),N=Function.call.bind(Array.prototype.push),_=Function.apply.bind(Array.prototype.push),P=Function.call.bind(Array.prototype.shift),I=Math.max,M=Math.min,L=Math.floor,F=Math.abs,D=Math.exp,q=Math.log,R=Math.sqrt,H=Function.call.bind(Object.prototype.hasOwnProperty),$=function(){},B=O.Symbol||{},V=B.species||"@@species",W=Number.isNaN||function(e){return e!==e},z=Number.isFinite||function(e){return"number"==typeof e&&j(e)},U=b(Math.sign)?Math.sign:function(e){var t=Number(e);return 0===t?t:W(t)?t:0>t?-1:1},G=function(e){return"[object Arguments]"===v(e)},X=function(e){return null!==e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==v(e)&&"[object Function]"===v(e.callee)},J=G(arguments)?G:X,Y={primitive:function(e){return null===e||"function"!=typeof e&&"object"!==("undefined"==typeof e?"undefined":_typeof(e))},string:function(e){return"[object String]"===v(e)},regex:function(e){return"[object RegExp]"===v(e)},symbol:function(e){return"function"==typeof O.Symbol&&"symbol"===("undefined"==typeof e?"undefined":_typeof(e))}},Z=function(e,t,n){var r=e[t];g(e,t,n,!0),w.preserveToString(e[t],r)},Q="function"==typeof B&&"function"==typeof B.for&&Y.symbol(B()),K=Y.symbol(B.iterator)?B.iterator:"_es6-shim iterator_";O.Set&&"function"==typeof(new O.Set)["@@iterator"]&&(K="@@iterator"),O.Reflect||g(O,"Reflect",{},!0);var ee=O.Reflect,te=String,ne={Call:function(e,n){var r=arguments.length>2?arguments[2]:[];if(!ne.IsCallable(e))throw new TypeError(e+" is not a function");return t(e,n,r)},RequireObjectCoercible:function(e,t){if(null==e)throw new TypeError(t||"Cannot call method on "+e);return e},TypeIsObject:function(e){return void 0===e||null===e||e===!0||e===!1?!1:"function"==typeof e||"object"===("undefined"==typeof e?"undefined":_typeof(e))},ToObject:function(e,t){return Object(ne.RequireObjectCoercible(e,t))},IsCallable:b,IsConstructor:function(e){return ne.IsCallable(e)},ToInt32:function(e){return ne.ToNumber(e)>>0},ToUint32:function(e){return ne.ToNumber(e)>>>0},ToNumber:function(e){if("[object Symbol]"===v(e))throw new TypeError("Cannot convert a Symbol value to a number");return+e},ToInteger:function(e){var t=ne.ToNumber(e);return W(t)?0:0!==t&&z(t)?(t>0?1:-1)*L(F(t)):t},ToLength:function(e){var t=ne.ToInteger(e);return 0>=t?0:t>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t},SameValue:function(e,t){return e===t?0===e?1/e===1/t:!0:W(e)&&W(t)},SameValueZero:function(e,t){return e===t||W(e)&&W(t)},IsIterable:function(e){return ne.TypeIsObject(e)&&("undefined"!=typeof e[K]||J(e))},GetIterator:function(t){if(J(t))return new e(t,"value");var n=ne.GetMethod(t,K);if(!ne.IsCallable(n))throw new TypeError("value is not an iterable");var r=ne.Call(n,t);if(!ne.TypeIsObject(r))throw new TypeError("bad iterator");return r},GetMethod:function(e,t){var n=ne.ToObject(e)[t];if(void 0===n||null===n)return void 0;if(!ne.IsCallable(n))throw new TypeError("Method not callable: "+t);return n},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var n=ne.GetMethod(e,"return");if(void 0!==n){var r,i;try{r=ne.Call(n,e)}catch(e){i=e}if(!t){if(i)throw i;if(!ne.TypeIsObject(r))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ne.TypeIsObject(t))throw new TypeError("bad iterator");return t},IteratorStep:function(e){var t=ne.IteratorNext(e),n=ne.IteratorComplete(t);return n?!1:t},Construct:function(e,t,n,r){var i="undefined"==typeof n?e:n;if(!r&&ee.construct)return ee.construct(e,t,i);var o=i.prototype;ne.TypeIsObject(o)||(o=Object.prototype);var a=x(o),s=ne.Call(e,a,t);return ne.TypeIsObject(s)?s:a},SpeciesConstructor:function(e,t){var n=e.constructor;if(void 0===n)return t;if(!ne.TypeIsObject(n))throw new TypeError("Bad constructor");var r=n[V];if(void 0===r||null===r)return t;if(!ne.IsConstructor(r))throw new TypeError("Bad @@species");return r},CreateHTML:function(e,t,n,r){var i=ne.ToString(e),o="<"+t;if(""!==n){var a=ne.ToString(r),s=a.replace(/"/g,"&quot;");o+=" "+n+'="'+s+'"'}var u=o+">",c=u+i;return c+"</"+t+">"},IsRegExp:function(e){if(!ne.TypeIsObject(e))return!1;var t=e[B.match];return"undefined"!=typeof t?!!t:Y.regex(e)},ToString:function(e){return te(e)}};if(l&&Q){var re=function(e){if(Y.symbol(B[e]))return B[e];var t=B.for("Symbol."+e);return Object.defineProperty(B,e,{configurable:!1,enumerable:!1,writable:!1,value:t}),t};if(!Y.symbol(B.search)){var ie=re("search"),oe=String.prototype.search;g(RegExp.prototype,ie,function(e){return ne.Call(oe,e,[this])});var ae=function(e){var t=ne.RequireObjectCoercible(this);if(null!==e&&"undefined"!=typeof e){var n=ne.GetMethod(e,ie);if("undefined"!=typeof n)return ne.Call(n,e,[t])}return ne.Call(oe,t,[ne.ToString(e)])};Z(String.prototype,"search",ae)}if(!Y.symbol(B.replace)){var se=re("replace"),ue=String.prototype.replace;g(RegExp.prototype,se,function(e,t){return ne.Call(ue,e,[this,t])});var ce=function(e,t){var n=ne.RequireObjectCoercible(this);if(null!==e&&"undefined"!=typeof e){var r=ne.GetMethod(e,se);if("undefined"!=typeof r)return ne.Call(r,e,[n,t])}return ne.Call(ue,n,[ne.ToString(e),t])};Z(String.prototype,"replace",ce)}if(!Y.symbol(B.split)){var le=re("split"),fe=String.prototype.split;g(RegExp.prototype,le,function(e,t){return ne.Call(fe,e,[this,t])});var pe=function(e,t){var n=ne.RequireObjectCoercible(this);if(null!==e&&"undefined"!=typeof e){var r=ne.GetMethod(e,le);if("undefined"!=typeof r)return ne.Call(r,e,[n,t])}return ne.Call(fe,n,[ne.ToString(e),t])};Z(String.prototype,"split",pe)}var de=Y.symbol(B.match),he=de&&function(){var e={};return e[B.match]=function(){return 42},42!=="a".match(e)}();if(!de||he){var me=re("match"),ge=String.prototype.match;g(RegExp.prototype,me,function(e){return ne.Call(ge,e,[this])});var ye=function(e){var t=ne.RequireObjectCoercible(this);if(null!==e&&"undefined"!=typeof e){var n=ne.GetMethod(e,me);if("undefined"!=typeof n)return ne.Call(n,e,[t])}return ne.Call(ge,t,[ne.ToString(e)])};Z(String.prototype,"match",ye)}}var ve=function(e,t,n){w.preserveToString(t,e),Object.setPrototypeOf&&Object.setPrototypeOf(e,t),l?p(Object.getOwnPropertyNames(e),function(r){r in $||n[r]||w.proxy(e,r,t)}):p(Object.keys(e),function(r){r in $||n[r]||(t[r]=e[r])}),t.prototype=e.prototype,w.redefine(e.prototype,"constructor",t)},be=function(){return this},we=function(e){l&&!H(e,V)&&w.getter(e,V,be)},xe=function(e,t){var n=t||function(){return this};g(e,K,n),!e[K]&&Y.symbol(K)&&(e[K]=n)},Te=function(e,t,n){l?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[t]=n},Se=function(e,t,n){if(Te(e,t,n),!ne.SameValue(e[t],n))throw new TypeError("property is nonconfigurable")},Oe=function(e,t,n,r){if(!ne.TypeIsObject(e))throw new TypeError("Constructor requires `new`: "+t.name);var i=t.prototype;ne.TypeIsObject(i)||(i=n);var o=x(i);for(var a in r)if(H(r,a)){var s=r[a];g(o,a,s,!0)}return o};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var je=String.fromCodePoint;Z(String,"fromCodePoint",function(){return ne.Call(je,this,arguments)})}var ke={fromCodePoint:function(){for(var e,t=[],n=0,r=arguments.length;r>n;n++){if(e=Number(arguments[n]),!ne.SameValue(e,ne.ToInteger(e))||0>e||e>1114111)throw new RangeError("Invalid code point "+e);65536>e?N(t,String.fromCharCode(e)):(e-=65536,N(t,String.fromCharCode((e>>10)+55296)),N(t,String.fromCharCode(e%1024+56320)))}return t.join("")},raw:function(e){var t=ne.ToObject(e,"bad callSite"),n=ne.ToObject(t.raw,"bad raw value"),r=n.length,i=ne.ToLength(r);if(0>=i)return"";for(var o,a,s,u,c=[],l=0;i>l&&(o=ne.ToString(l),s=ne.ToString(n[o]),N(c,s),!(l+1>=i));)a=l+1<arguments.length?arguments[l+1]:"",u=ne.ToString(a),N(c,u),l+=1;return c.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&Z(String,"raw",ke.raw),y(String,ke);var Ce=function e(t,n){if(1>n)return"";if(n%2)return e(t,n-1)+t;var r=e(t,n/2);return r+r},Ae=1/0,Ee={repeat:function(e){var t=ne.ToString(ne.RequireObjectCoercible(this)),n=ne.ToInteger(e);if(0>n||n>=Ae)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return Ce(t,n)},startsWith:function(e){var t=ne.ToString(ne.RequireObjectCoercible(this));if(ne.IsRegExp(e))throw new TypeError('Cannot call method "startsWith" with a regex');var n,r=ne.ToString(e);arguments.length>1&&(n=arguments[1]);var i=I(ne.ToInteger(n),0);return E(t,i,i+r.length)===r},endsWith:function(e){var t=ne.ToString(ne.RequireObjectCoercible(this));if(ne.IsRegExp(e))throw new TypeError('Cannot call method "endsWith" with a regex');var n,r=ne.ToString(e),i=t.length;arguments.length>1&&(n=arguments[1]);var o="undefined"==typeof n?i:ne.ToInteger(n),a=M(I(o,0),i);return E(t,a-r.length,a)===r},includes:function(e){if(ne.IsRegExp(e))throw new TypeError('"includes" does not accept a RegExp');var t,n=ne.ToString(e);return arguments.length>1&&(t=arguments[1]),-1!==k(this,n,t)},codePointAt:function(e){var t=ne.ToString(ne.RequireObjectCoercible(this)),n=ne.ToInteger(e),r=t.length;if(n>=0&&r>n){var i=t.charCodeAt(n),o=n+1===r;if(55296>i||i>56319||o)return i;var a=t.charCodeAt(n+1);return 56320>a||a>57343?i:1024*(i-55296)+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",1/0)!==!1&&Z(String.prototype,"includes",Ee.includes),String.prototype.startsWith&&String.prototype.endsWith){var Ne=a(function(){"/a/".startsWith(/a/)}),_e=s(function(){return"abc".startsWith("a",1/0)===!1});Ne&&_e||(Z(String.prototype,"startsWith",Ee.startsWith),Z(String.prototype,"endsWith",Ee.endsWith))}if(Q){var Pe=s(function(){var e=/a/;return e[B.match]=!1,"/a/".startsWith(e)});Pe||Z(String.prototype,"startsWith",Ee.startsWith);var Ie=s(function(){var e=/a/;return e[B.match]=!1,"/a/".endsWith(e)});Ie||Z(String.prototype,"endsWith",Ee.endsWith);var Me=s(function(){var e=/a/;return e[B.match]=!1,"/a/".includes(e)});Me||Z(String.prototype,"includes",Ee.includes)}y(String.prototype,Ee);var Le=["	\n\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join(""),Fe=new RegExp("(^["+Le+"]+)|(["+Le+"]+$)","g"),De=function(){return ne.ToString(ne.RequireObjectCoercible(this)).replace(Fe,"")},qe=["\x85","\u200b","\ufffe"].join(""),Re=new RegExp("["+qe+"]","g"),He=/^[\-+]0x[0-9a-f]+$/i,$e=qe.trim().length!==qe.length;g(String.prototype,"trim",De,$e);var Be=function(e){return{value:e,done:0===arguments.length}},Ve=function(e){ne.RequireObjectCoercible(e),this._s=ne.ToString(e),this._i=0};Ve.prototype.next=function(){var e=this._s,t=this._i;if("undefined"==typeof e||t>=e.length)return this._s=void 0,Be();var n,r,i=e.charCodeAt(t);return 55296>i||i>56319||t+1===e.length?r=1:(n=e.charCodeAt(t+1),r=56320>n||n>57343?1:2),this._i=t+r,Be(e.substr(t,r))},xe(Ve.prototype),xe(String.prototype,function(){return new Ve(this)});var We={from:function(e){var t,r=this;arguments.length>1&&(t=arguments[1]);var i,o;if("undefined"==typeof t)i=!1;else{if(!ne.IsCallable(t))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2]),i=!0}var a,s,u,c="undefined"!=typeof(J(e)||ne.GetMethod(e,K));if(c){s=ne.IsConstructor(r)?Object(new r):[];var l,f,p=ne.GetIterator(e);for(u=0;;){if(l=ne.IteratorStep(p),l===!1)break;f=l.value;try{i&&(f="undefined"==typeof o?t(f,u):n(t,o,f,u)),s[u]=f}catch(e){throw ne.IteratorClose(p,!0),e}u+=1}a=u}else{var d=ne.ToObject(e);a=ne.ToLength(d.length),s=ne.IsConstructor(r)?Object(new r(a)):new Array(a);var h;for(u=0;a>u;++u)h=d[u],i&&(h="undefined"==typeof o?t(h,u):n(t,o,h,u)),Se(s,u,h)}return s.length=a,s},of:function(){for(var e=arguments.length,t=this,n=r(t)||!ne.IsCallable(t)?new Array(e):ne.Construct(t,[e]),i=0;e>i;++i)Se(n,i,arguments[i]);return n.length=e,n}};y(Array,We),we(Array),e=function(e,t){this.i=0,this.array=e,this.kind=t},y(e.prototype,{next:function(){var t=this.i,n=this.array;if(!(this instanceof e))throw new TypeError("Not an ArrayIterator");if("undefined"!=typeof n)for(var r=ne.ToLength(n.length);r>t;t++){var i,o=this.kind;return"key"===o?i=t:"value"===o?i=n[t]:"entry"===o&&(i=[t,n[t]]),this.i=t+1,Be(i)}return this.array=void 0,Be()}}),xe(e.prototype);var ze=Array.of===We.of||function(){var e=function(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&2===t.length}();ze||Z(Array,"of",We.of);var Ue={copyWithin:function(e,t){var n,r=ne.ToObject(this),i=ne.ToLength(r.length),o=ne.ToInteger(e),a=ne.ToInteger(t),s=0>o?I(i+o,0):M(o,i),u=0>a?I(i+a,0):M(a,i);arguments.length>2&&(n=arguments[2]);var c="undefined"==typeof n?i:ne.ToInteger(n),l=0>c?I(i+c,0):M(c,i),f=M(l-u,i-s),p=1;for(s>u&&u+f>s&&(p=-1,u+=f-1,s+=f-1);f>0;)u in r?r[s]=r[u]:delete r[s],u+=p,s+=p,f-=1;return r},fill:function(e){var t;arguments.length>1&&(t=arguments[1]);var n;arguments.length>2&&(n=arguments[2]);var r=ne.ToObject(this),i=ne.ToLength(r.length);t=ne.ToInteger("undefined"==typeof t?0:t),n=ne.ToInteger("undefined"==typeof n?i:n);for(var o=0>t?I(i+t,0):M(t,i),a=0>n?i+n:n,s=o;i>s&&a>s;++s)r[s]=e;return r},find:function(e){var t=ne.ToObject(this),r=ne.ToLength(t.length);if(!ne.IsCallable(e))throw new TypeError("Array#find: predicate must be a function");for(var i,o=arguments.length>1?arguments[1]:null,a=0;r>a;a++)if(i=t[a],o){if(n(e,o,i,a,t))return i}else if(e(i,a,t))return i},findIndex:function(e){var t=ne.ToObject(this),r=ne.ToLength(t.length);if(!ne.IsCallable(e))throw new TypeError("Array#findIndex: predicate must be a function");for(var i=arguments.length>1?arguments[1]:null,o=0;r>o;o++)if(i){if(n(e,i,t[o],o,t))return o}else if(e(t[o],o,t))return o;return-1},keys:function(){return new e(this,"key")},values:function(){return new e(this,"value")},entries:function(){return new e(this,"entry")}};if(Array.prototype.keys&&!ne.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!ne.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[K]&&(y(Array.prototype,{values:Array.prototype[K]}),Y.symbol(B.unscopables)&&(Array.prototype[B.unscopables].values=!0)),f&&Array.prototype.values&&"values"!==Array.prototype.values.name){var Ge=Array.prototype.values;Z(Array.prototype,"values",function(){return ne.Call(Ge,this,arguments)}),g(Array.prototype,K,Array.prototype.values,!0)}y(Array.prototype,Ue),1/[!0].indexOf(!0,-0)<0&&g(Array.prototype,"indexOf",function(){var e=C(this,arguments);return 0===e&&0>1/e?0:e},!0),xe(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&xe(Object.getPrototypeOf([].values()));var Xe=function(){return s(function(){return 0===Array.from({length:-1}).length})}(),Je=function(){var e=Array.from([0].entries());return 1===e.length&&r(e[0])&&0===e[0][0]&&0===e[0][1]}();Xe&&Je||Z(Array,"from",We.from);var Ye=function(){return s(function(){return Array.from([0],void 0)})}();if(!Ye){var Ze=Array.from;Z(Array,"from",function(e){return arguments.length>1&&"undefined"!=typeof arguments[1]?ne.Call(Ze,this,arguments):n(Ze,this,e)})}var Qe=-(Math.pow(2,32)-1),Ke=function(e,t){var r={length:Qe};return r[t?(r.length>>>0)-1:0]=!0,s(function(){return n(e,r,function(){throw new RangeError("should not reach here")},[]),!0})};if(!Ke(Array.prototype.forEach)){var et=Array.prototype.forEach;Z(Array.prototype,"forEach",function(){return ne.Call(et,this.length>=0?this:[],arguments)},!0)}if(!Ke(Array.prototype.map)){var tt=Array.prototype.map;Z(Array.prototype,"map",function(){return ne.Call(tt,this.length>=0?this:[],arguments)},!0)}if(!Ke(Array.prototype.filter)){var nt=Array.prototype.filter;Z(Array.prototype,"filter",function(){return ne.Call(nt,this.length>=0?this:[],arguments)},!0)}if(!Ke(Array.prototype.some)){var rt=Array.prototype.some;Z(Array.prototype,"some",function(){return ne.Call(rt,this.length>=0?this:[],arguments)},!0)}if(!Ke(Array.prototype.every)){var it=Array.prototype.every;Z(Array.prototype,"every",function(){return ne.Call(it,this.length>=0?this:[],arguments)},!0)}if(!Ke(Array.prototype.reduce)){var ot=Array.prototype.reduce;Z(Array.prototype,"reduce",function(){return ne.Call(ot,this.length>=0?this:[],arguments)},!0)}if(!Ke(Array.prototype.reduceRight,!0)){var at=Array.prototype.reduceRight;Z(Array.prototype,"reduceRight",function(){return ne.Call(at,this.length>=0?this:[],arguments)},!0)}var st=8!==Number("0o10"),ut=2!==Number("0b10"),ct=m(qe,function(e){return 0===Number(e+0+e)});if(st||ut||ct){var lt=Number,ft=/^0b[01]+$/i,pt=/^0o[0-7]+$/i,dt=ft.test.bind(ft),ht=pt.test.bind(pt),mt=function(e){var t;if("function"==typeof e.valueOf&&(t=e.valueOf(),Y.primitive(t)))return t;if("function"==typeof e.toString&&(t=e.toString(),Y.primitive(t)))return t;throw new TypeError("No default value")},gt=Re.test.bind(Re),yt=He.test.bind(He),vt=function(){var e=function(t){var n;n=arguments.length>0?Y.primitive(t)?t:mt(t,"number"):0,"string"==typeof n&&(n=ne.Call(De,n),dt(n)?n=parseInt(E(n,2),2):ht(n)?n=parseInt(E(n,2),8):(gt(n)||yt(n))&&(n=0/0));var r=this,i=s(function(){return lt.prototype.valueOf.call(r),!0});return r instanceof e&&!i?new lt(n):lt(n)};return e}();ve(lt,vt,{}),y(vt,{NaN:lt.NaN,MAX_VALUE:lt.MAX_VALUE,MIN_VALUE:lt.MIN_VALUE,NEGATIVE_INFINITY:lt.NEGATIVE_INFINITY,POSITIVE_INFINITY:lt.POSITIVE_INFINITY}),Number=vt,w.redefine(O,"Number",vt)}var bt=Math.pow(2,53)-1;y(Number,{MAX_SAFE_INTEGER:bt,MIN_SAFE_INTEGER:-bt,EPSILON:2.220446049250313e-16,parseInt:O.parseInt,parseFloat:O.parseFloat,isFinite:z,isInteger:function(e){return z(e)&&ne.ToInteger(e)===e},isSafeInteger:function(e){return Number.isInteger(e)&&F(e)<=Number.MAX_SAFE_INTEGER},isNaN:W}),g(Number,"parseInt",O.parseInt,Number.parseInt!==O.parseInt),[,1].find(function(e,t){return 0===t})||Z(Array.prototype,"find",Ue.find),0!==[,1].findIndex(function(e,t){return 0===t})&&Z(Array.prototype,"findIndex",Ue.findIndex);var wt=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),xt=function(e,t){l&&wt(e,t)&&Object.defineProperty(e,t,{enumerable:!1})},Tt=function(){for(var e=Number(this),t=arguments.length,n=t-e,r=new Array(0>n?0:n),i=e;t>i;++i)r[i-e]=arguments[i];return r},St=function(e){return function(t,n){return t[n]=e[n],t}},Ot=function(e,t){var n,r=i(Object(t));return ne.IsCallable(Object.getOwnPropertySymbols)&&(n=h(Object.getOwnPropertySymbols(Object(t)),wt(t))),d(A(r,n||[]),St(t),e)},jt={assign:function(e){var t=ne.ToObject(e,"Cannot convert undefined or null to object");return d(ne.Call(Tt,1,arguments),Ot,t)},is:function(e,t){return ne.SameValue(e,t)}},kt=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}}();if(kt&&Z(Object,"assign",jt.assign),y(Object,jt),l){var Ct={setPrototypeOf:function(e,t){var r,i=function(e,t){if(!ne.TypeIsObject(e))throw new TypeError("cannot set prototype on a non-object");if(null!==t&&!ne.TypeIsObject(t))throw new TypeError("can only set prototype to an object or null"+t)},o=function(e,t){return i(e,t),n(r,e,t),e};try{r=e.getOwnPropertyDescriptor(e.prototype,t).set,n(r,{},null)}catch(n){if(e.prototype!=={}[t])return;r=function(e){this[t]=e},o.polyfill=o(o({},null),e.prototype)instanceof e}return o}(Object,"__proto__")};y(Object,Ct)}Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&!function(){var e=Object.create(null),t=Object.getPrototypeOf,n=Object.setPrototypeOf;Object.getPrototypeOf=function(n){var r=t(n);return r===e?null:r},Object.setPrototypeOf=function(t,r){var i=null===r?e:r;return n(t,i)},Object.setPrototypeOf.polyfill=!1}();var At=!a(function(){Object.keys("foo")});if(!At){var Et=Object.keys;Z(Object,"keys",function(e){return Et(ne.ToObject(e))}),i=Object.keys}var Nt=a(function(){Object.keys(/a/g)});if(Nt){var _t=Object.keys;Z(Object,"keys",function(e){if(Y.regex(e)){var t=[];for(var n in e)H(e,n)&&N(t,n);return t}return _t(e)}),i=Object.keys}if(Object.getOwnPropertyNames){var Pt=!a(function(){Object.getOwnPropertyNames("foo")});if(!Pt){var It="object"===("undefined"==typeof window?"undefined":_typeof(window))?Object.getOwnPropertyNames(window):[],Mt=Object.getOwnPropertyNames;Z(Object,"getOwnPropertyNames",function(e){var t=ne.ToObject(e);if("[object Window]"===v(t))try{return Mt(t)}catch(e){return A([],It)}return Mt(t)})}}if(Object.getOwnPropertyDescriptor){var Lt=!a(function(){Object.getOwnPropertyDescriptor("foo","bar")});if(!Lt){var Ft=Object.getOwnPropertyDescriptor;Z(Object,"getOwnPropertyDescriptor",function(e,t){return Ft(ne.ToObject(e),t)})}}if(Object.seal){var Dt=!a(function(){Object.seal("foo")});if(!Dt){var qt=Object.seal;Z(Object,"seal",function(e){return ne.TypeIsObject(e)?qt(e):e})}}if(Object.isSealed){var Rt=!a(function(){Object.isSealed("foo")});if(!Rt){var Ht=Object.isSealed;Z(Object,"isSealed",function(e){return ne.TypeIsObject(e)?Ht(e):!0})}}if(Object.freeze){var $t=!a(function(){Object.freeze("foo")});if(!$t){var Bt=Object.freeze;Z(Object,"freeze",function(e){return ne.TypeIsObject(e)?Bt(e):e})}}if(Object.isFrozen){var Vt=!a(function(){Object.isFrozen("foo")});if(!Vt){var Wt=Object.isFrozen;Z(Object,"isFrozen",function(e){return ne.TypeIsObject(e)?Wt(e):!0})}}if(Object.preventExtensions){var zt=!a(function(){Object.preventExtensions("foo")});if(!zt){var Ut=Object.preventExtensions;Z(Object,"preventExtensions",function(e){return ne.TypeIsObject(e)?Ut(e):e})}}if(Object.isExtensible){var Gt=!a(function(){Object.isExtensible("foo")});if(!Gt){var Xt=Object.isExtensible;Z(Object,"isExtensible",function(e){return ne.TypeIsObject(e)?Xt(e):!1})}}if(Object.getPrototypeOf){var Jt=!a(function(){Object.getPrototypeOf("foo")});if(!Jt){var Yt=Object.getPrototypeOf;Z(Object,"getPrototypeOf",function(e){return Yt(ne.ToObject(e))})}}var Zt=l&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&ne.IsCallable(e.get)}();if(l&&!Zt){var Qt=function(){if(!ne.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e};w.getter(RegExp.prototype,"flags",Qt)}var Kt=l&&s(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),en=Q&&l&&function(){var e=/./;return e[B.match]=!1,RegExp(e)===e}(),tn=s(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),nn=tn&&s(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!tn||!nn){var rn=RegExp.prototype.toString;g(RegExp.prototype,"toString",function(){var e=ne.RequireObjectCoercible(this);if(Y.regex(e))return n(rn,e);var t=te(e.source),r=te(e.flags);return"/"+t+"/"+r},!0),w.preserveToString(RegExp.prototype.toString,rn)}if(l&&(!Kt||en)){var on=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,an=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},sn=function(){return this.source},un=ne.IsCallable(an.get)?an.get:sn,cn=RegExp,ln=function(){return function e(t,n){var r=ne.IsRegExp(t),i=this instanceof e;if(!i&&r&&"undefined"==typeof n&&t.constructor===e)return t;var o=t,a=n;return Y.regex(t)?(o=ne.Call(un,t),a="undefined"==typeof n?ne.Call(on,t):n,new e(o,a)):(r&&(o=t.source,a="undefined"==typeof n?t.flags:n),new cn(t,n))}}();ve(cn,ln,{$input:!0}),RegExp=ln,w.redefine(O,"RegExp",ln)}if(l){var fn={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};p(i(fn),function(e){e in RegExp&&!(fn[e]in RegExp)&&w.getter(RegExp,fn[e],function(){return RegExp[e]})})}we(RegExp);var pn=1/Number.EPSILON,dn=function(e){return e+pn-pn},hn=Math.pow(2,-23),mn=Math.pow(2,127)*(2-hn),gn=Math.pow(2,-126),yn=Math.E,vn=Math.LOG2E,bn=Math.LOG10E,wn=Number.prototype.clz;delete Number.prototype.clz;var xn={acosh:function(e){var t=Number(e);return W(t)||1>e?0/0:1===t?0:t===1/0?t:q(t/yn+R(t+1)*R(t-1)/yn)+1},asinh:function e(t){var n=Number(t);return 0!==n&&j(n)?0>n?-e(-n):q(n+R(n*n+1)):n},atanh:function(e){var t=Number(e);return W(t)||-1>t||t>1?0/0:-1===t?-(1/0):1===t?1/0:0===t?t:.5*q((1+t)/(1-t))},cbrt:function(e){var t=Number(e);if(0===t)return t;var n,r=0>t;return r&&(t=-t),t===1/0?n=1/0:(n=D(q(t)/3),n=(t/(n*n)+2*n)/3),r?-n:n},clz32:function(e){var t=Number(e),n=ne.ToUint32(t);return 0===n?32:wn?ne.Call(wn,n):31-L(q(n+.5)*vn)},cosh:function(e){var t=Number(e);return 0===t?1:W(t)?0/0:j(t)?(0>t&&(t=-t),t>21?D(t)/2:(D(t)+D(-t))/2):1/0},expm1:function(e){var t=Number(e);if(t===-(1/0))return-1;if(!j(t)||0===t)return t;if(F(t)>.5)return D(t)-1;for(var n=t,r=0,i=1;r+n!==r;)r+=n,i+=1,n*=t/i;return r},hypot:function(){for(var e=0,t=0,n=0;n<arguments.length;++n){var r=F(Number(arguments[n]));r>t?(e*=t/r*(t/r),e+=1,t=r):e+=r>0?r/t*(r/t):r}return t===1/0?1/0:t*R(e)},log2:function(e){return q(e)*vn},log10:function(e){return q(e)*bn},log1p:function(e){var t=Number(e);return-1>t||W(t)?0/0:0===t||t===1/0?t:-1===t?-(1/0):1+t-1===0?t:t*(q(1+t)/(1+t-1))},sign:U,sinh:function(e){var t=Number(e);return j(t)&&0!==t?F(t)<1?(Math.expm1(t)-Math.expm1(-t))/2:(D(t-1)-D(-t-1))*yn/2:t},tanh:function(e){var t=Number(e);return W(t)||0===t?t:t>=20?1:-20>=t?-1:(Math.expm1(t)-Math.expm1(-t))/(D(t)+D(-t))},trunc:function(e){var t=Number(e);return 0>t?-L(-t):L(t)},imul:function(e,t){var n=ne.ToUint32(e),r=ne.ToUint32(t),i=n>>>16&65535,o=65535&n,a=r>>>16&65535,s=65535&r;return o*s+(i*s+o*a<<16>>>0)|0},fround:function(e){var t=Number(e);if(0===t||t===1/0||t===-(1/0)||W(t))return t;var n=U(t),r=F(t);if(gn>r)return n*dn(r/gn/hn)*gn*hn;var i=(1+hn/Number.EPSILON)*r,o=i-(i-r);return o>mn||W(o)?n*(1/0):n*o}};y(Math,xn),g(Math,"log1p",xn.log1p,-1e-17!==Math.log1p(-1e-17)),g(Math,"asinh",xn.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),g(Math,"tanh",xn.tanh,-2e-17!==Math.tanh(-2e-17)),g(Math,"acosh",xn.acosh,Math.acosh(Number.MAX_VALUE)===1/0),g(Math,"cbrt",xn.cbrt,Math.abs(1-Math.cbrt(1e-300)/1e-100)/Number.EPSILON>8),g(Math,"sinh",xn.sinh,-2e-17!==Math.sinh(-2e-17));var Tn=Math.expm1(10);g(Math,"expm1",xn.expm1,Tn>22025.465794806718||22025.465794806718>Tn);var Sn=Math.round,On=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(-.5+Number.EPSILON/3.99),jn=pn+1,kn=2*pn-1,Cn=[jn,kn].every(function(e){return Math.round(e)===e});g(Math,"round",function(e){var t=L(e),n=-1===t?-0:t+1;return.5>e-t?t:n},!On||!Cn),w.preserveToString(Math.round,Sn);var An=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=xn.imul,w.preserveToString(Math.imul,An)),2!==Math.imul.length&&Z(Math,"imul",function(){return ne.Call(An,Math,arguments)});var En=function(){var e=O.setTimeout;if("function"==typeof e||"object"===("undefined"==typeof e?"undefined":_typeof(e))){ne.IsPromise=function(e){return ne.TypeIsObject(e)?"undefined"==typeof e._promise?!1:!0:!1};var t,r=function(e){if(!ne.IsConstructor(e))throw new TypeError("Bad promise constructor");var t=this,n=function(e,n){if(void 0!==t.resolve||void 0!==t.reject)throw new TypeError("Bad Promise implementation!");t.resolve=e,t.reject=n};if(t.resolve=void 0,t.reject=void 0,t.promise=new e(n),!ne.IsCallable(t.resolve)||!ne.IsCallable(t.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&ne.IsCallable(window.postMessage)&&(t=function(){var e=[],t="zero-timeout-message",n=function(n){N(e,n),window.postMessage(t,"*")},r=function(n){if(n.source===window&&n.data===t){if(n.stopPropagation(),0===e.length)return;var r=P(e);r()}};return window.addEventListener("message",r,!0),n});var i,o,a=function(){var e=O.Promise,t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}},s=ne.IsCallable(O.setImmediate)?O.setImmediate:"object"===("undefined"==typeof process?"undefined":_typeof(process))&&process.nextTick?process.nextTick:a()||(ne.IsCallable(t)?t():function(t){e(t,0)}),u=function(e){return e},c=function(e){throw e},l=0,f=1,p=2,d=0,h=1,m=2,g={},v=function(e,t,n){s(function(){b(e,t,n)})},b=function(e,t,n){var r,i;if(t===g)return e(n);try{r=e(n),i=t.resolve}catch(e){r=e,i=t.reject}i(r)},w=function(e,t){var n=e._promise,r=n.reactionLength;if(r>0&&(v(n.fulfillReactionHandler0,n.reactionCapability0,t),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var i=1,o=0;r>i;i++,o+=3)v(n[o+d],n[o+m],t),e[o+d]=void 0,e[o+h]=void 0,e[o+m]=void 0;n.result=t,n.state=f,n.reactionLength=0},x=function(e,t){var n=e._promise,r=n.reactionLength;if(r>0&&(v(n.rejectReactionHandler0,n.reactionCapability0,t),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var i=1,o=0;r>i;i++,o+=3)v(n[o+h],n[o+m],t),e[o+d]=void 0,e[o+h]=void 0,e[o+m]=void 0;n.result=t,n.state=p,n.reactionLength=0},T=function(e){var t=!1,n=function(n){var r;if(!t){if(t=!0,n===e)return x(e,new TypeError("Self resolution"));if(!ne.TypeIsObject(n))return w(e,n);try{r=n.then}catch(t){return x(e,t)}return ne.IsCallable(r)?void s(function(){j(e,n,r)}):w(e,n)}},r=function(n){return t?void 0:(t=!0,x(e,n))};return{resolve:n,reject:r}},S=function(e,t,r,i){e===o?n(e,t,r,i,g):n(e,t,r,i)},j=function(e,t,n){var r=T(e),i=r.resolve,o=r.reject;try{S(n,t,i,o)}catch(e){o(e)}},k=function(){var e=function(t){if(!(this instanceof e))throw new TypeError('Constructor Promise requires "new"');

if(this&&this._promise)throw new TypeError("Bad construction");if(!ne.IsCallable(t))throw new TypeError("not a valid resolver");var n=Oe(this,e,i,{_promise:{result:void 0,state:l,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),r=T(n),o=r.reject;try{t(r.resolve,o)}catch(e){o(e)}return n};return e}();i=k.prototype;var C=function(e,t,n,r){var i=!1;return function(o){if(!i&&(i=!0,t[e]=o,0===--r.count)){var a=n.resolve;a(t)}}},A=function(e,t,n){for(var r,i,o=e.iterator,a=[],s={count:1},u=0;;){try{if(r=ne.IteratorStep(o),r===!1){e.done=!0;break}i=r.value}catch(t){throw e.done=!0,t}a[u]=void 0;var c=t.resolve(i),l=C(u,a,n,s);s.count+=1,S(c.then,c,l,n.reject),u+=1}if(0===--s.count){var f=n.resolve;f(a)}return n.promise},E=function(e,t,n){for(var r,i,o,a=e.iterator;;){try{if(r=ne.IteratorStep(a),r===!1){e.done=!0;break}i=r.value}catch(t){throw e.done=!0,t}o=t.resolve(i),S(o.then,o,n.resolve,n.reject)}return n.promise};return y(k,{all:function(e){var t=this;if(!ne.TypeIsObject(t))throw new TypeError("Promise is not object");var n,i,o=new r(t);try{return n=ne.GetIterator(e),i={iterator:n,done:!1},A(i,t,o)}catch(e){var a=e;if(i&&!i.done)try{ne.IteratorClose(n,!0)}catch(e){a=e}var s=o.reject;return s(a),o.promise}},race:function(e){var t=this;if(!ne.TypeIsObject(t))throw new TypeError("Promise is not object");var n,i,o=new r(t);try{return n=ne.GetIterator(e),i={iterator:n,done:!1},E(i,t,o)}catch(e){var a=e;if(i&&!i.done)try{ne.IteratorClose(n,!0)}catch(e){a=e}var s=o.reject;return s(a),o.promise}},reject:function(e){var t=this;if(!ne.TypeIsObject(t))throw new TypeError("Bad promise constructor");var n=new r(t),i=n.reject;return i(e),n.promise},resolve:function(e){var t=this;if(!ne.TypeIsObject(t))throw new TypeError("Bad promise constructor");if(ne.IsPromise(e)){var n=e.constructor;if(n===t)return e}var i=new r(t),o=i.resolve;return o(e),i.promise}}),y(i,{catch:function(e){return this.then(null,e)},then:function(e,t){var n=this;if(!ne.IsPromise(n))throw new TypeError("not a promise");var i,o=ne.SpeciesConstructor(n,k),a=arguments.length>2&&arguments[2]===g;i=a&&o===k?g:new r(o);var s,y=ne.IsCallable(e)?e:u,b=ne.IsCallable(t)?t:c,w=n._promise;if(w.state===l){if(0===w.reactionLength)w.fulfillReactionHandler0=y,w.rejectReactionHandler0=b,w.reactionCapability0=i;else{var x=3*(w.reactionLength-1);w[x+d]=y,w[x+h]=b,w[x+m]=i}w.reactionLength+=1}else if(w.state===f)s=w.result,v(y,i,s);else{if(w.state!==p)throw new TypeError("unexpected Promise state");s=w.result,v(b,i,s)}return i.promise}}),g=new r(k),o=i.then,k}}();if(O.Promise&&(delete O.Promise.accept,delete O.Promise.defer,delete O.Promise.prototype.chain),"function"==typeof En){y(O,{Promise:En});var Nn=T(O.Promise,function(e){return e.resolve(42).then(function(){})instanceof e}),_n=!a(function(){O.Promise.reject(42).then(null,5).then(null,$)}),Pn=a(function(){O.Promise.call(3,$)}),In=function(e){var t=e.resolve(5);t.constructor={};var n=e.resolve(t);try{n.then(null,$).then(null,$)}catch(e){return!0}return t===n}(O.Promise),Mn=l&&function(){var e=0,t=Object.defineProperty({},"then",{get:function(){e+=1}});return Promise.resolve(t),1===e}(),Ln=function e(t){var n=new Promise(t);t(3,function(){}),this.then=n.then,this.constructor=e};Ln.prototype=Promise.prototype,Ln.all=Promise.all;var Fn=s(function(){return!!Ln.all([1,2])});if(Nn&&_n&&Pn&&!In&&Mn&&!Fn||(Promise=En,Z(O,"Promise",En)),1!==Promise.all.length){var Dn=Promise.all;Z(Promise,"all",function(){return ne.Call(Dn,this,arguments)})}if(1!==Promise.race.length){var qn=Promise.race;Z(Promise,"race",function(){return ne.Call(qn,this,arguments)})}if(1!==Promise.resolve.length){var Rn=Promise.resolve;Z(Promise,"resolve",function(){return ne.Call(Rn,this,arguments)})}if(1!==Promise.reject.length){var Hn=Promise.reject;Z(Promise,"reject",function(){return ne.Call(Hn,this,arguments)})}xt(Promise,"all"),xt(Promise,"race"),xt(Promise,"resolve"),xt(Promise,"reject"),we(Promise)}var $n=function(e){var t=i(d(e,function(e,t){return e[t]=!0,e},{}));return e.join(":")===t.join(":")},Bn=$n(["z","a","bb"]),Vn=$n(["z",1,"a","3",2]);if(l){var Wn=function(e){return Bn?"undefined"==typeof e||null===e?"^"+ne.ToString(e):"string"==typeof e?"$"+e:"number"==typeof e?Vn?e:"n"+e:"boolean"==typeof e?"b"+e:null:null},zn=function(){return Object.create?Object.create(null):{}},Un=function(e,t,i){if(r(i)||Y.string(i))p(i,function(e){if(!ne.TypeIsObject(e))throw new TypeError("Iterator value "+e+" is not an entry object");t.set(e[0],e[1])});else if(i instanceof e)n(e.prototype.forEach,i,function(e,n){t.set(n,e)});else{var o,a;if(null!==i&&"undefined"!=typeof i){if(a=t.set,!ne.IsCallable(a))throw new TypeError("bad map");o=ne.GetIterator(i)}if("undefined"!=typeof o)for(;;){var s=ne.IteratorStep(o);if(s===!1)break;var u=s.value;try{if(!ne.TypeIsObject(u))throw new TypeError("Iterator value "+u+" is not an entry object");n(a,t,u[0],u[1])}catch(e){throw ne.IteratorClose(o,!0),e}}}},Gn=function(e,t,i){if(r(i)||Y.string(i))p(i,function(e){t.add(e)});else if(i instanceof e)n(e.prototype.forEach,i,function(e){t.add(e)});else{var o,a;if(null!==i&&"undefined"!=typeof i){if(a=t.add,!ne.IsCallable(a))throw new TypeError("bad set");o=ne.GetIterator(i)}if("undefined"!=typeof o)for(;;){var s=ne.IteratorStep(o);if(s===!1)break;var u=s.value;try{n(a,t,u)}catch(e){throw ne.IteratorClose(o,!0),e}}}},Xn={Map:function(){var e={},t=function(e,t){this.key=e,this.value=t,this.next=null,this.prev=null};t.prototype.isRemoved=function(){return this.key===e};var r=function(e){return!!e._es6map},i=function(e,t){if(!ne.TypeIsObject(e)||!r(e))throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ne.ToString(e))},o=function(e,t){i(e,"[[MapIterator]]"),this.head=e._head,this.i=this.head,this.kind=t};o.prototype={next:function(){var e=this.i,t=this.kind,n=this.head;if("undefined"==typeof this.i)return Be();for(;e.isRemoved()&&e!==n;)e=e.prev;for(var r;e.next!==n;)if(e=e.next,!e.isRemoved())return r="key"===t?e.key:"value"===t?e.value:[e.key,e.value],this.i=e,Be(r);return this.i=void 0,Be()}},xe(o.prototype);var a,s=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var n=Oe(this,e,a,{_es6map:!0,_head:null,_storage:zn(),_size:0}),r=new t(null,null);return r.next=r.prev=r,n._head=r,arguments.length>0&&Un(e,n,arguments[0]),n};return a=s.prototype,w.getter(a,"size",function(){if("undefined"==typeof this._size)throw new TypeError("size method called on incompatible Map");return this._size}),y(a,{get:function(e){i(this,"get");var t=Wn(e);if(null!==t){var n=this._storage[t];return n?n.value:void 0}for(var r=this._head,o=r;(o=o.next)!==r;)if(ne.SameValueZero(o.key,e))return o.value},has:function(e){i(this,"has");var t=Wn(e);if(null!==t)return"undefined"!=typeof this._storage[t];for(var n=this._head,r=n;(r=r.next)!==n;)if(ne.SameValueZero(r.key,e))return!0;return!1},set:function(e,n){i(this,"set");var r,o=this._head,a=o,s=Wn(e);if(null!==s){if("undefined"!=typeof this._storage[s])return this._storage[s].value=n,this;r=this._storage[s]=new t(e,n),a=o.prev}for(;(a=a.next)!==o;)if(ne.SameValueZero(a.key,e))return a.value=n,this;return r=r||new t(e,n),ne.SameValue(-0,e)&&(r.key=0),r.next=this._head,r.prev=this._head.prev,r.prev.next=r,r.next.prev=r,this._size+=1,this},delete:function(t){i(this,"delete");var n=this._head,r=n,o=Wn(t);if(null!==o){if("undefined"==typeof this._storage[o])return!1;r=this._storage[o].prev,delete this._storage[o]}for(;(r=r.next)!==n;)if(ne.SameValueZero(r.key,t))return r.key=r.value=e,r.prev.next=r.next,r.next.prev=r.prev,this._size-=1,!0;return!1},clear:function(){i(this,"clear"),this._size=0,this._storage=zn();for(var t=this._head,n=t,r=n.next;(n=r)!==t;)n.key=n.value=e,r=n.next,n.next=n.prev=t;t.next=t.prev=t},keys:function(){return i(this,"keys"),new o(this,"key")},values:function(){return i(this,"values"),new o(this,"value")},entries:function(){return i(this,"entries"),new o(this,"key+value")},forEach:function(e){i(this,"forEach");for(var t=arguments.length>1?arguments[1]:null,r=this.entries(),o=r.next();!o.done;o=r.next())t?n(e,t,o.value[1],o.value[0],this):e(o.value[1],o.value[0],this)}}),xe(a,a.entries),s}(),Set:function(){var e,t=function(e){return e._es6set&&"undefined"!=typeof e._storage},r=function(e,n){if(!ne.TypeIsObject(e)||!t(e))throw new TypeError("Set.prototype."+n+" called on incompatible receiver "+ne.ToString(e))},o=function t(){if(!(this instanceof t))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var n=Oe(this,t,e,{_es6set:!0,"[[SetData]]":null,_storage:zn()});if(!n._es6set)throw new TypeError("bad set");return arguments.length>0&&Gn(t,n,arguments[0]),n};e=o.prototype;var a=function(e){var t=e;if("^null"===t)return null;if("^undefined"===t)return void 0;var n=t.charAt(0);return"$"===n?E(t,1):"n"===n?+E(t,1):"b"===n?"btrue"===t:+t},s=function(e){if(!e["[[SetData]]"]){var t=e["[[SetData]]"]=new Xn.Map;p(i(e._storage),function(e){var n=a(e);t.set(n,n)}),e["[[SetData]]"]=t}e._storage=null};return w.getter(o.prototype,"size",function(){return r(this,"size"),this._storage?i(this._storage).length:(s(this),this["[[SetData]]"].size)}),y(o.prototype,{has:function(e){r(this,"has");var t;return this._storage&&null!==(t=Wn(e))?!!this._storage[t]:(s(this),this["[[SetData]]"].has(e))},add:function(e){r(this,"add");var t;return this._storage&&null!==(t=Wn(e))?(this._storage[t]=!0,this):(s(this),this["[[SetData]]"].set(e,e),this)},delete:function(e){r(this,"delete");var t;if(this._storage&&null!==(t=Wn(e))){var n=H(this._storage,t);return delete this._storage[t]&&n}return s(this),this["[[SetData]]"].delete(e)},clear:function(){r(this,"clear"),this._storage&&(this._storage=zn()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){return r(this,"values"),s(this),this["[[SetData]]"].values()},entries:function(){return r(this,"entries"),s(this),this["[[SetData]]"].entries()},forEach:function(e){r(this,"forEach");var t=arguments.length>1?arguments[1]:null,i=this;s(i),this["[[SetData]]"].forEach(function(r,o){t?n(e,t,o,o,i):e(o,o,i)})}}),g(o.prototype,"keys",o.prototype.values,!0),xe(o.prototype,o.prototype.values),o}()};if(O.Map||O.Set){var Jn=s(function(){return 2===new Map([[1,2]]).get(1)});if(!Jn){var Yn=O.Map;O.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new Yn;return arguments.length>0&&Un(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,O.Map.prototype),t},O.Map.prototype=x(Yn.prototype),g(O.Map.prototype,"constructor",O.Map,!0),w.preserveToString(O.Map,Yn)}var Zn=new Map,Qn=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);return e.set(-0,e),e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}(),Kn=Zn.set(1,2)===Zn;if(!Qn||!Kn){var er=Map.prototype.set;Z(Map.prototype,"set",function(e,t){return n(er,this,0===e?0:e,t),this})}if(!Qn){var tr=Map.prototype.get,nr=Map.prototype.has;y(Map.prototype,{get:function(e){return n(tr,this,0===e?0:e)},has:function(e){return n(nr,this,0===e?0:e)}},!0),w.preserveToString(Map.prototype.get,tr),w.preserveToString(Map.prototype.has,nr)}var rr=new Set,ir=function(e){return e.delete(0),e.add(-0),!e.has(0)}(rr),or=rr.add(1)===rr;if(!ir||!or){var ar=Set.prototype.add;Set.prototype.add=function(e){return n(ar,this,0===e?0:e),this},w.preserveToString(Set.prototype.add,ar)}if(!ir){var sr=Set.prototype.has;Set.prototype.has=function(e){return n(sr,this,0===e?0:e)},w.preserveToString(Set.prototype.has,sr);var ur=Set.prototype.delete;Set.prototype.delete=function(e){return n(ur,this,0===e?0:e)},w.preserveToString(Set.prototype.delete,ur)}var cr=T(O.Map,function(e){var t=new e([]);return t.set(42,42),t instanceof e}),lr=Object.setPrototypeOf&&!cr,fr=function(){try{return!(O.Map()instanceof O.Map)}catch(e){return e instanceof TypeError}}();if(0!==O.Map.length||lr||!fr){var pr=O.Map;O.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new pr;return arguments.length>0&&Un(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},O.Map.prototype=pr.prototype,g(O.Map.prototype,"constructor",O.Map,!0),w.preserveToString(O.Map,pr)}var dr=T(O.Set,function(e){var t=new e([]);return t.add(42,42),t instanceof e}),hr=Object.setPrototypeOf&&!dr,mr=function(){try{return!(O.Set()instanceof O.Set)}catch(e){return e instanceof TypeError}}();if(0!==O.Set.length||hr||!mr){var gr=O.Set;O.Set=function e(){if(!(this instanceof e))throw new TypeError('Constructor Set requires "new"');var t=new gr;return arguments.length>0&&Gn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},O.Set.prototype=gr.prototype,g(O.Set.prototype,"constructor",O.Set,!0),w.preserveToString(O.Set,gr)}var yr=new O.Map,vr=!s(function(){return yr.keys().next().done});if(("function"!=typeof O.Map.prototype.clear||0!==(new O.Set).size||0!==yr.size||"function"!=typeof O.Map.prototype.keys||"function"!=typeof O.Set.prototype.keys||"function"!=typeof O.Map.prototype.forEach||"function"!=typeof O.Set.prototype.forEach||u(O.Map)||u(O.Set)||"function"!=typeof yr.keys().next||vr||!cr)&&y(O,{Map:Xn.Map,Set:Xn.Set},!0),O.Set.prototype.keys!==O.Set.prototype.values&&g(O.Set.prototype,"keys",O.Set.prototype.values,!0),xe(Object.getPrototypeOf((new O.Map).keys())),xe(Object.getPrototypeOf((new O.Set).keys())),f&&"has"!==O.Set.prototype.has.name){var br=O.Set.prototype.has;Z(O.Set.prototype,"has",function(e){return n(br,this,e)})}}y(O,Xn),we(O.Map),we(O.Set)}var wr=function(e){if(!ne.TypeIsObject(e))throw new TypeError("target must be an object")},xr={apply:function(){return ne.Call(ne.Call,null,arguments)},construct:function(e,t){if(!ne.IsConstructor(e))throw new TypeError("First argument must be a constructor.");var n=arguments.length>2?arguments[2]:e;if(!ne.IsConstructor(n))throw new TypeError("new.target must be a constructor.");return ne.Construct(e,t,n,"internal")},deleteProperty:function(e,t){if(wr(e),l){var n=Object.getOwnPropertyDescriptor(e,t);if(n&&!n.configurable)return!1}return delete e[t]},has:function(e,t){return wr(e),t in e}};Object.getOwnPropertyNames&&Object.assign(xr,{ownKeys:function(e){wr(e);var t=Object.getOwnPropertyNames(e);return ne.IsCallable(Object.getOwnPropertySymbols)&&_(t,Object.getOwnPropertySymbols(e)),t}});var Tr=function(e){return!a(e)};if(Object.preventExtensions&&Object.assign(xr,{isExtensible:function(e){return wr(e),Object.isExtensible(e)},preventExtensions:function(e){return wr(e),Tr(function(){Object.preventExtensions(e)})}}),l){var Sr=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(!r){var i=Object.getPrototypeOf(e);return null===i?void 0:Sr(i,t,n)}return"value"in r?r.value:r.get?ne.Call(r.get,n):void 0},Or=function(e,t,r,i){var o=Object.getOwnPropertyDescriptor(e,t);if(!o){var a=Object.getPrototypeOf(e);if(null!==a)return Or(a,t,r,i);o={value:void 0,writable:!0,enumerable:!0,configurable:!0}}if("value"in o){if(!o.writable)return!1;if(!ne.TypeIsObject(i))return!1;var s=Object.getOwnPropertyDescriptor(i,t);return s?ee.defineProperty(i,t,{value:r}):ee.defineProperty(i,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}return o.set?(n(o.set,i,r),!0):!1};Object.assign(xr,{defineProperty:function(e,t,n){return wr(e),Tr(function(){Object.defineProperty(e,t,n)})},getOwnPropertyDescriptor:function(e,t){return wr(e),Object.getOwnPropertyDescriptor(e,t)},get:function(e,t){wr(e);var n=arguments.length>2?arguments[2]:e;return Sr(e,t,n)},set:function(e,t,n){wr(e);var r=arguments.length>3?arguments[3]:e;return Or(e,t,n,r)}})}if(Object.getPrototypeOf){var jr=Object.getPrototypeOf;xr.getPrototypeOf=function(e){return wr(e),jr(e)}}if(Object.setPrototypeOf&&xr.getPrototypeOf){var kr=function(e,t){for(var n=t;n;){if(e===n)return!0;n=xr.getPrototypeOf(n)}return!1};Object.assign(xr,{setPrototypeOf:function(e,t){if(wr(e),null!==t&&!ne.TypeIsObject(t))throw new TypeError("proto must be an object or null");return t===ee.getPrototypeOf(e)?!0:ee.isExtensible&&!ee.isExtensible(e)?!1:kr(e,t)?!1:(Object.setPrototypeOf(e,t),!0)}})}var Cr=function(e,t){if(ne.IsCallable(O.Reflect[e])){var n=s(function(){return O.Reflect[e](1),O.Reflect[e](0/0),O.Reflect[e](!0),!0});n&&Z(O.Reflect,e,t)}else g(O.Reflect,e,t)};Object.keys(xr).forEach(function(e){Cr(e,xr[e])});var Ar=O.Reflect.getPrototypeOf;if(f&&Ar&&"getPrototypeOf"!==Ar.name&&Z(O.Reflect,"getPrototypeOf",function(e){return n(Ar,O.Reflect,e)}),O.Reflect.setPrototypeOf&&s(function(){return O.Reflect.setPrototypeOf(1,{}),!0})&&Z(O.Reflect,"setPrototypeOf",xr.setPrototypeOf),O.Reflect.defineProperty&&(s(function(){var e=!O.Reflect.defineProperty(1,"test",{value:1}),t="function"!=typeof Object.preventExtensions||!O.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})||Z(O.Reflect,"defineProperty",xr.defineProperty)),O.Reflect.construct&&(s(function(){var e=function(){};return O.Reflect.construct(function(){},[],e)instanceof e})||Z(O.Reflect,"construct",xr.construct)),"Invalid Date"!==String(new Date(0/0))){var Er=Date.prototype.toString,Nr=function(){var e=+this;return e!==e?"Invalid Date":ne.Call(Er,this)};Z(Date.prototype,"toString",Nr)}var _r={anchor:function(e){return ne.CreateHTML(this,"a","name",e)},big:function(){return ne.CreateHTML(this,"big","","")},blink:function(){return ne.CreateHTML(this,"blink","","")},bold:function(){return ne.CreateHTML(this,"b","","")},fixed:function(){return ne.CreateHTML(this,"tt","","")},fontcolor:function(e){return ne.CreateHTML(this,"font","color",e)},fontsize:function(e){return ne.CreateHTML(this,"font","size",e)},italics:function(){return ne.CreateHTML(this,"i","","")},link:function(e){return ne.CreateHTML(this,"a","href",e)},small:function(){return ne.CreateHTML(this,"small","","")},strike:function(){return ne.CreateHTML(this,"strike","","")},sub:function(){return ne.CreateHTML(this,"sub","","")},sup:function(){return ne.CreateHTML(this,"sup","","")}};p(Object.keys(_r),function(e){var t=String.prototype[e],r=!1;if(ne.IsCallable(t)){var i=n(t,"",' " '),o=A([],i.match(/"/g)).length;r=i!==i.toLowerCase()||o>2}else r=!0;r&&Z(String.prototype,e,_r[e])});var Pr=function(){if(!Q)return!1;var e="object"===("undefined"==typeof JSON?"undefined":_typeof(JSON))&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!e)return!1;if("undefined"!=typeof e(B()))return!0;if("[null]"!==e([B()]))return!0;var t={a:B()};return t[B()]=!0,"{}"!==e(t)?!0:!1}(),Ir=s(function(){return Q?"{}"===JSON.stringify(Object(B()))&&"[{}]"===JSON.stringify([Object(B())]):!0});if(Pr||!Ir){var Mr=JSON.stringify;Z(JSON,"stringify",function(e){if("symbol"!==("undefined"==typeof e?"undefined":_typeof(e))){var t;arguments.length>1&&(t=arguments[1]);var i=[e];if(r(t))i.push(t);else{var o=ne.IsCallable(t)?t:null,a=function(e,t){var r=o?n(o,this,e,t):t;return"symbol"!==("undefined"==typeof r?"undefined":_typeof(r))?Y.symbol(r)?St({})(r):r:void 0};i.push(a)}return arguments.length>2&&i.push(arguments[2]),Mr.apply(this,i)}})}return O}),define("jqueryplugins",["jquery"],function(e){e.prototype.extend({popAttr:function(e){var t=this.attr(e);return this.removeAttr(e),t},popData:function(e){var t=this.data(e);return this.removeData(e),t},tag:function(){return this[0]&&this[0].tagName&&this[0].tagName.toLowerCase()},textNodes:function(){return 1===this.length&&this[0]instanceof Text?[this[0]]:Array.from(this.add(this.contents().add(this.find("*").contents())).filter(function(){return this instanceof Text})).sort(function(e,t){return 2&e.compareDocumentPosition(t)?1:-1})},findAndFilter:function(e){return this.filter(e).add(this.find(e))}})}),function(){function e(){for(var e=0;e<arguments.length;e++)for(var t in arguments[e])this[t]=arguments[e][t]}function t(e,t){e.childAt=e.childAt||{};for(var n=t.start;n<t.end;n+=1)e.childAt[n]=t}function n(e,t,n,r){return!(e.canFollow&&!(e.canFollow.indexOf(n&&n.type)>-1)||e.cannotFollow&&(-1!==e.cannotFollow.indexOf(n&&n.type)||e.cannotFollow.indexOf("text")>-1&&r)||e.peek&&e.peek.toLowerCase()!==t.slice(0,e.peek.length).toLowerCase())}function r(e){for(var t=e.innerText,r=[],o=0,s=o,u=t.length,c=null;u>o;){for(var l=t.slice(o),f=(r.length?r[0]:e).innerMode,p=0,d=f.length;d>p;p+=1){var h=a[f[p]];if(n(h,l,c,o>s)&&h.pattern.test(l)){var m=h.pattern.exec(l),g=h.fn(m),y=!1,v=0;if(g.matches){for(;v<r.length;v+=1){var b=r[v].type;if(b in g.matches){y=!0;break}0===b.indexOf("verbatim")&&(b="verbatimOpener"),g.cannotCross&&g.cannotCross.indexOf(b)>-1&&(v=r.length-1)}if(v>=r.length&&!g.isFront)continue}o>s&&e.addChild({type:"text",text:t.slice(s,o),innerMode:f}),c=e.addChild(g),o+=c.text.length,s=o,y&&(i(e,c,r[v]),r=r.slice(v+1)),c.isFrontToken()&&r.unshift(c);break}}p===d&&(o+=1,null===c&&(c={type:"text"}))}for(o>s&&e.addChild({type:"text",text:t.slice(s,o),innerMode:(r.length?r[0]:e).innerMode});r.length>0;)r.shift().demote();return e}function i(e,n,r){var i=e.children.indexOf(n),o=e.children.indexOf(r);n.children=e.children.splice(o+1,i-(o+1)),n.children.forEach(function(e){t(n,e)}),n.type=n.matches[r.type],n.innerText="";for(var a=0,s=n.children.length;s>a;a++)n.innerText+=n.children[a].text;n.start=r.start,n.text=r.text+n.innerText+n.text,Object.keys(r).forEach(function(e){Object.hasOwnProperty.call(n,e)||(n[e]=r[e])}),n.isFront&&(n.isFront=!1),e.children.splice(o,1),t(e,n)}var o=void 0,a={};e.prototype={constructor:e,addChild:function(n){var i=this.lastChildEnd(),o=new e({start:i,end:n.text&&i+n.text.length,children:[]},n);return o.innerText&&r(o),this.children.push(o),t(this,o),o},lastChild:function(){return this.children?this.children[this.children.length-1]||null:null},lastChildEnd:function(){var e=this.lastChild();return e?e.end:this.start+Math.max(0,this.text.indexOf(this.innerText))},tokenAt:function(e){if(e<this.start||e>=this.end)return null;if(this.childAt)return this.childAt[e]&&this.childAt[e].tokenAt(e)||this;if(this.children.length)for(var t=0;t<this.children.length;t+=1){var n=this.children[t].tokenAt(e);if(n)return n}return this},pathAt:function(e){if(e<this.start||e>=this.end)return[];if(this.childAt)return(this.childAt[e]&&this.childAt[e].pathAt(e)||[]).concat(this);var t=[];if(this.children.length)for(var n=0;n<this.children.length;n+=1){var r=this.children[n].pathAt(e);if(r.length){t.concat(r);break}}return t.concat(this)},nearestTokenAt:function(e){return e<this.start||e>=this.end?null:this.children?this.children.reduce(function(t,n){return t||(e>=n.start&&e<n.end?n:null)},null):this},everyLeaf:function(e){return this.children&&0!==this.children.length?this.children.reduce(function(t,n){return n.everyLeaf(e)&&t},!0):!!e(this)},isWhitespace:function(){return this.everyLeaf(function(e){return"whitespace"===e.type||!e.text.trim()})},isFrontToken:function(){return this.isFront},isBackToken:function(){return"matches"in this},demote:function(){this.type="text"},error:function(e){this.type="error",this.message=e},toString:function(){var e=this.type+"("+this.start+"\u2192"+this.end+")";return this.children&&this.children.length>0&&(e+="["+this.children+"]"),e}},o={lex:function(t,n){return r(new e({type:"root",start:n||0,end:t.length,text:t,innerText:t,children:[],childAt:{},innerMode:o.modes.start}))},rules:a,modes:{}},"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=o:"function"==typeof define&&define.amd?define("lexer",[],function(){return o}):this&&this.loaded?(this.modules||(this.modules={}),this.modules.Lexer=o):this.TwineLexer=o}.call(eval("this")||("undefined"!=typeof global?global:window)),function(){function e(t){return t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))?(Object.keys(t).forEach(function(n){t[n]=e(t[n])}),t):(t+"").replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function t(){return"[^"+Array.apply(0,arguments).map(e).join("")+"]*"}function n(e){return function(){return"("+e+Array.apply(0,arguments).join("|")+")"}}var r=void 0,i=n("?:"),o=n("?!"),a=n("?="),s="[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*",u=s.replace("*","+"),c="\\b",l="\\\\\\n\\\\?|\\n\\\\",f="\\n(?!\\\\)",p="[\\w\\-\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]",d=p.replace("\\-",""),h=i("\\n","$"),m="("+i(l,"[^\\n]")+"+)",g="\\*",y=s+"("+g+"+)"+u+m+h,v="(?:0\\.)",b=s+"("+v+"+)"+u+m+h,w=s+"-{3,}"+s+h,x=s+"(#{1,6})"+s+m+h,T=s+"(==+>|<=+|=+><=+|<==+>)"+s+h,S=s+"(=+\\|+|\\|+=+|=+\\|+=+|\\|=+\\|)"+s+h,O={opener:"\\[\\[(?!\\[)",text:"("+t("]")+")",rightSeparator:i("\\->","\\|"),leftSeparator:"<\\-",closer:"\\]\\]",legacySeparator:"\\|",legacyText:"("+i("[^\\|\\]]","\\]"+o("\\]"))+"+)"},j=d+"*"+d.replace("\\w","a-zA-Z")+d+"*",k="\\$("+j+")",C="'s"+u+"("+j+")",A="("+j+")"+u+"of"+c+o("it"+c),E="'s"+u,N="of"+c,_=i("it","time")+c,P="its"+u+"("+j+")",I="its"+u,M="("+j+")"+u+"of"+u+"it"+c,L="of"+c+u+"it"+c,F={opener:"\\(",name:"("+i(p+"+",k)+"):"+o("\\/"),closer:"\\)"},D="<<[^>\\s]+\\s*(?:\\\\.|'(?:[^'\\\\]*\\\\.)*[^'\\\\]*'|\"(?:[^\"\\\\]*\\\\.)*[^\"\\\\]*\"|[^'\"\\\\>]|>(?!>))*>>",q=i("=<","=>","[gl]te?"+c,"n?eq"+c,"isnot"+c,"are"+c,"x"+c),R={name:"[a-zA-Z][\\w\\-]*",attrs:"(?:\"[^\"]*\"|'[^']*'|[^'\">])*?"},H="\\|("+p+"+)(>|\\))",$="(<|\\()("+p+"+)\\|",B="_("+j+")"+c,V="\\b(\\d+(?:\\.\\d+)?(?:[eE][+\\-]?\\d+)?)"+o("m?s")+c;O.main=O.opener+i(O.text+O.rightSeparator,O.text.replace("*","*?")+O.leftSeparator)+O.text,r={upperLetter:"[A-Z\\u00c0-\\u00de\\u0150\\u0170]",lowerLetter:"[a-z0-9_\\-\\u00df-\\u00ff\\u0151\\u0171]",anyLetter:p,anyLetterStrict:d,whitespace:u,escapedLine:l,br:f,commentFront:"<!--",commentBack:"-->",tag:"<\\/?"+R.name+R.attrs+">",tagPeek:"<",scriptStyleTag:"<("+i("script","style")+")"+R.attrs+">[^]*?<\\/\\1>",scriptStyleTagOpener:"<",url:"("+i("https?","mailto","javascript","ftp","data")+":\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])",bullet:g,hr:w,heading:x,align:T,column:S,bulleted:y,numbered:b,strikeOpener:e("~~"),italicOpener:e("//"),boldOpener:e("''"),supOpener:e("^^"),strongFront:e("**"),strongBack:e("**"),emFront:e("*"),emBack:e("*"),verbatimOpener:"`+",collapsedFront:"{",collapsedBack:"}",hookAppendedFront:"\\[",hookPrependedFront:H+"\\[",hookFront:"\\[",hookBack:"\\]"+o($),hookAppendedBack:"\\]"+$,passageLink:O.main+O.closer,passageLinkPeek:"[[",legacyLink:O.opener+O.legacyText+O.legacySeparator+O.legacyText+O.closer,legacyLinkPeek:"[[",simpleLink:O.opener+O.legacyText+O.closer,simpleLinkPeek:"[[",macroFront:F.opener+a(F.name),macroFrontPeek:"(",macroName:F.name,groupingFront:"\\("+o(F.name),groupingFrontPeek:"(",groupingBack:"\\)",twine1Macro:D,twine1MacroPeek:"<<",property:C,propertyPeek:"'s",belongingProperty:A,possessiveOperator:E,belongingOperator:N,belongingOperatorPeek:"of",itsOperator:I,itsOperatorPeek:"its",belongingItOperator:L,belongingItOperatorPeek:"of",variable:k,variablePeek:"$",tempVariable:B,tempVariablePeek:"_",hookRef:"\\?("+p+"+)\\b",hookRefPeek:"?",cssTime:"(\\d+\\.?\\d*|\\d*\\.?\\d+)(m?s)"+c,colour:i(i("Red","Orange","Yellow","Lime","Green","Cyan","Aqua","Blue","Navy","Purple","Fuchsia","Magenta","White","Gray","Grey","Black"),"#[\\dA-Fa-f]{3}(?:[\\dA-Fa-f]{3})?"),number:V,boolean:i("true","false")+c,identifier:_,itsProperty:P,itsPropertyPeek:"its",belongingItProperty:M,escapedStringChar:"\\\\[^\\n]",singleStringOpener:"'",doubleStringOpener:'"',is:"is"+o(u+"not",u+"in",u+"<",u+">")+c,isNot:"is"+u+"not"+c,and:"and"+c,or:"or"+c,not:"not"+c,inequality:"((?:is(?:"+u+"not)?"+s+")*)("+i("<(?!=)","<=",">(?!=)",">=")+")",isIn:"is"+u+"in"+c,contains:"contains"+c,addition:e("+")+o("="),subtraction:e("-")+o("="),multiplication:e("*")+o("="),division:i("/","%")+o("="),comma:",",spread:"\\.\\.\\."+o("\\."),to:i("to"+c,"="),into:"into"+c,making:"making"+c,where:"where"+c,via:"via"+c,with:"with"+c,each:"each"+c,augmentedAssign:i("\\+","\\-","\\*","\\/","%")+"=",incorrectOperator:q},"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=r:"function"==typeof define&&define.amd?define("patterns",[],function(){return r}):this&&this.loaded?(this.modules||(this.modules={}),this.modules.Patterns=r):this.Patterns=r}.call(eval("this")||("undefined"!=typeof global?global:window)),function(){function e(e){function t(e){return e=e||"innerText",function(t){var n=t.reduceRight(function(e,t,n){return e||(n?t:"")},""),r={};return r[e]=n,r}}function r(e,t){var n={};return n[e]=t,function(){return{isFront:!0,matches:n,cannotCross:["verbatimOpener"]}}}function i(e,t){return Object.keys(t).forEach(function(n){var r=t[n].fn;t[n].fn=function(t){var i=r(t);return i.text||(i.text=t[0]),i.type||(i.type=n),i.innerMode||(i.innerMode=e),i}}),t}var o=Object.bind(0,null),a=[],s=[],u=i(a,{hr:{fn:o},bulleted:{fn:function(e){return{depth:e[1].length,innerText:e[2]}}},numbered:{fn:function(e){return{depth:e[1].length/2,innerText:e[2]}}},heading:{fn:function(e){return{depth:e[1].length,innerText:e[2]}}},align:{fn:function(e){var t=void 0,n=e[1],r=n.indexOf("><");return~r?(t=Math.round(r/(n.length-2)*50),25===t&&(t="center")):"<"===n[0]&&">"===n.slice(-1)?t="justify":n.indexOf(">")>-1?t="right":n.indexOf("<")>-1&&(t="left"),{align:t}}},column:{fn:function(e){var t=void 0,n=e[1],r=n.indexOf("|");return r&&r<n.length-1?t="center":"|"===n[0]&&"|"===n.slice(-1)?t="none":r===n.length-1?t="right":r||(t="left"),{column:t,width:/\|+/.exec(n)[0].length,marginLeft:/^=*/.exec(n)[0].length,marginRight:/=*$/.exec(n)[0].length}}}});Object.keys(u).forEach(function(e){u[e].canFollow=[null,"br","hr","bulleted","numbered","heading","align"],u[e].cannotFollow=["text"]});var c=i(a,{twine1Macro:{fn:function(){return{type:"error",message:"Harlowe macros use a different syntax to Twine 1 and SugarCube macros."}}},emBack:{fn:function(){return{matches:{emFront:"em"},cannotCross:["verbatimOpener"]}}},strongBack:{fn:function(){return{matches:{strongFront:"strong"},cannotCross:["verbatimOpener"]}}},strongFront:{fn:function(){return{isFront:!0}}},emFront:{fn:function(){return{isFront:!0}}},boldOpener:{fn:r("boldOpener","bold")},italicOpener:{fn:r("italicOpener","italic")},strikeOpener:{fn:r("strikeOpener","strike")},supOpener:{fn:r("supOpener","sup")},commentFront:{fn:function(){return{isFront:!0}}},commentBack:{fn:function(){return{matches:{commentFront:"comment"}}}},scriptStyleTag:{fn:o},tag:{fn:o},url:{fn:o},hookPrependedFront:{fn:function(e){return{name:e[1],hidden:")"===e[2],isFront:!0,tagPosition:"prepended"}}},hookFront:{fn:function(){return{isFront:!0}}},hookBack:{fn:function(){return{matches:{hookPrependedFront:"hook",hookFront:"hook"},cannotCross:["verbatimOpener"]}}},hookAppendedBack:{fn:function(e){return{name:e[2],hidden:"("===e[1],tagPosition:"appended",matches:{hookFront:"hook"},cannotCross:["verbatimOpener"]}}},verbatimOpener:{fn:function(e){var t=e[0].length,n={};return n["verbatim"+t]="verbatim",{type:"verbatim"+t,isFront:!0,matches:n}}},collapsedFront:{fn:function(){return{isFront:!0}}},collapsedBack:{fn:function(){return{matches:{collapsedFront:"collapsed"},cannotCross:["verbatimOpener"]}}},escapedLine:{fn:o},legacyLink:{fn:function(e){return{type:"twineLink",innerText:e[1],passage:e[2]}}},br:{fn:o}}),l=i(s,{macroFront:{fn:function(e){return{isFront:!0,name:e[1]}}},groupingBack:{fn:function(){return{matches:{groupingFront:"grouping",macroFront:"macro"},cannotCross:["singleStringOpener","doubleStringOpener"]}}},passageLink:{fn:function(e){var t=e[1],n=e[2],r=e[3];return{type:"twineLink",innerText:n?r:t,passage:t?r:n}}},simpleLink:{fn:function(e){return{type:"twineLink",innerText:e[1],passage:e[1]}}},variable:{fn:t("name")},tempVariable:{fn:t("name")}}),f=i(s,Object.assign({macroName:{canFollow:["macroFront"],fn:function(e){return e[2]?{isMethodCall:!0,innerText:e[2]}:{isMethodCall:!1}}},groupingFront:{fn:function(){return{isFront:!0}}},property:{fn:t("name"),canFollow:["variable","hookRef","property","tempVariable","colour","itsProperty","belongingItProperty","macro","grouping","string","boolean","number"]},possessiveOperator:{
fn:o},itsProperty:{cannotFollow:["text"],fn:t("name")},itsOperator:{cannotFollow:["text"],fn:o},belongingItProperty:{cannotFollow:["text"],fn:t("name")},belongingItOperator:{cannotFollow:["text"],fn:o},belongingProperty:{cannotFollow:["text"],fn:t("name")},belongingOperator:{cannotFollow:["text"],fn:o},escapedStringChar:{fn:function(){return{type:"text"}}},singleStringOpener:{fn:function(){return{isFront:!0,matches:{singleStringOpener:"string"}}}},doubleStringOpener:{fn:function(){return{isFront:!0,matches:{doubleStringOpener:"string"}}}},hookRef:{fn:t("name")},cssTime:{fn:function(e){return{value:+e[1]*("s"===e[2].toLowerCase()?1e3:1)}}},colour:{cannotFollow:["text"],fn:function(e){var t,n=e[0].toLowerCase(),r={red:"e61919",orange:"e68019",yellow:"e5e619",lime:"80e619",green:"19e619",cyan:"19e5e6",aqua:"19e5e6",blue:"197fe6",navy:"1919e6",purple:"7f19e6",fuchsia:"e619e5",magenta:"e619e5",white:"fff",black:"000",gray:"888",grey:"888"};return t=Object.hasOwnProperty.call(r,n)?"#"+r[n]:n,{colour:t}}},number:{fn:function(e){return{value:parseFloat(e[0])}}},addition:{fn:o},subtraction:{fn:o},multiplication:{fn:o},division:{fn:o},inequality:{fn:function(e){return{operator:e[2],negate:e[1].indexOf("not")>-1}}},augmentedAssign:{fn:function(e){return{operator:e[0][0]}}},identifier:{fn:t("name"),cannotFollow:["text"]},whitespace:{fn:o,cannotFollow:"text"},incorrectOperator:{fn:function(e){var t={"=>":">=","=<":"<=",gte:">=",lte:"<=",gt:">",lt:"<",eq:"is",isnot:"is not",neq:"is not",are:"is",x:"*"}[e[0].toLowerCase()];return{type:"error",message:"Please say "+(t?"'"+t+"'":"something else")+" instead of '"+e[0]+"'."}},cannotFollow:"text"}},["boolean","is","to","into","where","via","with","making","each","and","or","not","isNot","contains","isIn"].reduce(function(e,t){return e[t]={fn:o,cannotFollow:["text"]},e},{}),["comma","spread","addition","subtraction","multiplication","division"].reduce(function(e,t){return e[t]={fn:o},e},{})));a.push.apply(a,_toConsumableArray(Object.keys(u)).concat(_toConsumableArray(Object.keys(l)),_toConsumableArray(Object.keys(c)))),s.push.apply(s,_toConsumableArray(Object.keys(l)).concat(_toConsumableArray(Object.keys(f))));var p=Object.assign({},u,c,l,f);return Object.keys(p).forEach(function(e){var t=n[e];p[e].pattern="string"!=typeof t?t:new RegExp("^(?:"+t+")","i"),n[e+"Peek"]&&(p[e].peek=n[e+"Peek"])}),Object.assign(e.rules,p),e.modes.start=e.modes.markup=a,e.modes.macro=s,e}function t(t){return Object.freeze({lex:e(t).lex,Patterns:n})}var n=void 0;Object.assign=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},"object"===("undefined"==typeof module?"undefined":_typeof(module))?(n=require("./patterns"),module.exports=t(require("./lexer"))):"function"==typeof define&&define.amd?define("markup",["lexer","patterns"],function(e,r){return n=r,t(e)}):this&&this.loaded&&this.modules?(n=this.modules.Patterns,this.modules.Markup=t(this.modules.Lexer)):(n=this.Patterns,this.TwineMarkup=t(this.TwineLexer))}.call(eval("this")||("undefined"!=typeof global?global:window)),define("utils/selectors",[],function(){return Object.freeze({passage:"tw-passage",story:"tw-story",sidebar:"tw-sidebar",internalLink:"tw-link",brokenLink:"tw-broken-link",hook:"tw-hook",enchantment:"tw-enchantment",expression:"tw-expression",script:"[role=script]",stylesheet:"[role=stylesheet]",storyData:"tw-storydata",passageData:"tw-passagedata",collapsed:"tw-collapsed"})}),define("utils/polyfills",[],function(){var e=Array.prototype;"function"!=typeof e.includes&&(e.includes=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Number.isNaN(t)&&Number.isFinite(n)&&"undefined"!=typeof t)return e.indexOf.call(this,t,n)>-1;var r=Object(this),i=parseInt(r.length);if(0>=i)return!1;for(var o=n>=0?n:Math.max(0,i+n);i>o;){if(Object.is(t,r[o]))return!0;o+=1}return!1})}),define("utils",["jquery","markup","utils/selectors","utils/polyfills"],function(e,t,n){function r(t,n){var r=o[n];if(!r[t]){var i=e("<p>").appendTo(document.body).attr("data-t8n",t).addClass(n);r[t]=c.cssTimeUnit(i.css("animation-duration"))+c.cssTimeUnit(i.css("animation-delay")),i.remove()}return r[t]}var i={configurable:0,writable:0},o={"transition-in":Object.create(null),"transition-out":Object.create(null)},a="audio,blockquote,canvas,div,h1,h2,h3,h4,h5,hr,ol,p,pre,table,ul,video,tw-align,tw-story,tw-passage".split(","),s="a,b,i,em,strong,sup,sub,abbr,acronym,s,strike,del,big,small,script,img,button,input,tw-link,tw-broken-link,tw-verbatim,tw-collapsed,tw-error".split(","),u=["audio"],c=void 0,l=void 0;return c={lockProperty:function(e,t,n){var r=Object.create(i);return n&&(r.value=n),Object.defineProperty(e,t,r),e},toJSLiteral:function(e){return e instanceof Map?"(new Map("+c.toJSLiteral([].concat(_toConsumableArray(e.entries())))+"))":e instanceof Set?"(new Set("+c.toJSLiteral([].concat(_toConsumableArray(e.values())))+"))":JSON.stringify(e)},cssTimeUnit:function(e){return e=e.toLowerCase(),"ms"===e.slice(-2)?+e.slice(0,-2)||0:"s"===e.slice(-1)?1e3*+e.slice(0,-1)||0:0},nth:function(e){var t=(+e+"").slice(-1);return e+("1"===t?"st":"2"===t?"nd":"3"===t?"rd":"th")},plural:function(e,t){return e+" "+t+(e>1?"s":"")},andList:function(e){return 1===e.length?e[0]:e.slice(0,-1).join(", ")+" and "+e[e.length-1]},realWhitespace:"[ \\n\\r\\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]",anyRealLetter:"[\\dA-Za-z\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]",unescape:function(e){return e.replace(/&(?:amp|lt|gt|quot|nbsp|zwnj|#39|#96);/g,function(e){return{"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'","&nbsp;":String.fromCharCode(160),"&zwnj;":String.fromCharCode(8204)}[e]})},escape:function(e){return e.replace(/[&><"']/g,function(e){return{"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"}[e]})},insensitiveName:function(e){return(e+"").toLowerCase().replace(/-|_/g,"")},childrenProbablyInline:function(e){var t=[];return Array.prototype.every.call(e.find("*"),function(e){return e.hidden||/none|inline/.test(e.style.display)?!0:a.includes(e.tagName.toLowerCase())||/none|inline/.test(e.style.display)?!1:s.includes(e.tagName.toLowerCase())?!0:(t.push(e),!0)})&&t.every(function(e){return/none|inline/.test(e.style.display)})},transitionReplace:function(t,r,i){var o=t.closest(n.hook);o.length>0&&(t=o);var a=e("<tw-transition-container>").css("position","relative");a.insertBefore(t.first());var s=void 0;r&&(s=e("<tw-transition-container>").appendTo(a),r.appendTo(s));var u=e("<tw-transition-container>").css("position","absolute").prependTo(a);t.detach().appendTo(u),c.transitionOut(u,i),r&&c.transitionIn(s,i,function(){s.unwrap().children().first().unwrap()})},transitionOut:function(e,t,n){function i(){e.remove()}var o=c.childrenProbablyInline(e),a=e.length>1||!o||!["tw-hook","tw-passage"].includes(e.tag());a&&(e=e.wrapAll("<tw-transition-container>").parent()),e.attr("data-t8n",t).addClass("transition-out"),c.childrenProbablyInline(e)&&e.css("display","inline-block"),"number"==typeof n&&e.css("animation-duration",n+"ms");var s=n||r(t,"transition-out");s?window.setTimeout(i,s):i()},transitionIn:function(e,t,n){function i(){var t=0===e.findAndFilter(u.join(",")).length;a&&t?e.contents().unwrap():e.removeClass("transition-in").removeAttr("data-t8n")}var o=c.childrenProbablyInline(e),a=e.length>1||!o||!["tw-hook","tw-passage"].includes(e.tag());a&&(e=e.wrapAll("<tw-transition-container>").parent()),e.attr("data-t8n",t).addClass("transition-in"),"number"==typeof n&&e.css("animation-duration",n+"ms"),c.childrenProbablyInline(e)&&e.css("display","inline-block");var s=n||r(t,"transition-in");s?window.setTimeout(i,s):i()},$:function(t,n){return e(t,n||c.storyElement).not(".transition-out, .transition-out *")},impossible:function(e,t){window.console&&console.error(e+"(): "+t)},assertMustHave:function(e,t){if(window.console)for(var n=0;n<t.length;n+=1)t[n]in e||console.error("Assertion failed: object lacks property "+t[n])},assertOnlyHas:function(e,t){if(window.console)for(var n in e)t.includes(n)||console.error("Assertion failed: object had unexpected property '"+n+"'!")},get storyElement(){return l}},e(function(){return l=e(n.story)}),Object.freeze(c)}),define("passages",["jquery","utils","utils/selectors"],function(e,t,n){function r(e){return Object.assign(new Map([["source",i(e.html())],["tags",(e.attr("tags")||"").split(/\s/)||[]],["name",e.attr("name")]]),{TwineScript_TypeName:"passage datamap",TwineScript_ObjectName:"a passage datamap"})}var i=t.unescape,o=Object.assign(new Map,{TwineScript_ObjectName:"the Passages datamap",getTagged:function(e){var t=[];return this.forEach(function(n){var r=n instanceof Map&&n.get("tags");Array.isArray(r)&&r.includes(e)&&t.push(n)}),t.sort(function(e,t){return e.get("name")>t.get("name")})},create:r});return e(function(){Array.from(e(n.storyData+" > "+n.passageData)).forEach(function(t){t=e(t),o.set(t.attr("name"),new r(t))})}),o}),define("datatypes/hookset",["jquery","utils","utils/selectors","markup"],function(e,t,n,r){function i(e,t,n){var r=e.textContent.length;if(!(t>=r)){var i=void 0,o=[i=0===t?e:e.splitText(t)];return n&&(0>=n&&(n=r-n),r>n&&o.push(i.splitText(n-t))),o}}function o(e,t){var n=[],r="",a=[];if(!e.length||!t)return a;for(;e.length>0;){n.push(e[0]),r+=e[0].textContent,e.shift();var s=r.indexOf(t);if(s>-1){for(var u,c=r.length-(s+t.length);s>=n[0].textContent.length;)s-=n[0].textContent.length,n.shift();if(1===n.length){var l=i(n[0],s,s+t.length);a.push(l[0]),l[1]&&e.unshift(l[1]);break}a.push(i(n[0],s,n[0].length)[0]),(u=a).push.apply(u,_toConsumableArray(n.slice(1,-1)));var f=i(n[n.length-1],0,n[n.length-1].textContent.length-c);a.push(f[0]),f[1]&&e.unshift(f[1]),a=a.filter(Boolean);break}}return[a].concat(_toConsumableArray(o(e,t)))}function a(t,n,r){var i=o(n.textNodes(),t),a=e();return i.forEach(function(t){a=a.add(e(t).wrapAll(r))}),a.parent()}function s(e){e=t.insensitiveName(e).replace(/\?/g,"").replace(/"/g,"&quot;");var r=n.hook+'[name="'+e+'"]';return r+={page:", tw-story",passage:", tw-passage",sidebar:", tw-sidebar",link:", tw-link, .enchantment-link"}[e]||""}function u(n){var r=n.dom,i=e();this.prev&&(i=i.add(u.call(this.prev,{dom:r})));var o=function(t,n){return Array.isArray(n)?n.reduce(function(e,n){return e.add(t.get(n))},e()):e(t.get(n))};if(this.selector){var c=void 0;c=this.selector.match("^"+f.hookRef+"$")?r.add(r.parentsUntil(t.storyElement.parent())).findAndFilter(s(this.selector)):a(this.selector,r,"<tw-pseudo-hook>"),i=i.add(this.properties.length?this.properties.reduce(o,c):c)}return this.base&&(i=i.add(this.properties.reduce(o,u.call(this.base,{dom:r})))),i}function c(e){var n=e.dom;t.$("tw-pseudo-hook",n).contents().unwrap().parent().each(function(){this.normalize()})}function l(e){if(!e)return[];var n=e.selector,r=e.base,i=e.properties,o=e.prev;return[JSON.stringify([t.insensitiveName(n)||"",l(r),[].concat(_toConsumableArray(i)).sort()])].concat(_toConsumableArray(l(o))).sort()}var f=r.Patterns,p=Object.freeze({forEach:function(t,n){var r=u.call(this,t).each(function(t){n(e(this),t)});return c.call(this,t),r},get TwineScript_ObjectName(){return this.properties.length>0||this.prev?"a complex hook name":this.selector+" (a hook name)"},TwineScript_TypeName:"a hook name (like ?this)",TwineScript_Unstorable:!0,"TwineScript_+":function(e){var t=e.TwineScript_Clone();return t.prev=this,t},TwineScript_is:function(e){return l(this)+""==l(e)+""},TwineScript_GetElement:function(e){return p.create(void 0,this,[e],void 0)},TwineScript_Clone:function(){return p.create(this.selector,this.base,this.properties,this.prev)},create:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return Object.assign(Object.create(this||p),{selector:e,base:t,properties:n,prev:r})},from:function(e){return p.isPrototypeOf(e)?e:p.create(e)}});return p}),define("internaltypes/twineerror",["jquery","utils"],function(e,t){var n=t.impossible,r=t.escape,i={syntax:"The markup seems to contain a mistake.",saving:"I tried to save or load the game, but I couldn't do it.",operation:"I tried to perform an operation on some data, but the data's type was incorrect.",macrocall:"I tried to use a macro, but its call wasn't written correctly.",datatype:"I tried to use a macro, but was given the wrong type of data to it.",keyword:"I was given a keyword in a way that I didn't understand.",infinite:"I almost ended up doing the same thing over and over, forever.",property:"I tried to access a value in a string/array/datamap, but I couldn't find it.",unimplemented:"I currently don't have this particular feature. I'm sorry.",javascript:"This error message was reported by your browser's Javascript engine. I don't understand it either, but it usually means that an expression was badly written."},o={create:function(e,t,r){return t||n("TwineError.create","called with only 1 string."),r||e in i||n("TwineError.create","no error explanation given"),Object.assign(Object.create(this),{type:e,message:t,explanation:r})},fromError:function(e){return o.create("javascript","\u2615 "+e.message)},containsError:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return t.reduce(function(e,t){return e?e:t instanceof Error?t:o.isPrototypeOf(t)?t:Array.isArray(t)?o.containsError.apply(o,_toConsumableArray(t)):!1},!1)},createWarning:function(e,t){return Object.assign(this.create(e,t),{warning:!0})},render:function(t){t=t||"";var n=e("<tw-error class='"+("javascript"===this.type?"javascript ":"")+(this.warning?"warning":"error")+"' title='"+r(t)+"'>"+r(this.message)+"</tw-error>"),o=e("<tw-error-explanation>").text(this.explanation||i[this.type]).hide(),a=e("<tw-error-explanation-button tabindex=0>").html("<span class='folddown-arrowhead'>&#9658;</span>");return a.on("click",function(){o.toggle(),a.children(".folddown-arrowhead").css("transform","rotate("+(o.is(":visible")?"90deg":"0deg")+")")}),n.append(a).append(o),n}};return o}),define("utils/operationutils",["utils","datatypes/hookset","internaltypes/twineerror"],function(e,t,n){function r(e){return!!e&&("object"===("undefined"==typeof e?"undefined":_typeof(e))||"function"==typeof e)}function i(e){return Array.isArray(e)?"array":e instanceof Map?"datamap":e instanceof Set?"dataset":"string"==typeof e?"string":e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))?"object":""}function o(e,t){if(e instanceof Map||g("isValidDatamapName","called with non-Map"),"string"!=typeof t&&"number"!=typeof t)return n.create("property","Only strings and numbers can be used as data names for "+l(e)+", not "+l(t)+".");var r="string"==typeof t?+t:""+t;return!Number.isNaN(r)&&e.has(r)?n.create("property","You mustn't use both "+l(t)+" and "+l(r)+" as data names in the same datamap."):!0}function a(e,t){if(null===t)return void 0===e;if(t.innerType){if("optional"===t.pattern||"zero or more"===t.pattern)return void 0===e?!0:a(e,t.innerType);if("either"===t.pattern)return t.innerType.some(function(t){return a(e,t)});if("lambda"===t.pattern&&a(e,t.innerType))return"string"!=typeof t.clauses&&g("singleTypeCheck","lambda signature had non-string clauses"),t.clauses.includes("where")==="where"in e&&t.clauses.includes("making")==="making"in e&&t.clauses.includes("via")==="via"in e&&t.clauses.includes("with")==="with"in e;if("wrapped"===t.pattern)return a(e,t.innerType)}return void 0!==t&&void 0===e?!1:"anything"!==t.TwineScript_TypeName||void 0===e||e.TwineScript_Unstorable?t===String?"string"==typeof e:t===Boolean?"boolean"==typeof e:t===parseInt?"number"==typeof e&&!Number.isNaN(e)&&!(e+"").includes("."):t===Number?"number"==typeof e&&!Number.isNaN(e):t===Array?Array.isArray(e):t===Map||t===Set?e instanceof t:Object.isPrototypeOf.call(t,e):!0}function s(e){return"string"==typeof e||Array.isArray(e)||t.isPrototypeOf(e)}function u(e){if(!r(e))return e;if("function"==typeof e.TwineScript_Clone)return e.TwineScript_Clone();if(Array.isArray(e))return[].concat(_toConsumableArray(e));if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if("function"==typeof e)return Object.assign(e.bind(),e);switch(Object.getPrototypeOf(e)){case Object.prototype:return Object.assign({},e);case null:return Object.assign(Object.create(null),e)}return g("OperationUtils.clone","The value "+(e.toSource?e.toSource():e)+" cannot be cloned!"),e}function c(e,t,n){return"string"==typeof t&&r(n)&&"TwineScript_ToString"in n?e(t,n.TwineScript_ToString()):"string"==typeof n&&r(t)&&"TwineScript_ToString"in t?e(t.TwineScript_ToString(),n):!1}function l(e){return r(e)&&"TwineScript_ObjectName"in e?e.TwineScript_ObjectName:Array.isArray(e)?"an array":e instanceof Map?"a datamap":e instanceof Set?"a dataset":"boolean"==typeof e?"the boolean value '"+e+"'":"string"==typeof e||"number"==typeof e?"the "+("undefined"==typeof e?"undefined":_typeof(e))+" "+y(e):void 0===e?"an empty variable":"...whatever this is"}function f(e){return e.innerType?"either"===e.pattern?(Array.isArray(e.innerType)||g("typeName",'"either" pattern had non-array inner type'),e.innerType.map(f).join(" or ")):"optional"===e.pattern?"(an optional) "+f(e.innerType):f(e.innerType):e===String||e===Number||e===Boolean?"a "+_typeof(e()):e===parseInt?"a non-fractional number":e===Map?"a datamap":e===Set?"a dataset":e===Array?"an array":r(e)&&"TwineScript_TypeName"in e?e.TwineScript_TypeName:l(e)}function p(e,t){return"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"object"!==("undefined"==typeof t?"undefined":_typeof(t))?e===t:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:e.every(function(e,n){return p(t[n],e)}):e instanceof Map&&t instanceof Map?p(Array.from(e.entries()).sort(),Array.from(t.entries()).sort()):e instanceof Set&&t instanceof Set?p([].concat(_toConsumableArray(e)),[].concat(_toConsumableArray(t))):e&&"function"==typeof e.TwineScript_is?e.TwineScript_is(t):e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype?p(Object.getOwnPropertyNames(e).map(function(t){return[t,e[t]]}),Object.getOwnPropertyNames(t).map(function(e){return[e,t[e]]})):Object.is(e,t)}function d(e,t){if(e){if("string"==typeof e)return e.includes(t);if(Array.isArray(e))return e.some(function(e){return p(e,t)});if(e instanceof Set||e instanceof Map)return Array.from(e.keys()).some(function(e){return p(e,t)})}return n.create("operation",l(e)+" cannot contain any values, let alone "+l(t))}function h(e,t,r){if(!t||!r)return n.create("macrocall","The sub"+i(e)+" index values must not be 0 or NaN.");if(0>t&&(t=e.length+t+1),0>r&&(r=e.length+r+1),t>r)return h(e,r,t);var o="string"==typeof e;o&&(e=Array.from(e));var a=e.slice(t>0?t-1:t,r).map(u);return o?a.join(""):a}function m(e){return n.containsError(e)?e:e&&"function"==typeof e.TwineScript_Print?e.TwineScript_Print():e instanceof Map?(e=Array.from(e.entries()),n.containsError(e)?e:e.reduce(function(e,t){var n=_slicedToArray(t,2),r=n[0],i=n[1];return e+"<tr><td>`"+m(r)+"`</td><td>`"+m(i)+"`</td></tr>"},"<table class=datamap>")+"</table>"):e instanceof Set?Array.from(e.values()).map(m)+"":Array.isArray(e)?e.map(m)+"":r(e)?n.create("unimplemented","I don't know how to print this value yet."):e+""}var g=e.impossible,y=e.toJSLiteral,v=Object.freeze({isObject:r,singleTypeCheck:a,isValidDatamapName:o,collectionType:i,isSequential:s,clone:u,coerceToString:c,objectName:l,typeName:f,is:p,contains:d,subset:h,printBuiltinValue:m,numericIndex:/^(?:[1-9]\d*|0)$/,unique:function(e,t,n){return!n.slice(t+1).some(function(t){return p(e,t)})}});return v}),define("twinescript/compiler",["utils"],function(e){function t(e,t){for(var n=0;n<e.length;n+=1)if(t.includes(e[n].type))return n;return 0/0}function n(e,n){return e.length-1-t.apply(void 0,[[].concat(_toConsumableArray(e)).reverse(),n])}function r(e,r){var i=[];return e.length?([["error"],["comma"],["spread"],["to"],["into"],{rightAssociative:["where","via"]},{rightAssociative:["with","making","each"]},["augmentedAssign"],["and","or"],["is","isNot"],["contains","isIn"],["inequality"],["addition","subtraction"],["multiplication","division"],["not"],["belongingProperty"],["belongingOperator","belongingItOperator"],{rightAssociative:["property"]},{rightAssociative:["itsProperty"]},["belongingItProperty"],{rightAssociative:["possessiveOperator","itsOperator"]},["twineLink"],["macro"],["grouping"]]["most"===r?"reverse":"valueOf"]().some(function(r){var o=void 0;return o=r.rightAssociative?n(e,r.rightAssociative):t(e,r),!Number.isNaN(o)&&o>-1?(i=[e[o],o],!0):void 0}),i):i}function i(e){if("inequality"===e.type){var t=e.operator;return e.negate?{">":"<=","<":">=",">=":"<","<=":">"}[t]:t}return e.type}function o(e){var t=i(e);return{">":"<","<":">",">=":"<=","<=":">=",contains:"isIn",isIn:"contains",is:"isNot",isNot:"is"}[t]}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isVarRef,c=t.whitespaceError,l=t.elidedComparison;if(e=[].concat(e),!e.length)return n&&c?"TwineError.create('operation',"+s(c)+")":"";var f=e[0];if(1===e.length){if("identifier"===f.type)return n?"VarRef.create(Operations.Identifiers,"+s(f.text)+")":" Operations.Identifiers."+f.text.toLowerCase()+" ";if("variable"===f.type)return"VarRef.create(State.variables,"+s(f.name)+")"+(n?"":".get()");if("tempVariable"===f.type)return"VarRef.create(section.stack[0].tempVariables,"+s(f.name)+")"+(n?"":".get()");if("hookRef"===f.type)return" HookSet.create('?"+f.name+"') ";if("string"===f.type)return f.text.replace(/\n/g,"\\n");if("colour"===f.type)return"Colour.create("+s(f.colour)+")";if("root"===f.type)return a(f.children);if("whitespace"===f.type&&n&&c)return"TwineError.create('operation',"+s(c)+")"}var p=void 0,d=r(e,"least"),h=_slicedToArray(d,2);f=h[0],p=h[1];var m=(f||{}).type,g=function(e){return{isVarRef:!0,whitespaceError:"I need usable data to be on the "+e+' of "'+f.text+'".'}},y=void 0,v=void 0,b=void 0,w=void 0,x=void 0,T=void 0,S=!0,O=!0,j=!1;if(m){if("error"===m)return"TwineError.create('syntax',"+s(f.message)+")";if("comma"===m)b=",",O=!1;else if("spread"===m)b="Operations.makeSpreader(",v=a(e.slice(p+1))+")",S=!1;else if("to"===m)x="to",v=a(e.slice(p+1),g("right")),y="Operations.setIt("+a(e.slice(0,p),g("left"))+")";else if("into"===m)x="into",v=a(e.slice(0,p),g("left")),y="Operations.setIt("+a(e.slice(p+1),g("right"))+")";else if("where"===m||"via"===m)y="Lambda.create("+(a(e.slice(0,p),{isVarRef:!0,whitespaceError:null}).trim()||"undefined")+",",b=s(f.type)+",",v=s(a(e.slice(p+1)))+")";else if("with"===m||"making"===m||"each"===m){var k=e.slice(p+1);![2,3].includes(k.length)||"whitespace"!==k[0].type||"tempVariable"!==k[1].type||k[2]&&"whitespace"!==k[2].type?(y="TwineError.create('operation','I need a temporary variable to the right of \\'",b=f.type,v="\\'.')"):"each"===m?(y="Lambda.create(",b=a(k,g("right")).trim(),v=",'where','true')"):(y="Lambda.create("+(a(e.slice(0,p),{isVarRef:!0,whitespaceError:null}).trim()||"undefined")+",",b=s(f.type)+",",v=s(k[1].name)+")")}else if("augmentedAssign"===m)x=f.operator,y=a(e.slice(0,p),g("left")),v="Operations['"+x+"']("+(a(e.slice(0,p))+","+a(e.slice(p+1)))+")";else if("and"===m||"or"===m){var C=function(){var t=function e(t){var n=r(t,"least"),i=_slicedToArray(n,2),o=i[0],a=i[1];if(o)return["inequality","is","isNot","isIn","contains"].includes(o.type)?o:["and","or"].includes(o.type)?e(t.slice(0,a))||e(t.slice(a+1)):void 0},u=t(e.slice(0,p)),c=t(e.slice(p+1)),d="TwineError.create('operation', 'This use of \"is not\" and \""+m+"\" is grammatically ambiguous','Maybe try rewriting this as \"__ is not __ "+m+" __ is not __\"') ";if(w=f.type,l===f.type)w="",y=a(e.slice(0,p),{isVarRef:n,elidedComparison:l}).trim(),b=",",v=a(e.slice(p+1),{elidedComparison:l}).trim();else if(u&&!c){var h=r(e.slice(0,p),"least"),g=_slicedToArray(h,1),x=g[0],T=s(i(x));if("isNot"===x.type)return{v:d};v="Operations.elidedComparisonOperator("+s(f.type)+","+T+","+a(e.slice(p+1),{elidedComparison:m})+")"}else if(!u&&c){var S=c,O=e.indexOf(S),j=s(o(S));if("isNot"===S.type)return{v:d};v="Operations.elidedComparisonOperator("+s(f.type)+","+j+","+a(e.slice(0,p),{elidedComparison:m})+")",y=a([].concat(_toConsumableArray(e.slice(O+1)),[Object.assign(Object.create(S),_defineProperty({},"inequality"===S.type?"operator":"type",o(S)))],_toConsumableArray(e.slice(p+1,O))))}}();if("object"===("undefined"==typeof C?"undefined":_typeof(C)))return C.v}else if("is"===m||"isNot"===m||"contains"===m||"isIn"===m||"inequality"===m)j=!0,w=i(f);else if("addition"===m||"subtraction"===m)w=f.text,y=a(e.slice(0,p)),y.trim()||(y="0");else if("multiplication"===m||"division"===m)w=f.text;else if("not"===m)b=" ",v="Operations.not("+a(e.slice(p+1))+")",S=!1;else if("belongingProperty"===m)v="VarRef.create("+a(e.slice(p+1),g("right"))+","+s(f.name)+")"+(n?"":".get()"),b=" ",S=O=!1;else if("belongingOperator"===m||"belongingItOperator"===m)f.type.includes("It")?(v="Operations.Identifiers.it",O=!1):v=a(e.slice(p+1),g("right")),T="belonging";else if("property"===m)y="VarRef.create("+a(e.slice(0,p),g("left"))+","+s(f.name)+")"+(n?"":".get()"),b=" ",S=O=!1;else if("itsProperty"===m||"belongingItProperty"===m)y="VarRef.create(Operations.Identifiers.it,"+s(f.name)+").get()",b=" ",S=O=!1;else if("possessiveOperator"===m||"itsOperator"===m)f.type.includes("it")&&(y="Operations.Identifiers.it",S=!1),T="possessive";else if("twineLink"===m)b='Macros.run("link-goto", [section,'+s(f.innerText)+","+s(f.passage)+"])",S=O=!1;else if("macro"===m){var A=f.children[0];"macroName"!==A.type&&u("Compiler.compile","macro token had no macroName child token"),b="Macros.run("+(A.isMethodCall?a(A.children):'"'+f.name+'"')+", [section,"+a(f.children.slice(1))+"])",S=O=!1}else"grouping"===m&&(b="("+a(f.children,{isVarRef:n})+")",S=O=!1)}else;return p>-1?(w&&(n=!1),y=y||a(e.slice(0,p),{isVarRef:n}).trim(),v=v||a(e.slice(p+1)).trim(),j&&!y&&(y=" Operations.Identifiers.it "),S&&!y||O&&!v?"TwineError.create('operation','I need some code to be "+(S?"left ":"")+(S&&O?"and ":"")+(O?"right ":"")+'of "'+f.text+"\"')":b?y+b+v:x?"Operations.makeAssignmentRequest("+[y,v,s(x)]+")":T?"VarRef.create("+("belonging"===T?v:y)+",{computed:true,value:"+("belonging"===T?y:v)+"})"+(n?"":".get()"):w?" Operations["+s(w)+"]("+y+","+v+") ":""):1===e.length?(("value"in e[0]?e[0].value:e[0].text)+"").trim()||" ":e.reduce(function(e,t){return e+a(t,{isVarRef:n})},"")}var s=e.toJSLiteral,u=e.impossible;return a}),define("renderer",["utils","markup","twinescript/compiler","internaltypes/twineerror"],function(e,t,n,r){function i(e,t){return"<"+t+">"+e+"</"+t+">"}function o(e,t){var n=l.render(e.children);return n&&i(n,t)}var a=e.escape,s=e.impossible,u=e.toJSLiteral,c=e.insensitiveName,l=void 0,f="text-align: center; max-width:50%; ";return l={options:{},exec:function(){var e=void 0,n=void 0;return function(r){return"string"!=typeof r?(s("Renderer.exec","source was not a string, but "+("undefined"==typeof r?"undefined":_typeof(r))),""):r===e?n:(e=r,n=l.render(t.lex(r).children))}}(),render:function e(s){var p="",d=[];if(!s)return p;for(var h=s.length,m=0;h>m;m+=1){var g=s[m];switch(g.type){case"error":p+=r.create("syntax",g.message).render(a(g.text))[0].outerHTML;break;case"numbered":case"bulleted":var y="numbered"===g.type?"ol":"ul";p+="<"+y+">";for(var v=1;h>m&&s[m]&&s[m].type===g.type;)p+=("<"+y+">").repeat(Math.max(0,s[m].depth-v)),p+=("</"+y+">").repeat(Math.max(0,v-s[m].depth)),v=s[m].depth,p+=o(s[m],"li"),m+=1;m-=1,p+=("</"+y+">").repeat(v+1);break;case"align":for(;g&&"align"===g.type;){var b=g,w=b.align,x=m+=1;if("left"===w){m-=1;break}for(;h>m&&s[m]&&"align"!==s[m].type;)m+=1;var T=e(s.slice(x,m)),S="";switch(w){case"center":S+=f+"margin-left: auto; margin-right: auto;";break;case"justify":case"right":S+="text-align: "+w+";";break;default:+w&&(S+=f+"margin-left: "+w+"%;")}p+="<tw-align "+(S?'style="'+S+'"':"")+(l.options.debug?' title="'+g.text+'"':"")+">"+T+"</tw-align>\n",g=s[m]}break;case"column":for(var O=[];g&&"column"===g.type;){var j=g,k=j.column,C=m+=1;if("none"===k){m-=1;break}for(;h>m&&s[m]&&"column"!==s[m].type;)m+=1;O.push({text:g.text,type:k,body:e(s.slice(C,m)),width:g.width,marginLeft:g.marginLeft,marginRight:g.marginRight}),g=s[m]}O.length&&!function(){var e=O.reduce(function(e,t){return e+t.width},0);p+="<tw-columns>"+O.map(function(t){return"<tw-column type="+t.type+'  style="width:'+t.width/e*100+"%; margin-left: "+t.marginLeft+"em; margin-right: "+t.marginRight+'em;" '+(l.options.debug?' title="'+t.text+'"':"")+">"+t.body+"</tw-column>\n"}).join("")+"</tw-columns>"}();break;case"heading":p+=o(g,"h"+g.depth);break;case"br":(!d.length||/td|th/.test(d[0]))&&(p+="<br>");break;case"hr":p+="<hr>";break;case"escapedLine":case"comment":break;case"inlineUrl":p+='<a class="link" href="'+a(g.text)+'">'+g.text+"</a>";break;case"scriptStyleTag":case"tag":var A=g.text.toLowerCase();/^<\/?(?:table|thead|tbody|tr|tfoot|td|th)\b/.test(A)&&d[g.text.startsWith("</")?"shift":"unshift"](A),p+=g.text.startsWith("</")?g.text:g.text.replace(/>$/," data-raw>");break;case"sub":case"sup":case"strong":case"em":p+=o(g,g.type);break;case"strike":p+=o(g,"s");break;case"bold":p+=o(g,"b");break;case"italic":p+=o(g,"i");break;case"twineLink":var E=t.lex("(link-goto:"+u(g.innerText)+","+u(g.passage)+")");p+=e(E.children);break;case"hook":p+="<tw-hook "+(g.hidden?"hidden ":"")+(g.name?'name="'+c(g.name)+'"':"")+(l.options.debug&&g.name?' title="Hook: ?'+g.name+'"':"")+' source="'+a(g.innerText)+'"></tw-hook>';break;case"verbatim":p+=i(a(g.innerText).replace(/\n/g,"<br>"),"tw-verbatim");break;case"collapsed":p+=o(g,"tw-collapsed");break;case"variable":case"tempVariable":case"macro":p+='<tw-expression type="'+g.type+'" name="'+a(g.name||g.text)+'"'+(l.options.debug?' title="'+a(g.text)+'"':"")+' js="'+a(n(g))+'"></tw-expression>';break;default:p+=g.children&&g.children.length?e(g.children):g.text}}return p}},Object.freeze(l)}),define("internaltypes/changedescriptor",["jquery","utils","renderer","datatypes/hookset"],function(e,t,n,r){var i=t.assertOnlyHas,o=t.impossible,a=t.transitionIn,s=n.exec,u=void 0,c={source:"",innerSource:"",enabled:!0,target:null,append:"append",newTargets:null,transition:"instant",transitionTime:null,loopVars:null,styles:null,attr:null,data:null,section:null,summary:function(){var e=this;return["source","innerSource","enabled","target","append","newTargets","transition","transitionTime"].filter(function(t){return e.hasOwnProperty(t)}).concat([this.attr.length&&"attr",this.styles.length&&"styles",Object.keys(this.loopVars).length&&"loopVars",Object.keys(this.data).length&&"data"].filter(Boolean))},create:function(e,t){var n=Object.assign(Object.create(this),{attr:[].concat(this.attr||[]),styles:[].concat(this.styles||[]),loopVars:this.loopVars||{},data:this.data||{}},e);return t&&t.run(n),n},update:function(){var e=this,t=this.section,n=this.newTargets,i=this.target,o=function(t){Array.isArray(e.styles)&&e.styles.length>0&&setTimeout(function(){return t.css(Object.assign.apply(Object,_toConsumableArray([{}].concat(e.styles))))}),e.attr&&e.attr.forEach(function(e){return t.attr(e)}),e.data&&t.data(e.data)};Array.isArray(n)&&n.length&&(i=n.map(function(e){return e.target})),[].concat(i).forEach(function(e){r.isPrototypeOf(e)?e.forEach(t,o):o(e)})},render:function(){var t=this,n=this.source,l=this.transition,f=this.transitionTime,p=this.enabled,d=this.section,h=this.newTargets,m=this.target,g=this.append;if(i(this,u),!p||void 0!==m.popAttr("hidden"))return c.create({target:m,data:{hiddenSource:n}}).update(),e();if(Array.isArray(h)&&h.length&&(m=h),!m)return o("ChangeDescriptor.render","ChangeDescriptor has source but not a target!"),e();var y=e(),v=function(e){return function(n){y=y.add(t.create({target:n,append:e,
newTargets:null}).render())}};if([].concat(m).forEach(function t(n,i,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;r.isPrototypeOf(n)?n.forEach(d,v(a)):n.jquery&&n.length>1?Array.from(n).map(e).forEach(v(a)):n.target&&n.append&&t(n.target,i,o,n.append)}),y.length||Array.isArray(m)||r.isPrototypeOf(m))return y;if(!(g in m)){if("replace"!==g)return o("Section.render","The target doesn't have a '"+g+"' method."),e();m.empty(),g="append"}return y=e(n&&e.parseHTML(s(n),document,!0)),m[g](y.length?y:void 0),this.update(),l&&a("replace"===g?m:y,l,f),y}};return u=Object.keys(c),Object.seal(c)}),define("datatypes/changercommand",["utils","utils/operationutils","internaltypes/changedescriptor"],function(e,t,n){var r=e.impossible,i=t.is,o={},a={changer:!0,TwineScript_TypeName:"a changer command",TwineScript_Print:function(){return"`[A '"+this.macroName+"' command]`"},summary:function(){var e=n.create();return this.run(e),e.summary()},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Array.isArray(t)||r("ChangerCommand.create","params was not an array"),Object.assign(Object.create(this),{macroName:e,params:t,next:n,TwineScript_ObjectName:"a ("+e+":) command"})},"TwineScript_+":function(e){for(var t=this.TwineScript_Clone(),n=t;n.next;)n=n.next;return n.next=e,t},TwineScript_is:function(e){return a.isPrototypeOf(e)?this.macroName===e.macroName&&i(this.params,e.params)&&i(this.next,e.next):void 0},TwineScript_Clone:function(){return this.create(this.macroName,this.params,this.next)},run:function(e){o[this.macroName].apply(o,[e].concat(_toConsumableArray(this.params))),this.next&&this.next.run(e)},register:function(e,t){o[e]=t}};return Object.freeze(a)}),define("state",["utils","passages","datatypes/changercommand","internaltypes/twineerror","utils/operationutils"],function(e,t,n,r,i){function o(e){p=(l[f]||c).create(e)}var a=e.impossible,s=i.objectName,u={TwineScript_ObjectName:"this story's variables",TwineScript_VariableStore:!0},c={passage:"",variables:u,create:function(e,t){var n=Object.create(c);return n.passage=e||"",n.variables=Object.assign(Object.create(this.variables),t),n}},l=[],f=-1,p=c.create(),d=void 0,h={forward:[],back:[],load:[]},m=Object.assign({get passage(){return p.passage},get variables(){return p.variables},get pastLength(){return f},get futureLength(){return l.length-1-f},passageNameVisited:function(e){var n=0;if(!t.get(e))return 0;for(var r=0;f>=r;r++)n+=+(e===l[r].passage);return n},passageNameLastVisited:function(e){if(!t.get(e))return 1/0;if(e===p.passage)return 0;for(var n=f;n>0;n--)if(l[n].passage===e)return f-n+1;return 1/0},pastPassageNames:function(){for(var e=[],t=f-1;t>=0;t--)e.unshift(l[t].passage);return e},play:function(e){p||a("State.play","present is undefined!"),p.passage=e,l=l.slice(0,f+1).concat(p),f+=1,o(e),h.forward.forEach(function(t){return t(e)})},rewind:function(e){var t=1,n=!1;if(e)if("string"==typeof e){if(t=this.passageNameLastVisited(e),t===1/0)return}else"number"==typeof e&&(t=e);for(;t>0&&f>0;t--)n=!0,f-=1;return n&&(o(l[f].passage),h.back.forEach(function(e){return e()})),n},fastForward:function(e){var t=1,n=!1;for("number"==typeof e&&(t=e);t>0&&l.length>0;t--)n=!0,f+=1;return n&&(o(l[f].passage),h.forward.forEach(function(e){return e(l[f].passage,"fastForward")})),n},on:function(e,t){return e in h?("function"!=typeof t||h[e].includes(t)||h[e].push(t),m):void a("State.on","invalid event name")},reset:function(){window.jasmine&&(l=[],f=-1,p=c.create(),d=void 0,h.load.forEach(function(e){return e(l)}))}},function(){function e(t){return"number"==typeof t||"boolean"==typeof t||"string"==typeof t||null===t||Array.isArray(t)&&t.every(e)||t instanceof Set&&Array.from(t).every(e)||t instanceof Map&&Array.from(t.values()).every(e)||n.isPrototypeOf(t)}function t(e,t){return t instanceof Set?{"(dataset:)":Array.from(t)}:t instanceof Map?{"(datamap:)":Array.from(t)}:n.isPrototypeOf(t)?{changer:{name:t.macroName,params:t.params,next:t.next}}:t}function i(e,t){if(t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))){if(Array.isArray(t["(dataset:)"]))return new Set(t["(dataset:)"]);if(Array.isArray(t["(datamap:)"]))return new Map(t["(datamap:)"]);if(t.changer&&"object"===_typeof(t.changer)){var r=t.changer,i=r.name,o=r.params,a=r.next;return n.create(i,o,a)}}return t}function a(){var n=l.slice(0,f+1),i=n.map(function(t){return Object.keys(t.variables).filter(function(n){return t.variables[n]&&!e(t.variables[n])}).map(function(e){return[e,t.variables[e]]})});if(d||(d=i.reduce(function(e,t,n){var r=_slicedToArray(t,2),i=r[0],o=r[1];return e||i&&[i,o,n+1]},void 0)),d){var o=d,a=_slicedToArray(o,3),u=a[0],c=a[1],p=a[2];return r.create("saving","The variable $"+u+" holds "+s(c)+" (which is, or contains, a complex data value) on turn "+p+"; the game can no longer be saved.")}try{return JSON.stringify(n,t)}catch(e){return!1}}function p(e){var t=void 0,n=u;try{t=JSON.parse(e,i)}catch(e){return!1}return Array.isArray(t)?(t=t.map(function(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e.hasOwnProperty("passage")&&e.hasOwnProperty("variables")?(e.variables=Object.assign(Object.create(n),e.variables),n=e.variables,Object.assign(Object.create(c),e)):!1})).includes(!1)?!1:(l=t,h.load.forEach(function(e){return e(l)}),f=l.length-1,void o(l[f].passage)):!1}return{serialise:a,deserialise:p}}());return Object.seal(c),Object.freeze(m)}),define("datatypes/colour",["jquery"],function(e){function t(t){if(t in s)return s[t];var n=e("<p>").css("background-color",t).css("background-color");return n=n.startsWith("rgb")?n.match(/\d+/g).reduce(function(e,t,n){return e["rgb"[n]]=+t,e},{}):{r:192,g:192,b:192},s[t]=n,n}function n(e){return"string"!=typeof e?e:(e=e.replace("#",""),e=e.replace(o,"$1$1$2$2$3$3"),{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16)})}function r(e){var t=e.r,n=e.g,r=e.b,i=e.a;t/=255,n/=255,r/=255;var o=Math.max(t,n,r),a=Math.min(t,n,r),s=(o+a)/2,u=o-a;if(o===a)return{h:0,s:0,l:s};var c=void 0;switch(o){case t:c=(n-r)/u+(r>n?6:0);break;case n:c=(r-t)/u+2;break;case r:c=(t-n)/u+4}c=Math.round(60*c);var l=s>.5?u/(2-o-a):u/(o+a);return{h:c,s:l,l:s,a:i}}function i(e){function t(e){return 0>e&&(e+=1),e>1&&(e-=1),1/6>e?u+6*(s-u)*e:.5>e?s:2/3>e?u+(s-u)*(2/3-e)*6:u}var n=e.h,r=e.s,i=e.l,o=e.a;if(0===r){var a=Math.floor(255*i);return{r:a,g:a,b:a}}n/=360;var s=.5>i?i*(1+r):i+r-i*r,u=2*i-s;return{r:Math.floor(255*t(n+1/3)),g:Math.floor(255*t(n)),b:Math.floor(255*t(n-1/3)),a:o}}var o=/^([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,a=/^([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,s=Object.create(null),u=Object.freeze({TwineScript_TypeName:"a colour",TwineScript_ObjectName:"a colour","TwineScript_+":function(e){var t=this,n=e;return u.create({r:Math.min(Math.round(.6*(t.r+n.r)),255),g:Math.min(Math.round(.6*(t.g+n.g)),255),b:Math.min(Math.round(.6*(t.b+n.b)),255),a:(t.a+n.a)/2})},TwineScript_Print:function(){return"<tw-colour style='background-color:rgba("+[this.r,this.g,this.b,this.a].join(",")+");'></span>"},TwineScript_is:function(e){return u.isPrototypeOf(e)&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a},TwineScript_Clone:function(){return u.create(this)},toRGBAString:function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},get h(){return r(this).h},get s(){return r(this).s},get l(){return r(this).l},create:function(e){return"string"==typeof e?this.create(u.isHexString(e)?n(e):t(e)):!("h"in e&&"s"in e&&"l"in e)||"r"in e||"g"in e||"b"in e?("a"in e&&"number"==typeof e.a||(e.a=1),Object.assign(Object.create(this),e)):this.create(i(e))},isHexString:function(e){return"string"==typeof e&&"#"===e[0]&&(e.slice(1).match(o)||e.slice(1).match(a))},isCSS3Function:function(e){return"string"==typeof e&&/^(?:rgb|hsl)a?\(\s*\d+\s*,\s*\d+%?\s*,\s*\d+%?(?:,\s*\d+(?:\.\d+)?\s*)?\)$/.test(e)}});return u}),define("internaltypes/varref",["state","internaltypes/twineerror","utils","utils/operationutils","datatypes/hookset","datatypes/colour"],function(e,t,n,r,i,o){function a(e,n){var r=void 0;if(e instanceof Map&&(r=t.containsError(j(e,n))))return r;if(w(e)){var o=void 0;if("number"==typeof n){if(0===n)return t.create("property","You can't access elements at position 0 of "+x(e)+".","Only positive and negative position values exist.");n>0&&(n-=1)}else if("string"==typeof n&&(o=/(\d+)(?:st|[nr]d|th)last/i.exec(n)))n=-o[1]+"";else if("string"==typeof n&&(o=/(\d+)(?:st|[nr]d|th)/i.exec(n)))n=o[1]-1+"";else if("last"===n)n=-1;else if(!["length","any","all"].includes(n)||i.isPrototypeOf(e))return t.create("property","You can only access position strings/numbers ('4th', 'last', '2ndlast', (2), etc.)"+(i.isPrototypeOf(e)?"":", 'length', 'any' and 'all'")+" of "+x(e)+", not "+x(n)+".")}else if(e instanceof Set){if(!["length","any","all"].includes(n))return t.create("property","You can only get the 'length', 'any' and 'all' of a "+x(e)+".","To check contained values, use the 'contains' operator.");"length"===n&&(n="size")}else if("number"==typeof e||"boolean"==typeof e)return t.create("property","You can't get data values from "+x(e)+".");return n}function s(e,n){var r=n.reduce(function(r,i,o){i.computed&&(i=i.value),k.isPrototypeOf(i)&&(i=i.get()),i=Array.isArray(i)?i.map(function(t){return a(e,t)}):a(e,i);var s=void 0;return(s=t.containsError(r,i))?s:(o<n.length-1&&(e=g(e,i)),r.push(i),r)},[]);return{compiledPropertyChain:r,deepestObject:e}}function u(e,t){return 0>t-0&&Math.abs(t)<=e.length?e.length+(t-0):t}function c(e,t){var n={any:"'any' value of ",all:"'all' values of "}[t];return{determiner:t,array:[].concat(_toConsumableArray(e)),TwineScript_ObjectName:n+x(e),TwineScript_TypeName:n+"a data structure",TwineScript_Unstorable:!0,TwineScript_Print:function(){return"`["+this.TwineScript_TypeName+"]`"}}}function l(e,t){if(void 0===e)return e;if(e instanceof Map)return e.get(t);if(w(e)&&(t=u(e,t)),"any"===t||"all"===t)return c(e,t);if(e.TwineScript_GetElement&&Number.isFinite(+t))return e.TwineScript_GetElement(t);var n=e[t];return"function"!=typeof n?n:void 0}function f(e){return e.computed?"string"==typeof e.value?"('"+e.value+"')":"("+e.value+")":"'"+e+"'"}function p(e,n){if(Array.isArray(n))return n.map(function(t){return p(e,t)});if(i.isPrototypeOf(e))return t.create("operation","I can't modify "+x(e),"You should alter hooks indirectly using macros like (replace:) or (enchant:).");if(e instanceof Set)return t.create("operation","I can't modify "+x(e),"You should use an (array:) if you need to modify the data inside this dataset.");if(o.isPrototypeOf(e))return t.create("operation","I can't modify the components of "+x(e));if(e instanceof Map)return!0;if(w(e)){if(["length","any","all"].includes(n))return t.create("operation","I can't forcibly alter the '"+n+"' of "+x(e)+".");if(+n!==(0|n))return t.create("property",x(e)+" can only have position keys ('3rd', '1st', (5), etc.), not "+f(n)+".")}return e.TwineScript_Identifiers&&n in e?t.create("keyword","I can't alter the value of the '"+n+"' identifier.","You can only alter data in variables and hooks, not fixed identifiers."):"number"==typeof e||"boolean"==typeof e?t.create("operation","You can't alter the data values of "+x(e)+"."):!0}function d(e,t,n){var r=t;e instanceof Map?e.set(t,n):(w(e)&&(t=u(e,t)),e.TwineScript_Set?e.TwineScript_Set(t):e[t]=n),A.set.forEach(function(t){return t(e,r,n)})}function h(e,t){var n=t;w(e)&&(t=u(e,t)),Array.isArray(e)&&O.exec(t)?e.splice(t,1):e instanceof Map||e instanceof Set?e.delete(t):delete e[t],A.delete.forEach(function(t){return t(e,n)})}function m(e){function t(){return e}return{get:t,set:t,delete:t,varref:!0}}function g(n,r,o){if(Array.isArray(r))return i.isPrototypeOf(n)?n.TwineScript_GetElement(r):r.map(function(e){return g(n,e,e)})["string"==typeof n?"join":"valueOf"]("");"string"==typeof n&&(n=[].concat(_toConsumableArray(n)));var a=l(n,r);return void 0===a?n===e.variables?C:n.TwineScript_VariableStore?t.create("property","There isn't a temp variable named _"+o+" in this place.","Temp variables only exist inside the same passage and hook in which they're (set:)."):t.create("property","I can't find a "+f(o)+" data name in "+x(n)):a}function y(e,n){var r=this,i=this.compiledPropertyChain.reduce(function(e,t){var n=void 0;return n=0===e.length?r.object:g.apply(void 0,_toConsumableArray(e[e.length-1])),e.push([n,t])&&e},[]).reduceRight(e,n);return t.containsError(i)?i:void 0}var v=n.impossible,b=r.isObject,w=r.isSequential,x=r.objectName,T=r.typeName,S=r.clone,O=r.numericIndex,j=r.isValidDatamapName,k=void 0,C=0,A={set:[],delete:[]};return k=Object.freeze({varref:!0,get:function(){return g(this.deepestObject,this.compiledPropertyChain.slice(-1)[0],this.propertyChain.slice(-1)[0])},set:function(e){return!this.object||this.object.TwineScript_VariableStore||this.object.TwineScript_Identifiers?y.call(this,function(e,n,r){var i=_slicedToArray(n,2),o=i[0],a=i[1],s=void 0;if(s=t.containsError(e,o,a)||t.containsError(p(o,a)))return s;if(e&&e.TwineScript_Unstorable)return t.create("operation",T(e)+" can't be stored.");if(r>0&&(o=S(o)),"string"==typeof o){var u=function(){if("string"!=typeof e||e.length!==(Array.isArray(a)?a.length:1))return{v:t.create("datatype","I can't put this non-string value, "+x(e)+", in a string.")};o=[].concat(_toConsumableArray(o));var n=[].concat(_toConsumableArray(e));[].concat(a).forEach(function(e){0>0+e&&(e=o.length+(0+e)),o=[].concat(_toConsumableArray(o.slice(0,e)),[n.shift()],_toConsumableArray(o.slice(e+1)))}),o=o.join("")}();if("object"===("undefined"==typeof u?"undefined":_typeof(u)))return u.v}else b(o)&&(Array.isArray(a)&&w(e)?("string"==typeof e&&(e=[].concat(_toConsumableArray(e))),a.map(function(t,n){return[t,e[n]]}).forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return d(o,n,r)})):d(o,a,e));return o},e):t.create("macrocall","I can't (set:) "+x(this)+", if the "+(x(this.object).match(/ (.+$)/)||["","value"])[1]+" isn't stored in a variable.","Modifying data structures that aren't in variables won't change the game state at all.")},delete:function(){return y.call(this,function(e,n,r){var i=_slicedToArray(n,2),o=i[0],a=i[1],s=void 0;if(s=t.containsError(e,o,a)||t.containsError(p(o,a)))return s;if(r>0&&(o=S(o)),null===e){var c="string"==typeof o;c&&(o=[].concat(_toConsumableArray(o))),Array.isArray(a)?(w(o)&&(a=[].concat(_toConsumableArray(new Set(a))),a.sort(function(e,t){return u(o,t)-u(o,e)})),a.forEach(function(e){return h(o,e)})):h(o,a),c&&(o=o.join(""))}else d(o,a,e);return o},null)},create:function(e,n){var r=void 0;if(r=t.containsError(e))return m(r);n=[].concat(n),k.isPrototypeOf(e)&&(n=e.propertyChain.concat(n),e=e.object);var i=s(e,n),o=i.compiledPropertyChain,a=i.deepestObject;return(r=t.containsError(o,a))?m(r):Object.assign(Object.create(k),{object:e,propertyChain:n,compiledPropertyChain:o,deepestObject:a})},get TwineScript_ObjectName(){var t=this,n=function(n,r){return r||t.object!==e.variables&&!t.object.TwineScript_VariableStore?f(n):n};return(this.object===e.variables?"$":this.object.TwineScript_VariableStore?"_":x(this.object)+"'s ")+(1===this.propertyChain.length?n(this.propertyChain[0]):this.propertyChain.reduce(function(e,t,r){return e+"'s "+n(t,r)}))+(this.object.TwineScript_VariableStore?" in "+this.object.TwineScript_VariableStoreName:"")},on:function(e,t){return e in A?("function"!=typeof t||A[e].includes(t)||A[e].push(t),k):void v("VarRef.on","invalid event name")}})}),define("utils/naturalsort",[],function(){return function(e){return function t(n,r){var i,o,a,s,u=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,c=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,f=/^0x[0-9a-f]+$/i,p=/^0/,d=function(e){return t.insensitive&&(""+e).toLowerCase()||""+e},h=d(n).replace(c,"")||"",m=d(r).replace(c,"")||"",g=h.replace(u,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),y=m.replace(u,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),v=parseInt(h.match(f))||1!==g.length&&h.match(l)&&Date.parse(h),b=parseInt(m.match(f))||v&&m.match(l)&&Date.parse(m)||null;if(e&&window.Intl&&window.Intl.Collator&&(a=window.Intl.Collator(e)),b){if(b>v)return-1;if(v>b)return 1}for(var w=0,x=Math.max(g.length,y.length);x>w;w++){if(i=!(g[w]||"").match(p)&&parseFloat(g[w])||g[w]||0,o=!(y[w]||"").match(p)&&parseFloat(y[w])||y[w]||0,isNaN(i)!==isNaN(o))return isNaN(i)?1:-1;if(("undefined"==typeof i?"undefined":_typeof(i))!==("undefined"==typeof o?"undefined":_typeof(o)))i+="",o+="";else if("string"==typeof i&&a&&(s=a.compare(i,o),0!==s))return s;if(o>i)return-1;if(i>o)return 1}return 0}}}),define("internaltypes/varscope",[],function(){return{TwineScript_ObjectName:"the temporary variables",TwineScript_VariableStore:!0}}),define("datatypes/lambda",["utils","utils/operationutils","internaltypes/varscope","internaltypes/twineerror"],function(e,t,n,r){var i=e.toJSLiteral,o=e.insensitiveName,a=(e.plural,t.typeName,t.objectName,t.singleTypeCheck,Object.freeze({lambda:!0,TwineScript_TypeName:"a lambda",TwineScript_ObjectName:function(){return'a "'+("making"in this?"making ... ":"")+("with"in this?"with ... ":"")+("where"in this?"where ... ":"")+("via"in this?"via ... ":"")+'" lambda'},TwineScript_Print:function(){return"`[A lambda]`"},TwineScript_is:function(e){return e===this},TypeSignature:function(e){return{pattern:"lambda",innerType:a,clauses:e}},create:function(e,t,i){var s=void 0;if(r.containsError(e))return e;if(a.isPrototypeOf(e)){if(t in e&&("where"!==t||"true"!==e[t]))return r.create("syntax","This lambda has two '"+t+"' clauses.");s=e}else{if(void 0!==e&&(!e||!e.varref||!n.isPrototypeOf(e.object)||e.propertyChain.length>1))return r.create("syntax","This lambda needs to start with a single temporary variable.");s=Object.create(this),s.loop=e?e.propertyChain[0]:""}s[t]=i;var u=[s.making,s.with,s.loop].filter(function(e,t,n){return e&&n.indexOf(o(e))!==t});return u.length?r.create("syntax","This lambda has two variables named '"+u[0]+"'.","Lambdas should have all-unique parameter names."):s},apply:function(e,t){var o=t.loop,a=t.with,s=t.making,u=t.fail,c=t.pass,l=t.ignoreVia,f=Object.create(n);[[this.loop,o],[this.with,a],[this.making,s]].forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return n&&(f[n]=r)}),e.stack.unshift(Object.assign(Object.create(null),{tempVariables:f})),e.eval("Operations").initialiseIt(!o||this.with||this.making?r.create("operation","I can't use 'it', or an implied 'it', in "+this.TwineScript_ObjectName()):o);var p=!l&&this.via,d=e.eval("where"in this?"Operations.where("+this.where+","+(p||i(c))+","+i(u)+")":p||i(c));return e.stack.shift(),d},filter:function(e,t){var n=this;return t.reduce(function(t,i){var o=void 0;if(o=r.containsError(t))return o;var a=n.apply(e,{loop:i,pass:!0,fail:!1,ignoreVia:!0});return(o=r.containsError(a))?o:t.concat(a?[i]:[])},[])}}));return a}),define("macros",["jquery","utils/naturalsort","utils","utils/operationutils","datatypes/changercommand","datatypes/lambda","datatypes/hookset","internaltypes/twineerror"],function(e,t,n,r,i,o,a,s){function u(e){return function(n){n=n.reduce(function(e,n){if(n&&n.spreader===!0){var r=n.value;if(Array.isArray(r)||"string"==typeof r)for(var i=0;i<r.length;i++)e.push(r[i]);else r instanceof Set?e.push.apply(e,_toConsumableArray(Array.from(r).sort(t("en")))):e.push(s.create("operation","I can't spread out "+g(r)+", because it is not a string, dataset, or array."))}else e.push(n);return e},[]);var r=s.containsError(n);return r?r:e.apply(void 0,_toConsumableArray(n))}}function c(e,t,n){n=[].concat(n||[]),e="("+(Array.isArray(e)&&e.length>1?e[0]:e)+":)";var r=void 0;return r=n.length>0?"The "+e+" macro must only be given "+n.map(y).reduce(function(e,t,n,r){return e+(0===n?"":n<r.length-1?", ":", and ")+t},"")+(n.length>1?", in that order":"."):"The macro must not be given any data - just write "+e+".",function(i){for(var a=arguments.length,u=Array(a>1?a-1:0),c=1;a>c;c++)u[c-1]=arguments[c];for(var l=void 0,f=(function(t){var i=n[t],a=u[t];return t>=n.length&&!l?{v:s.create("datatype",u.length-n.length+" too many values were given to this "+e+" macro.",r)}:(i||(i=l),!i.innerType||"rest"!==i.pattern&&"zero or more"!==i.pattern||(l=i.innerType,"rest"===i.pattern&&(i=i.innerType)),v(a,i)?void 0:void 0===a?{v:s.create("datatype","The "+e+" macro needs "+d(n.length-t,"more value")+".",r)}:a&&a.TwineScript_Unstorable&&(i===b.TypeSignature.Any||i.innerType&&i.innerType===b.TypeSignature.Any)?{v:s.create("datatype",e+"'s "+p(t+1)+" value, "+g(a)+", is not valid data for this macro.",r)}:a&&o.isPrototypeOf(a)&&"lambda"===i.pattern?{v:s.create("datatype",e+"'s "+p(t+1)+" value (a lambda) should have "+h(["where","making","via","with"].filter(function(e){return i.clauses.includes(e)}).map(function(e){return"a '"+e+"' clause"}))+", not "+h(["where","making","via","with"].filter(function(e){return e in a}).map(function(e){return"a '"+e+"' clause"}))+".")}:{v:s.create("datatype",e+"'s "+p(t+1)+" value is "+g(a)+", but should be "+y(i)+".",i.message||r)})}),m=0,w=Math.max(u.length,n.length);w>m;m+=1){var x=f(m,w);if("object"===("undefined"==typeof x?"undefined":_typeof(x)))return x.v}return t.apply(void 0,[i].concat(u))}}function l(e,t){Array.isArray(e)?e.forEach(function(e){return m(w,f(e),t)}):m(w,f(e),t)}var f=n.insensitiveName,p=n.nth,d=n.plural,h=n.andList,m=n.lockProperty,g=r.objectName,y=r.typeName,v=r.singleTypeCheck,b=void 0,w={};return b={has:function(e){return e=f(e),w.hasOwnProperty(e)},get:function(e){return e=f(e),w.hasOwnProperty(e)&&w[e]},add:function e(t,n,r){return l(t,u(c(t,n,r))),e},addChanger:function e(t,n,r,o){return l(t,u(c(t,n,o))),i.register(Array.isArray(t)?t[0]:t,r),e},TypeSignature:{optional:function(e){return{pattern:"optional",innerType:e}},zeroOrMore:function(e){return{pattern:"zero or more",innerType:e}},either:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return{pattern:"either",innerType:t}},rest:function(e){return{pattern:"rest",innerType:e}},wrapped:function(e,t){return{pattern:"wrapped",innerType:e,message:t}},Any:{TwineScript_TypeName:"anything"}},run:function(e,t){return s.containsError(e)?e:b.has(e)?b.get(e)(t):s.create("macrocall","I can't run the macro '"+e+"' because it doesn't exist.","Did you mean to run a macro? If you have a word written like (this:), it is regarded as a macro name.")}},Object.freeze(b)}),define("datatypes/assignmentrequest",["utils"],function(e){var t=e.assertMustHave,n=Object.freeze({assignmentRequest:!0,TwineScript_TypeName:"a 'to' or 'into' expression",TwineScript_ObjectName:"a 'to' or 'into' expression",TwineScript_Unstorable:!0,create:function(e,n,r){return t(e,["varref"]),Object.assign(Object.create(this),{dest:e,src:n,operator:r})}});return n}),define("twinescript/operations",["state","datatypes/colour","datatypes/assignmentrequest","utils/operationutils","internaltypes/twineerror"],function(e,t,n,r,i){function o(e,t,n,r){return n=n||"do this to",function(o,a){1===t.length&&(a=o);var s=void 0;return(s=i.containsError(o,a))?s:("undefined"==typeof o?"undefined":_typeof(o))!==e||("undefined"==typeof a?"undefined":_typeof(a))!==e?i.create("operation","I can only "+n+" "+e+"s, not "+m(("undefined"==typeof o?"undefined":_typeof(o))!==e?o:a)+".",r):t(o,a)}}function a(e){return function(t,n){var r=void 0;return(r=i.containsError(t,n))?r:t&&t.varref?i.create("operation","I can't give an expression a new value."):("undefined"==typeof t?"undefined":_typeof(t))!==("undefined"==typeof n?"undefined":_typeof(n))||c(t)!==c(n)?l(e,t,n)||i.create("operation",m(t)+" isn't the same type of data as "+m(n)):e(t,n)}}function s(e){var t=function t(n,r){var o=void 0;if(o=i.containsError(n,r))return o;if(y=n,n.determiner){var a=function(){var e="all"===n.determiner;return{v:n.array.reduce(function(n,o){var a=void 0,s=t(o,r);return(a=i.containsError(n,s))?a:e?n&&s:n||s},e)}}();if("object"===("undefined"==typeof a?"undefined":_typeof(a)))return a.v}else if(r.determiner){var s=function(){var e="all"===r.determiner;return{v:r.array.reduce(function(r,o){var a=void 0,s=t(n,o);return(a=i.containsError(r,s))?a:e?r&&s:r||s},e)}}();if("object"===("undefined"==typeof s?"undefined":_typeof(s)))return s.v}return e(n,r)};return t}var u=r.isObject,c=r.collectionType,l=r.coerceToString,f=r.is,p=r.clone,d=r.unique,h=r.contains,m=(r.typeName,r.objectName),g=void 0,y=0,v="If one of these values is a number, you may want to write a check that it 'is not 0'. Also, if one is a string, you may want to write a check that it 'is not \"\" '.";return g={create:function(e){var t=Object.create(this);return t.Identifiers={TwineScript_Identifiers:!0,get it(){return y},get time(){return Date.now()-e.timestamp}},t},elidedComparisonOperator:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];return r.reduce(function(n,r){return"boolean"==typeof r?r:g[e](n,g[t](y,r))},"and"===e)},and:o("boolean",a(function(e,t){return e&&t}),"use 'and' to join",v),or:o("boolean",a(function(e,t){return e||t}),"use 'or' to join",v),not:o("boolean",function(e){return!e},"use 'not' to invert",v),"+":a(function(e,t){if(Array.isArray(e))return[].concat(_toConsumableArray(e),_toConsumableArray(t));var n=void 0;return e instanceof Map?(n=new Map(e),t.forEach(function(e,t){return n.set(t,e)}),n):e instanceof Set?new Set([].concat(_toConsumableArray(e),_toConsumableArray(t)).filter(d).map(p)):"function"==typeof e["TwineScript_+"]?e["TwineScript_+"](t):"string|number|boolean".includes("undefined"==typeof e?"undefined":_typeof(e))?e+t:i.create("operation","I can't use + on "+m(e)+".")}),"-":a(function(e,t){if(Array.isArray(e))return e.filter(function(e){return!t.some(function(t){return f(e,t)})});if(e instanceof Set){var n=function(){var n=[].concat(_toConsumableArray(t));return{v:new Set([].concat(_toConsumableArray(e)).filter(function(e){return!n.some(function(t){return f(e,t)})}))}}();if("object"===("undefined"==typeof n?"undefined":_typeof(n)))return n.v}return"string"==typeof e?e.split(t).join(""):"number"==typeof e?e-t:i.create("operation","I can't use - on "+m(e)+".")}),"*":o("number",a(function(e,t){return e*t}),"multiply"),"/":o("number",a(function(e,t){return 0===t?i.create("operation","I can't divide "+m(e)+" by zero."):e/t}),"divide"),"%":o("number",a(function(e,t){return 0===t?i.create("operation","I can't modulo "+m(e)+" by zero."):e%t}),"modulus"),"<":s(o("number",a(function(e,t){return t>e}),"do < to")),">":s(o("number",a(function(e,t){return e>t}),"do > to")),"<=":s(o("number",a(function(e,t){return t>=e}),"do <= to")),">=":s(o("number",a(function(e,t){return e>=t}),"do >= to")),is:s(f),isNot:s(function(e,t){return!g.is(e,t)}),contains:s(h),isIn:s(function(e,t){return h(t,e)}),where:function(e,t,n){var r=void 0;return(r=i.containsError(e))?r:"boolean"!=typeof e?i.create("operation","This lambda's 'where' clause must evaluate to true or false, not "+m(e)+"."):e?t:n},makeSpreader:function(e){return{value:e,spreader:!0}},makeAssignmentRequest:function(e,t,r){var o=i.containsError(e,t);return o?o:u(e)&&"varref"in e?n.create(e,t,r):i.create("operation","I can't store a new value inside "+m(e)+".")},setIt:function(e){return i.containsError(e)?e:e.varref?(y=e.get(),e):i.create("operation","I can't put a new value into "+m(e)+".")},initialiseIt:function(e){y=e}},Object.freeze(g)}),define("twinescript/environ",["macros","state","utils","datatypes/colour","datatypes/hookset","datatypes/lambda","internaltypes/varref","internaltypes/twineerror","twinescript/operations"],function(Macros,State,Utils,Colour,HookSet,Lambda,VarRef,TwineError,OperationsProto){return function(section){"object"===("undefined"==typeof section?"undefined":_typeof(section))&&section||Utils.impossible("TwineScript.environ","no Section argument was given!");var Operations=OperationsProto.create(section);return section.eval=function(){try{for(var _len5=arguments.length,args=Array(_len5),_key5=0;_len5>_key5;_key5++)args[_key5]=arguments[_key5];return eval(args.join(""))}catch(e){return e}},section}}),define("internaltypes/twinenotifier",["jquery","utils"],function(e,t){var n=t.impossible,r={create:function(e){return e||n("TwineNotifier.create","called with only 1 string."),Object.assign(Object.create(r),{message:e})},render:function(){return e("<tw-notifier>").attr("message",this.message)}};return r}),define("section",["jquery","utils","utils/selectors","renderer","twinescript/environ","twinescript/operations","state","utils/operationutils","datatypes/changercommand","datatypes/hookset","datatypes/colour","internaltypes/changedescriptor","internaltypes/varscope","internaltypes/twineerror","internaltypes/twinenotifier"],function(e,t,n,r,i,o,a,s,u,c,l,f,p,d,h){function m(e,n,r){if(n&&"object"===("undefined"==typeof n?"undefined":_typeof(n))&&n.changer){var i=this.renderInto(r.popAttr("source"),r,n);if(!i){var o=t.insensitiveName(e.attr("name"));return void(["if","elseif","unless","else"].includes(o)&&(e.addClass("false"),"elseif"!==o&&(this.stack[0].lastHookShown=!1)))}}else if(n&&"object"===("undefined"==typeof n?"undefined":_typeof(n))&&n.live)x.call(this,r,n.delay,n.event);else{if(n===!1)return r.attr("source")&&r.data("hiddenSource",r.popAttr("source")),e.addClass("false"),void(this.stack[0].lastHookShown=!1);n!==!0&&e.replaceWith(d.create("datatype",S(n)+" cannot be attached to this hook.","Only Booleans, changer commands, and the (live:) macro can be attached to hooks.").render(e.attr("title")))}this.stack[0].lastHookShown=!0}function g(t){var n=t instanceof e?t[0]:t,r=n.nextSibling;if(r&&(r instanceof Text&&!r.textContent.trim()||"br"===(r.tagName||"").toLowerCase())){var i=g(r),o=i.whitespace,a=i.nextElem;return{whitespace:e(r).add(o),nextElem:a}}return{whitespace:e(),nextElem:e(r)}}function y(r){var i=this.eval(r.popAttr("js")||""),a=void 0,s=void 0,c=e();for(s=r;u.isPrototypeOf(i);){var f=g(s);if(a=f.whitespace,s=f.nextElem,s[0]instanceof Text&&"+"===s[0].textContent.trim()){var p=void 0,y=s,v=g(y);if(p=v.whitespace,s=v.nextElem,s.is(n.expression)){var b=this.eval(s.popAttr("js"));if(d.containsError(b)){i=b;break}var w=o["+"](i,b);e(a).add(y).add(p).remove(),i=d.containsError(w)?d.create("operation","I can't combine "+S(i)+" with "+S(b)+"."):w;continue}}if(s.is(n.hook)){a.remove(),c=s;break}r.replaceWith(d.create("syntax","The ("+i.macroName+":) command should be assigned to a variable or attached to a hook.","Macros like this should appear to the left of a hook: "+r.attr("title")+"[Some text]").render(r.attr("title")));break}c=c.length?c:g(r).nextElem.filter(n.hook);var x=void 0;if(x=d.containsError(i))x instanceof Error&&(x=d.fromError(x)),r.replaceWith(x.render(r.attr("title"),r));else if(h.isPrototypeOf(i))r.append(i.render());else if(!c.length&&("string"==typeof i||"number"==typeof i||i instanceof Map||i instanceof Set||Array.isArray(i)||l.isPrototypeOf(i))||i&&i.TwineScript_Print&&!i.changer){if(i=T(i),i.earlyExit)return"earlyexit";i instanceof e?r.append(i):d.containsError(i)?(i instanceof Error&&(i=d.fromError(i)),r.replaceWith(i.render(r.attr("title"),r))):this.renderInto(i,r)}else c.length?m.call(this,r,i,c):i.changer||"boolean"==typeof i||t.impossible("Section.runExpression","The expression evaluated to an unknown value: "+i.toSource())}function v(e){var t=e.first()[0],n=e.parent();if(!n.length)return null;var r=n.textNodes().filter(function(e){var n=e.compareDocumentPosition(t);return 4&n&&!(8&n)});return r=r[r.length-1],r?r:v(n)}function b(e){var t=e.last()[0],n=e.parent();if(!n.length)return null;var r=n.textNodes().filter(function(e){var n=e.compareDocumentPosition(t);return 2&n&&!(8&n)})[0];return r?r:b(n)}function w(t){function n(t){return 0===e(this||t).parentsUntil("tw-collapsed").filter("tw-verbatim, tw-expression, [collapsing=false]").length}var r=v(t);e(r).parents("tw-collapsed").length||(r=null);

var i=b(t);e(i).parents("tw-collapsed").length||(i=null),t.findAndFilter("br:not([data-raw])").filter(n).replaceWith(document.createTextNode(" "));var o=t.textNodes(),a=0;o.reduce(function(e,t){return n(t)?(t.textContent=t.textContent.replace(/\s+/g," ")," "!==t.textContent[0]||e&&e.textContent&&!(e.textContent.search(/\s$/)>-1)||(t.textContent=t.textContent.slice(1)),t):document.createTextNode("A")},r),[].concat(_toConsumableArray(o)).reverse().every(function(e){return n(e)?e.textContent.match(/^\s*$/)?(a+=e.textContent.length,e.textContent="",!0):(e.textContent=e.textContent.replace(/\s+$/,function(e){return a+=e.length,""}),!1):!1}),a>0&&i&&(o[o.length-1].textContent+=" "),t[0]&&j()&&t[0].normalize()}function x(e,t){var r=this,i=e.popAttr("source")||"";t=void 0===t?20:t;var o=function o(){r.inDOM()&&(r.renderInto(i,e,{append:"replace"}),e.find(n.expression+"[name='stop']").length||r.inDOM()&&setTimeout(o,t))};setTimeout(o,t)}var T=s.printBuiltinValue,S=s.objectName,O=void 0,j=function(){var t=void 0;return function(){if(void 0!==t)return t;var n=e("<p>");return n[0].normalize?(n.append(document.createTextNode("0-"),document.createTextNode("2"),document.createTextNode(""))[0].normalize(),t=1===n.contents().length):t=!1}}();return O={create:function(n){n instanceof e&&1===n.length||t.impossible("Section.create","called with no DOM element");var r=Object.assign(Object.create(this),{timestamp:Date.now(),dom:n||t.storyElement,stack:[],enchantments:[]});return r=i(r)},inDOM:function(){return e(t.storyElement).find(this.dom).length>0},evaluateTwineMarkup:function(t){var n=e("<p>");this.renderInto(t,n);var r=void 0;return(r=n.find("tw-error")).length>0?r:n.text()},renderInto:function(t,r){for(var i=this,o=f.create({target:r,source:t,section:this}),a=arguments.length,s=Array(a>2?a-2:0),u=2;a>u;u++)s[u-2]=arguments[u];s.forEach(function(e){e.changer?e.run(o):Object.assign(o,e)}),r=o.target,this.stack.length>=50&&d.create("infinite","Printing this expression may have trapped me in an infinite loop.").render(r.attr("title")).replaceAll(r);var c=function(t,o){var a=t.render();i.stack.unshift(o);var s=i;a.findAndFilter(n.hook+","+n.expression).each(function(){var t=e(this);switch(t.tag()){case n.hook:if(t.attr("hidden")&&(t.removeAttr("hidden"),t.data("hiddenSource",t.popAttr("source"))),t.attr("source")&&s.renderInto(t.popAttr("source"),t),t.find("[earlyexit]").length)return!1;break;case n.expression:if(t.attr("js")){var r=y.call(s,t);return"earlyexit"===r?(a.attr("earlyexit",!0),!1):r}}}),a.length&&r instanceof e&&r.is(n.hook)&&r.parents("tw-collapsed").length>0&&w(a),a.findAndFilter(n.collapsed).each(function(){w(e(this))}),i.stack.shift()},l=Object.create(this.stack.length?this.stack[0].tempVariables:p),h=r&&r.tag();return l.TwineScript_VariableStoreName=h===n.hook?r.attr("name")?"?"+r.attr("name"):"an unnamed hook":h===n.expression?"a "+r.attr("type")+" expression":h===n.passage?"this passage":"an unknown scope",Object.keys(o.loopVars).length?!function(){for(var e=Object.assign({},o.loopVars),t=Math.min.apply(Math,_toConsumableArray(Object.keys(e).map(function(t){return e[t].length})));t>0;t-=1)c(o,{tempVariables:Object.keys(e).reduce(function(t,n){return t[n]=e[n].shift(),t},Object.create(l))})}():c(o,{tempVariables:l}),0===this.stack.length&&this.updateEnchantments(),o.enabled},updateEnchantments:function(){this.enchantments.forEach(function(e){e.disenchant(),e.enchantScope()})}},Object.preventExtensions(O)}),define("engine",["jquery","utils","utils/selectors","state","section","passages"],function(e,t,n,r,i,o){function a(){var t=e("<tw-passage><tw-sidebar>"),i=t.children(n.sidebar);h.permalink&&r.save&&i.append('<tw-icon tabindex=0 class="permalink" title="Permanent link to this passage"><a href="#'+r.save()+'">&sect;');var o=e('<tw-icon tabindex=0 class="undo" title="Undo">&#8630;</tw-icon>').click(d.goBack),a=e('<tw-icon tabindex=0 class="redo" title="Redo">&#8631;</tw-icon>').click(d.goForward);return r.pastLength<=0&&o.css("visibility","hidden"),r.futureLength<=0&&a.css("visibility","hidden"),i.append(o).append(a),t}function s(e,t){return"<tw-include type="+e+" title='"+c(t.get("name"))+"'>"+t.get("source")+"</tw-include>"}function u(u){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.assertOnlyHas(c,["stretch","transitionIn","transitionOut"]);var d=o.get(u),m=t.storyElement,g=m.parent(),y=c.stretch,v=c.transitionOut,b=c.transitionIn;if(v=v||"instant",g.is(n.enchantment)){var w=g.data("enchantedProperties");w&&m.css(w.reduce(function(e,t){return e[t]="",e},{})),g=m.unwrap().parent()}d&&d instanceof Map&&d.has("source")||l("Engine.showPassage","There's no passage with the name \""+u+'"!'),m.detach();var x=t.$(m.children(f));!y&&v&&(p(x,v),x.css("position","absolute"));var T=(d.get("tags")||[]).join(" "),S=a().appendTo(m).attr({tags:T});m.attr({tags:T});var O=i.create(S),j=d.get("source");j=o.getTagged("header").map(s.bind(0,"header")).join("")+(h.debug?o.getTagged("debug-header").map(s.bind(0,"debug-header")).join(""):"")+j+o.getTagged("footer").map(s.bind(0,"footer")).join("")+(h.debug?o.getTagged("debug-footer").map(s.bind(0,"debug-footer")).join(""):""),r.pastLength<=0&&(h.debug&&(j=o.getTagged("debug-startup").map(s.bind(0,"debug-startup")).join("")+j),j=o.getTagged("startup").map(s.bind(0,"startup")).join("")+j),O.renderInto(j,S,{transition:b||"dissolve"}),g.append(m.parents().length?m.parents().last():m),scroll(0,y?S.offset().top-.05*e(window).height():m.offset().top)}var c=t.escape,l=t.impossible,f=t.passageSelector,p=t.transitionOut,d=void 0,h=Object.create(null);return d={goBack:function(){r.rewind()&&u(r.passage)},goForward:function(){r.fastForward()&&u(r.passage)},goToPassage:function(e,t){r.play(e),u(e,{stretch:t})},showPassage:u,options:h},Object.freeze(d)}),define("debugmode",["jquery","utils","state","internaltypes/varref","utils/operationutils","engine"],function(e,t,n,r,i,o){{var a=i.objectName;i.typeName}return function(){function t(t,n,r){var i=l.children('[data-name="'+t+'"]'),o=a(n);i.length||(i=e('<div class="variable-row" data-name="'+t+'" data-value="'+o+'"></div>').appendTo(l)),i.empty().append("<span class='variable-name "+(r?"temporary":"")+"'>"+t+(r?"<span class='temporary-variable-scope'>"+r+"</span>":"")+"</span><span class='variable-value'>"+a(n)+"</span>");var s=l.children();c.text(s.length+" Variable"+(1!==s.length?"s":""))}function i(){var r=[];l.children().each(function(i,o){o=e(o);var s=o.attr("data-name"),u=o.attr("data-value");s.startsWith("TwineScript")||(s in n.variables?(r.push(s),a(n.variables[s])!==u&&t(s,n.variables[s])):o.remove())});for(var i in n.variables)i.startsWith("TwineScript")||r.includes(i)||t(i,n.variables[i])}var s=e("<tw-debugger><div class='variables'></div>Turns: <select disabled></select><button class='show-invisibles'>Debug View</button><button class='show-variables enabled'>0 Variables</button></tw-debugger>"),u=s.find(".show-invisibles");u.click(function(){e(document.documentElement).toggleClass("debug-mode"),u.toggleClass("enabled")});var c=s.find(".show-variables"),l=s.find(".variables");c.click(function(){l[c.is(".enabled")?"attr":"removeAttr"]("hidden",""),c.toggleClass("enabled")});var f=s.find("select");f.change(function(e){var t=e.target.value,r=t-n.pastLength;0!==r&&(n[0>r?"rewind":"fastForward"](Math.abs(r)),o.showPassage(n.passage))}),n.on("forward",function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,i=n.pastLength;i>1&&f.removeAttr("disabled"),r||(f.children().each(function(t,n){t>=i&&e(n).remove()}),f.append("<option value="+i+">"+(i+1)+": "+t+"</option>").val(i))}).on("back",function(){n.pastLength<=1&&f.attr("disabled"),f.find("[selected]").removeAttr("selected"),f.val(n.pastLength)}).on("load",function(e){f.empty(),f[e.length<=1?"attr":"removeAttr"]("disabled"),e.forEach(function(e,t){return f.append("<option value="+t+">"+(t+1)+": "+e.passage+"</option>")})}),n.on("forward",i).on("back",i),r.on("set",function(e,r,i){(e===n.variables||e.TwineScript_VariableStore)&&t(r,i,e===n.variables?"":e.TwineScript_VariableStoreName)}).on("delete",function(e,t){e===n.variables&&l.find('[data-name="'+t+'"]:not(.temporary)').remove()}),e(document.body).append(s)}}),define("macrolib/values",["macros","utils","utils/operationutils","datatypes/colour","internaltypes/twineerror"],function(e,t,n,r,i){function o(e){return function(){var t=e.apply(void 0,arguments);return"number"!=typeof t||isNaN(t)?i.create("macrocall","This mathematical expression doesn't compute!"):t}}var a=t.realWhitespace,s=t.anyRealLetter,u=n.subset,c=n.objectName,l=e.TypeSignature,f=l.rest,p=l.zeroOrMore,d=l.Any;e.add(["text","string"],function(){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;e>n;n++)t[n-1]=arguments[n];return t.join("")},[p(e.TypeSignature.either(String,Number,Boolean,Array))])("substring",function(e,t,n,r){return u(t,n,r)},[String,parseInt,parseInt])("lowercase",function(e,t){return t.toLowerCase()},[String])("uppercase",function(e,t){return t.toUpperCase()},[String])("lowerfirst",function(e,t){return t.replace(new RegExp(s+"+"),function(e){return e=Array.from(e),e[0].toLowerCase()+e.slice(1).join("").toLowerCase()})},[String])("upperfirst",function(e,t){return t.replace(new RegExp(s+"+"),function(e){return e=Array.from(e),e[0].toUpperCase()+e.slice(1).join("").toLowerCase()})},[String])("words",function(e,t){return t.split(new RegExp(a+"+")).filter(Boolean)},[String])(["num","number"],function(e,t){return Number.isNaN(+t)?i.create("macrocall","I couldn't convert "+c(t)+" to a number."):+t},[String])("rgb",function(){for(var e,t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1)if(e=arguments.length<=t+1?void 0:arguments[t+1],0>e||e>255)return i.create("macrocall","RGB values must be whole numbers between 0 and 255, not "+c(e)+".");return r.create({r:arguments.length<=1?void 0:arguments[1],g:arguments.length<=2?void 0:arguments[2],b:arguments.length<=3?void 0:arguments[3]})},[parseInt,parseInt,parseInt])("rgba",function(){for(var e,t=0;3>t;t+=1)if(e=arguments.length<=t+1?void 0:arguments[t+1],0>e||e>255)return i.create("macrocall","RGB values must be whole numbers between 0 and 255, not "+c(e)+".");return(arguments.length<=4?void 0:arguments[4])<0||(arguments.length<=4?void 0:arguments[4])>1?i.create("macrocall","Alpha values must be numbers between 0 and 1 inclusive, not "+c(arguments.length<=4?void 0:arguments[4])+"."):r.create({r:arguments.length<=1?void 0:arguments[1],g:arguments.length<=2?void 0:arguments[2],b:arguments.length<=3?void 0:arguments[3],a:arguments.length<=4?void 0:arguments[4]})},[parseInt,parseInt,parseInt,Number])("hsl",function(e,t,n,o){var a=" values must be numbers between 0 and 1 inclusive, not ";return 0>n||n>1?i.create("macrocall","Saturation"+a+c(n)+"."):0>o||o>1?i.create("macrocall","Lightness"+a+c(o)+"."):(t=Math.round(t)%360,0>t&&(t+=360),r.create({h:t,s:n,l:o}))},[Number,Number,Number])("hsla",function(e,t,n,o,a){var s=" values must be numbers between 0 and 1 inclusive, not ";return 0>n||n>1?i.create("macrocall","Saturation"+s+c(n)+"."):0>o||o>1?i.create("macrocall","Lightness"+s+c(o)+"."):0>a||a>1?i.create("macrocall","Alpha"+s+c(o)+"."):(t=Math.round(t)%360,0>t&&(t+=360),r.create({h:t,s:n,l:o,a:a}))},[Number,Number,Number,Number]),{weekday:[function(){return["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur"][(new Date).getDay()]+"day"},null],monthday:[function(){return(new Date).getDate()},null],currenttime:[function(){var e=new Date,t=e.getHours()<12,n=e.getHours()%12||12,r=(e.getMinutes()<10?"0":"")+e.getMinutes();return n+":"+r+" "+(t?"A":"P")+"M"},null],currentdate:[function(){return(new Date).toDateString()},null],min:[Math.min,f(Number)],max:[Math.max,f(Number)],abs:[Math.abs,Number],sign:[Math.sign,Number],sin:[Math.sin,Number],cos:[Math.cos,Number],tan:[Math.tan,Number],floor:[Math.floor,Number],round:[Math.round,Number],ceil:[Math.ceil,Number],pow:[o(Math.pow),[Number,Number]],exp:[Math.exp,Number],sqrt:[o(Math.sqrt),Number],log:[o(Math.log),Number],log10:[o(Math.log10),Number],log2:[o(Math.log2),Number],random:[function(e,t){var n=void 0,r=void 0;return t?(n=Math.min(e,t),r=Math.max(e,t)):(n=0,r=e),r+=1,~~(Math.random()*(r-n))+n},[parseInt,e.TypeSignature.optional(parseInt)]],either:[function(){var e;return e=~~(Math.random()*arguments.length),arguments.length<=e?void 0:arguments[e]},f(d)],"":function(){var t=this;Object.keys(this).forEach(function(n){n&&!function(){var r=t[n][0],i=t[n][1];e.add(n,function(){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;e>n;n++)t[n-1]=arguments[n];return r.apply(void 0,t)},i)}()})}}[""]()}),function(e){!function(){if(!e.requestAnimationFrame){if(e.webkitRequestAnimationFrame)return e.requestAnimationFrame=e.webkitRequestAnimationFrame,void(e.cancelAnimationFrame=e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame);var t=0;e.requestAnimationFrame=function(n){var r=(new Date).getTime(),i=Math.max(0,16-(r-t)),o=e.setTimeout(function(){n(r+i)},i);return t=r+i,o},e.cancelAnimationFrame=function(e){clearTimeout(e)}}}(),"function"==typeof define&&define("requestAnimationFrame",[],function(){return e.requestAnimationFrame})}(window),define("macrolib/commands",["requestAnimationFrame","macros","utils","state","passages","engine","internaltypes/twineerror","datatypes/hookset","utils/operationutils"],function(e,t,n,r,i,o,a,s,u){function c(e){return"("+e+" "+o.options.ifid+") "}var l=n.toJSLiteral,f=n.unescape,p=u.printBuiltinValue,d=t.TypeSignature,h=d.Any,m=d.rest,g=d.optional,y=!!localStorage&&function(){try{return localStorage.setItem("test","1"),localStorage.removeItem("test"),!0}catch(e){return!1}}();t.add("display",function(e,t){return{TwineScript_ObjectName:"a (display: "+l(t)+") command",TwineScript_TypeName:"a (display:) command",TwineScript_Print:function(){return i.has(t)?f(i.get(t).get("source")):a.create("macrocall","I can't (display:) the passage '"+t+"' because it doesn't exist.")}}},[String])("print",function(e,t){return{TwineScript_ObjectName:"a (print:) command",TwineScript_TypeName:"a (print:) command",TwineScript_Print:function(){return p(t)}}},[h])("show",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];return{TwineScript_ObjectName:"a (show:) command",TwineScript_TypeName:"a (show:) command",TwineScript_Print:function(){return n.forEach(function(t){return t.forEach(e,function(t){var n=t.data("hiddenSource");return void 0===n?a.create("operation","I can't reveal a hook which is already visible."):void e.renderInto(n,t)})}),""}}},[m(s)])("goto",function(t,n){return{TwineScript_ObjectName:"a (go-to: "+l(n)+") command",TwineScript_TypeName:"a (go-to:) command",TwineScript_Print:function(){return i.has(n)?(e(function(){return o.goToPassage(n)}),{earlyExit:1}):a.create("macrocall","I can't (go-to:) the passage '"+n+"' because it doesn't exist.")}}},[String])("goto-transition",function(t,n,r){return{TwineScript_ObjectName:"a (goto-transition: "+l(n)+","+l(r)+") command",TwineScript_TypeName:"a (goto-transition:) command",TwineScript_Print:function(){return i.has(n)?(e(function(){return o.goToPassage(n,{transitionIn:r,transitionOut:r})}),{earlyExit:1}):a.create("macrocall","I can't (goto-transition:) the passage '"+r+"' because it doesn't exist.")}}},[String,String])("undo",function(){return{TwineScript_ObjectName:"a (undo:) command",TwineScript_TypeName:"a (undo:) command",TwineScript_Print:function(){return r.pastLength<1?a.create("macrocall","I can't (undo:) on the first turn."):(e(function(){return o.goBack()}),{earlyExit:1})}}},[])("live",function(e,t){return{TwineScript_ObjectName:"a (live: "+t+") command",TwineScript_TypeName:"a (live:) command",live:!0,delay:t}},[g(Number)])("stop",function(){return{TwineScript_ObjectName:"a (stop:) command",TwineScript_TypeName:"a (stop:) command",TwineScript_Print:function(){return""}}},[])("savegame",function(e,t,n){if(n=n||"",!y)return!1;var i=r.serialise();if(a.containsError(i))return i;try{return localStorage.setItem(c("Saved Game")+t,i),localStorage.setItem(c("Saved Game Filename")+t,n),!0}catch(e){return!1}},[String,g(String)])("loadgame",function(t,n){return{TwineScript_ObjectName:"a (load-game:) command",TwineScript_TypeName:"a (load-game:) command",TwineScript_Print:function(){var t=localStorage.getItem(c("Saved Game")+n);return t?(r.deserialise(t),e(o.showPassage.bind(o,r.passage,!1)),{earlyExit:1}):a.create("saving","I can't find a save slot named '"+n+"'!")}}},[String])("alert",function(e,t){return{TwineScript_ObjectName:"an (alert:) command",TwineScript_TypeName:"an (alert:) command",TwineScript_Print:function(){return window.alert(t),""}}},[String])("prompt",function(e,t,n){return window.prompt(t,n)||""},[String,String])("confirm",function(e,t){return window.confirm(t)},[String])("openURL",function(e,t){return{TwineScript_ObjectName:"an (open-url:) command",TwineScript_TypeName:"an (open-url:) command",TwineScript_Print:function(){return window.open(t,""),""}}},[String])("reload",function(){return{TwineScript_ObjectName:"a (reload:) command",TwineScript_TypeName:"a (reload:) command",TwineScript_Print:function(){return r.pastLength<1?a.create("infinite","I mustn't (reload:) the page in the starting passage."):(window.location.reload(),{earlyExit:1})}}},[])("gotoURL",function(e,t){return{TwineScript_ObjectName:"a (goto-url:) command",TwineScript_TypeName:"a (goto-url:) command",TwineScript_Print:function(){return window.location.assign(t),{earlyExit:1}}}},[String])("pageURL",function(){return window.location.href},[])}),define("macrolib/datastructures",["jquery","utils/naturalsort","macros","utils/operationutils","state","engine","passages","datatypes/lambda","datatypes/assignmentrequest","internaltypes/twineerror","internaltypes/twinenotifier"],function(e,t,n,r,i,o,a,s,u,c,l){var f=r.objectName,p=(r.typeName,r.subset),d=r.collectionType,h=r.isValidDatamapName,m=r.is,g=r.unique,y=r.clone,v=n.TypeSignature,b=v.optional,w=v.rest,x=v.either,T=v.zeroOrMore,S=v.Any;n.add("set",function(){for(var e="",t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1){var n=arguments.length<=t+1?void 0:arguments[t+1];if("into"===n.operator)return c.create("macrocall","Please say 'to' when using the (set:) macro.");var r=void 0;if(n.src&&n.src.varref){var i=n.src.get(),a=void 0;if(a=c.containsError(i))return a;r=n.dest.set(i)}else r=n.dest.set(n.src);if(c.isPrototypeOf(r))return r;o.options.debug&&(e+=(e?"; ":"")+f(n.dest)+" is now "+f(n.src))}return{TwineScript_TypeName:"a (set:) operation",TwineScript_ObjectName:"a (set:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return e&&l.create(e).render()}}},[w(u)])("put",function(){for(var e="",t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1){var n=arguments.length<=t+1?void 0:arguments[t+1];if("into"!==n.operator)return c.create("macrocall","Please say 'into' when using the (put:) macro.");var r=n.dest.set(n.src);if(c.isPrototypeOf(r))return r;o.options.debug&&(e+=(e?"; ":"")+f(n.dest)+" is now "+f(n.src))}return{TwineScript_TypeName:"a (put:) operation",TwineScript_ObjectName:"a (put:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return e&&l.create(e).render()}}},[w(u)])("move",function(){for(var e="",t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1){var n=arguments.length<=t+1?void 0:arguments[t+1];if("into"!==n.operator)return c.create("macrocall","Please say 'into' when using the (move:) macro.");var r=void 0,i=void 0;if(n.src&&n.src.varref){var a=n.src.get();if(i=c.containsError(a))return i;if(r=n.dest.set(a),i=c.containsError(r))return i;n.src.delete()}else if(r=n.dest.set(n.src),i=c.containsError(r))return i;o.options.debug&&(e+=(e?"; ":"")+f(n.dest)+" is now "+f(n.src))}return{TwineScript_TypeName:"a (move:) operation",TwineScript_ObjectName:"a (move:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return e&&l.create(e).render()}}},[w(u)])(["a","array"],function(){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;e>n;n++)t[n-1]=arguments[n];return t},T(S))("range",function e(t,n,r){if(n>r)return e(t,r,n);var i=[n];for(r-=n;r-->0;)i.push(++n);return i},[parseInt,parseInt])("subarray",function(e,t,n,r){return p(t,n,r)},[Array,parseInt,parseInt])("shuffled",function(){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;e>n;n++)t[n-1]=arguments[n];return t.reduce(function(e,t,n){var r=Math.random()*(n+1)|0;return r===n?e.push(t):(e.push(e[r]),e[r]=t),e},[]).map(y)},[S,w(S)])("sorted",function(){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];return n.sort(t("en"))},[x(Number,String),w(x(Number,String))])("rotated",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];return t*=-1,0===t?c.create("macrocall","I can't rotate these values by 0 positions."):Math.abs(t)>=r.length?c.create("macrocall","I can't rotate these "+r.length+" values by "+t+" positions."):r.slice(t).concat(r.slice(0,t)).map(y)},[parseInt,S,w(S)])("repeated",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];if(0>=t)return c.create("macrocall","I can't repeat these values "+t+" times.");for(var o=[];t-->0;)o.push.apply(o,r);return o.map(y)},[parseInt,w(S)])("interlaced",function(){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;e>n;n++)t[n-1]=arguments[n];for(var r=Math.min.apply(Math,_toConsumableArray(t.map(function(e){return e.length}))),i=[],o=0;r>o;o+=1)for(var a=0;a<t.length;a+=1)i.push(y(t[a][o]));return i},[Array,w(Array)]),n.add("altered",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];return r.map(function(n){return t.apply(e,{loop:n})})},[s.TypeSignature("via"),w(S)])("find",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];return t.filter(e,r)},[s.TypeSignature("where"),w(S)])("all-pass",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];var o=t.filter(e,r);return c.containsError(o)||o.length===r.length},[s.TypeSignature("where"),w(S)])("some-pass",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];var o=t.filter(e,r);return c.containsError(o)||o.length>0},[s.TypeSignature("where"),w(S)])("none-pass",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];var o=t.filter(e,r);return c.containsError(o)||0===o.length},[s.TypeSignature("where"),w(S)])("folded",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];return"where"in t&&(r=t.filter(e,r)),c.containsError(r)||r.reduce(function(n,r){return t.apply(e,{making:n,loop:r})})},[x(s.TypeSignature("where via making"),s.TypeSignature("via making")),w(S)]),n.add("datanames",function(e,n){return Array.from(n.keys()).sort(t("en"))},[Map])("datavalues",function(e,n){return Array.from(n.entries()).sort(function(e,n){return[e[0],n[0]].sort(t("en"))[0]===e[0]?-1:1}).map(function(e){return y(e[1])})},[Map])("dataentries",function(e,n){return Array.from(n.entries()).sort(function(e,n){return[e[0],n[0]].sort(t("en"))[0]===e[0]?-1:1}).map(function(e){return new Map([["name",e[0]],["value",y(e[1])]])})},[Map])("history",function(){return i.pastPassageNames()},[])("passage",function(e,t){return y(a.get(t||i.passage))||c.create("macrocall","There's no passage named '"+t+"' in this story.")},[b(String)])("savedgames",function(){function e(e){return"("+e+" "+o.options.ifid+") "}var t=0,n=void 0,r=new Map;do{n=localStorage.key(t),t+=1;var i=e("Saved Game");n&&n.startsWith(i)&&(n=n.slice(i.length),r.set(n,localStorage.getItem(e("Saved Game Filename")+n)))}while(n);return r},[])(["datamap","dm"],function(){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;e>n;n++)t[n-1]=arguments[n];var r=void 0,i=new Map,o=t.reduce(function(e,t){var n=void 0;if(c.containsError(e))return e;if(void 0===r)r=t;else{if(n=c.containsError(h(i,r)))return n;if(i.has(r))return c.create("macrocall","You used the same data name ("+f(r)+") twice in the same (datamap:) call.");i.set(r,y(t)),r=void 0}return e},!0);return c.containsError(o)?o:void 0!==r?c.create("macrocall","This datamap has a data name without a value."):i},T(S))(["dataset","ds"],function(){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;e>n;n++)t[n-1]=arguments[n];return new Set(t.filter(g).map(y))},T(S))("count",function e(t,n){for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;r>o;o++)i[o-2]=arguments[o];if(i.length>1){var a=void 0,s=i.map(function(r){return e(t,n,r)});return(a=c.containsError(s))?a:s.reduce(function(e,t){return e+t},0)}var u=i[0];switch(d(n)){case"dataset":case"datamap":return c.create("macrocall","(count:) shouldn't be given a datamap or dataset.","You should use the 'contains' operator instead. For instance, write: $variable contains 'value'.");case"string":return"string"!=typeof u?c.create("macrocall",f(n)+" can't contain  "+f(u)+" because it isn't a string."):u?n.split(u).length-1:0;case"array":return n.reduce(function(e,t){return e+m(t,u)},0);default:return c.create("macrocall",f(n)+" can't contain values, let alone "+f(u)+".")}},[S,w(S)])}),define("macrolib/stylechangers",["jquery","macros","utils","utils/selectors","datatypes/colour","datatypes/changercommand","datatypes/lambda","internaltypes/changedescriptor","internaltypes/twineerror"],function(e,t,n,r,i,o,a,s,u){var c=t.TypeSignature,l=c.either,f=c.wrapped,p=c.rest,d=c.Any,h=[f(Boolean,'If you gave a number, you may instead want to check that the number is not 0. If you gave a string, you may instead want to check that the string is not "".')];e(function(){return e(n.storyElement).on("mouseenter.hover-macro","[hover=false]",function(){var t=e(this),n=t.data("hoverChanger");t.data({mouseoutStyle:t.attr("style")||""}),s.create({target:t},n).update(),t.attr("hover",!0)}).on("mouseleave.hover-macro","[hover=true]",function(){var t=e(this),n=t.data("mouseoutStyle");t.attr("style",n).removeData("mouseoutStyle").attr("hover",!1)})});var m=["dissolve","shudder","pulse"];t.addChanger("if",function(e,t){return o.create("if",[t])},function(e,t){return e.enabled=e.enabled&&t},h)("unless",function(e,t){return o.create("unless",[!t])},function(e,t){return e.enabled=e.enabled&&t},h)("elseif",function(e,t){return"lastHookShown"in e.stack[0]?o.create("elseif",[e.stack[0].lastHookShown===!1&&!!t]):u.create("macrocall","There's no (if:) or something else before this to do (else-if:) with.")},function(e,t){return e.enabled=e.enabled&&t},h)("else",function(e){return"lastHookShown"in e.stack[0]?o.create("else",[e.stack[0].lastHookShown===!1]):u.create("macrocall","There's nothing before this to do (else:) with.")},function(e,t){return e.enabled=e.enabled&&t},null)("hidden",function(){return o.create("hidden")},function(e){return e.enabled=!1},null)("hook",function(e,t){return o.create("hook",[t])},function(e,t){return e.attr.push({name:t})},[String])(["for","loop"],function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];return t.loop?o.create("for",[t,r]):u.create("macrocall","The lambda provided to (for:) must refer to a temp variable, not just 'it'.")},function(e,t,n){return e.loopVars[t.loop]=t.filter(e.section,n)},[a.TypeSignature("where"),p(d)])(["transition","t8n"],function(e,t){return t=n.insensitiveName(t),-1===m.indexOf(t)?u.create("macrocall","'"+t+"' is not a valid (transition:)","Only the following names are recognised (capitalisation and hyphens ignored): "+m.join(", ")):o.create("transition",[t])},function(e,t){return e.transition=t,e},[String])(["transition-time","t8n-time"],function(e,t){return 0>=t?u.create("macrocall","(transition-time:) should be a positive number of (milli)seconds, not "+t):o.create("transition-time",[t])},function(e,t){return e.transitionTime=t,e},[Number])("font",function(e,t){return o.create("font",[t])},function(e,t){return e.styles.push({"font-family":t}),e},[String])("align",function(e,t){var n=void 0,r=t.indexOf("><");if(!/^(==+>|<=+|=+><=+|<==+>)$/.test(t))return u.create("macrocall",'The (align:) macro requires an alignment arrow ("==>", "<==", "==><=" etc.) be provided, not "'+t+'"');if(~r){var i=Math.round(r/(t.length-2)*50);n=Object.assign({"text-align":"center","max-width":"50%"},25===i?{"margin-left":"auto","margin-right":"auto"}:{"margin-left":i+"%"})}else n="<"===t[0]&&">"===t.slice(-1)?{"text-align":"justify","max-width":"50%"}:t.includes(">")?{"text-align":"right"}:{"text-align":"left"};return n.display="block",o.create("align",[n])},function(e,t){e.styles.push(t)},[String])(["text-colour","text-color","color","colour"],function(e,t){return i.isPrototypeOf(t)&&(t=t.toRGBAString(t)),o.create("text-colour",[t])},function(e,t){return e.styles.push({color:t}),e},[l(String,i)])("text-rotate",function(e,t){return o.create("text-rotate",[t])},function(t,n){return t.styles.push({display:"inline-block",transform:function(){var t=e(this).css("transform")||"";return"none"===t&&(t=""),t+" rotate("+n+"deg)"}}),t},[Number])("background",function(e,t){return i.isPrototypeOf(t)&&(t=t.toRGBAString(t)),o.create("background",[t])},function(t,r){var o=void 0;return o=i.isHexString(r)||i.isCSS3Function(r)?{"background-color":r}:{"background-size":"cover","background-image":"url("+r+")"},t.styles.push(o,{display:function(){return n.childrenProbablyInline(e(this))?"initial":"block"}}),t},[l(String,i)]).apply(void 0,_toConsumableArray(function(){var t={color:"transparent"},r=Object.assign(Object.create(null),{none:{},bold:{"font-weight":"bold"},italic:{"font-style":"italic"},underline:{"text-decoration":"underline"},strike:{"text-decoration":"line-through"},superscript:{"vertical-align":"super","font-size":".83em"},subscript:{"vertical-align":"sub","font-size":".83em"},blink:{animation:"fade-in-out 1s steps(1,end) infinite alternate"},shudder:{animation:"shudder linear 0.1s 0s infinite",display:"inline-block"},mark:{"background-color":"hsla(60, 100%, 50%, 0.6)"},condense:{"letter-spacing":"-0.08em"},expand:{"letter-spacing":"0.1em"},outline:[{"text-shadow":function(){var t=e(this).css("color");return"-1px -1px 0 "+t+", 1px -1px 0 "+t+",-1px  1px 0 "+t+", 1px  1px 0 "+t}},{color:function(){for(var t=e(this);t.length&&t[0]!==document;t=t.parent()){var n=t.css("background-color");if("transparent"!==n&&!n.match(/^\w+a\(.+?,\s*0\s*\)$/))return n}return"#fff"}}],shadow:{"text-shadow":function(){return"0.08em 0.08em 0.08em "+e(this).css("color")}},emboss:{"text-shadow":function(){return"0.08em 0.08em 0em "+e(this).css("color")}},smear:[{"text-shadow":function(){var t=e(this).css("color");return"0em   0em 0.02em "+t+",-0.2em 0em  0.5em "+t+", 0.2em 0em  0.5em "+t}},t],blur:[{"text-shadow":function(){return"0em 0em 0.08em "+e(this).css("color")}},t],blurrier:[{"text-shadow":function(){return"0em 0em 0.2em "+e(this).css("color")},"user-select":"none"},t],mirror:{display:"inline-block",transform:"scaleX(-1)"},upsidedown:{display:"inline-block",transform:"scaleY(-1)"},fadeinout:{animation:"fade-in-out 2s ease-in-out infinite alternate"},rumble:{animation:"rumble linear 0.1s 0s infinite",display:"inline-block"}});return["text-style",function(e,t){return t=n.insensitiveName(t),t in r?o.create("text-style",[t]):u.create("macrocall","'"+t+"' is not a valid (text-style:)","Only the following names are recognised (capitalisation and hyphens ignored): "+Object.keys(r).join(", "))},function(e,t){return n.assertMustHave(r,[t]),e.styles="none"===t?[]:e.styles.concat(r[t]),e}]}()).concat([[String]]))("hover-style",function(e,t){var n=s.create(),r=(t.run(n),n.summary());return r+""=="styles"||r.every(function(e){return"styles"===e||"attr"===e})&&n.attr.every(function(e){return Object.keys(e)+""=="style"})?o.create("hover-style",[t]):u.create("macrocall","The changer given to (hover-style:) must only change the hook's style.")},function(e,t){return e.data.hoverChanger=t,e.attr.push({hover:!1}),e},[o])("css",function(e,t){return t.trim().endsWith(";")||(t+=";"),o.create("css",[t])},function(t,n){return t.attr.push({
style:function(){return(e(this).attr("style")||"")+n}}),t},[String])}),define("internaltypes/enchantment",["jquery","utils","internaltypes/changedescriptor"],function(e,t,n){var r={create:function(n){return t.assertOnlyHas(n,["scope","section","attr","data","changer","functions"]),Object.assign(Object.create(this),{enchantments:e()},n)},enchantScope:function(){var r=this,i=this.attr,o=this.data,a=this.functions,s=this.section,u=this.changer,c=this.scope;c instanceof e&&(c=Array.prototype.map.call(c,function(t){return e(t)})),this.enchantments=e(),c.forEach(s,function(e){var c=e.wrapAll("<tw-enchantment>").parent();if(i&&c.attr(i),o&&c.data(o),a&&a.forEach(function(e){return e(c)}),u){var l=n.create({section:s,target:c});if(u.run(l),l.update(),e.is(t.storyElement)){var f=Object.keys(Object.assign.apply(Object,[{}].concat(_toConsumableArray(l.styles))));e.css(f.reduce(function(e,t){return e[t]="inherit",e},{})),c.data({enchantedProperties:f})}}e.is(t.storyElement)&&c.css({width:"100%",height:"100%"}),r.enchantments=r.enchantments.add(c)})},disenchant:function(){this.enchantments.each(function(){var n=e(this).contents();n.unwrap();var r=e(this).data("enchantedProperties");r&&n.has(t.storyElement)&&t.storyElement.css(r.reduce(function(e,t){return e[t]="",e},{}))})}};return Object.freeze(r)}),define("macrolib/enchantments",["jquery","utils","utils/selectors","utils/operationutils","macros","datatypes/hookset","datatypes/changercommand","internaltypes/enchantment","internaltypes/twineerror"],function(e,t,n,r,i,o,a,s,u){function c(n,r){return e(function(){t.storyElement.on(n.event+".enchantment","."+n.classList.replace(/ /g,"."),function(){var t=e(this),n=t.data("enchantmentEvent");n&&n(t)})}),[function(){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;e>n;n++)t[n-1]=arguments[n];return t.every(Boolean)?a.create(r,t.map(o.from)):u.create("datatype","A string given to this ("+r+":) macro was empty.")},function(e,t){e.enabled=!1,n.rerender&&(e.newTargets=(e.newTargets||[]).concat({target:t,append:n.rerender}));var r=s.create({functions:[function(e){e.attr("class",e.children().is("tw-story, tw-sidebar, tw-passage")?n.blockClassList:n.classList)}],attr:(n.classList+"").match(/\b(?:link|enchantment-clickblock)\b/)?{tabIndex:"0"}:{},data:{enchantmentEvent:function(){if(n.once){var t=e.section.enchantments.indexOf(r);e.section.enchantments.splice(t,1),r.disenchant()}e.section.renderInto(e.source,null,Object.assign({},e,{enabled:!0}))}},scope:t,section:e.section});return e.section.enchantments.push(r),r.enchantScope(),e},p(o,String)]}var l=r.is,f=i.TypeSignature,p=f.either,d=f.rest;i.add("enchant",function(e,t,n){return{TwineScript_ObjectName:"an (enchant:) command",TwineScript_TypeName:"an (enchant:) command",TwineScript_Print:function(){var r=n.summary();if(r.includes("newTargets")||r.includes("target"))return u.create("macrocall","The changer given to (enchant:) can't include a revision command like (replace:) or (append:).");var i=s.create({scope:o.from(t),changer:n,section:e});return e.enchantments.push(i),i.enchantScope(),""}}},[p(o,String),a]);var h=["replace","append","prepend"];h.forEach(function(t){i.addChanger(t,function(){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];return n.every(Boolean)?a.create(t,n.map(o.from)):u.create("datatype","A string given to this ("+t+":) macro was empty.")},function(n){for(var r,i=arguments.length,o=Array(i>1?i-1:0),a=1;i>a;a++)o[a-1]=arguments[a];var s=e(n.target).parents().filter("tw-collapsed").length>0;return s||(n.attr=[].concat(_toConsumableArray(n.attr),[{collapsing:!1}])),n.newTargets=n.newTargets||[],(r=n.newTargets).push.apply(r,_toConsumableArray(o.filter(function(e){return!n.newTargets.some(function(n){var r=n.target,i=n.append;return l(e,r)&&t===i})}).map(function(e){return{target:e,append:t}}))),n},d(p(o,String)))}),e(function(){t.storyElement.on("click.enchantment",function(){Array.from(e(this).parents(".enchantment-clickblock")).sort(function(e,t){return 8&e.compareDocumentPosition(t)?1:-1}).forEach(function(t){var n=e(t).data("enchantmentEvent");n&&n()})})});var m=[{name:"click",enchantDesc:{event:"click",once:!0,rerender:"",classList:"link enchantment-link",blockClassList:"enchantment-clickblock"}},{name:"mouseover",enchantDesc:{event:"mouseenter",once:!0,rerender:"",classList:"enchantment-mouseover"}},{name:"mouseout",enchantDesc:{event:"mouseleave",once:!0,rerender:"",classList:"enchantment-mouseout"}}];m.forEach(function(e){return i.addChanger.apply(i,[e.name].concat(_toConsumableArray(c(e.enchantDesc,e.name))))}),h.forEach(function(e){m.forEach(function(t){var n=Object.assign({},t.enchantDesc,{rerender:e}),r=t.name+"-"+e;i.addChanger.apply(i,[r].concat(_toConsumableArray(c(n,r))))})})}),define("macrolib/links",["jquery","macros","utils","utils/selectors","state","passages","engine","datatypes/changercommand","internaltypes/twineerror"],function(e,t,n,r,i,o,a,s,u){var c=t.TypeSignature.optional,l="Links can't have empty strings for their displayed text.";e(function(){return e(n.storyElement).on("click.passage-link",r.internalLink,function(){var t=e(this),n=t.parent().data("clickEvent");if(n)return void n(t);var r=t.attr("passage-name");return r?void a.goToPassage(r,!1):t.is("[undo]")?void a.goBack():void 0})}),[["link","link-replace"],["link-reveal"],["link-repeat"]].forEach(function(e){return t.addChanger(e,function(t,n){return n?s.create(e[0],[n]):u.create("macrocall",l)},function(t,n){t.innerSource||(t.innerSource=t.source),t.source="<tw-link tabindex=0>"+n+"</tw-link>",t.append="link"===e[0]?"replace":"append",t.data.clickEvent=function(n){t.source=t.innerSource,t.section.renderInto(t.innerSource+"",null,t),"link-reveal"===e[0]&&n.contents().unwrap()}},[String])}),t.add(["link-goto"],function(t,r,a){return r?{TwineScript_TypeName:"a (link-goto: "+n.toJSLiteral(r)+", "+n.toJSLiteral(a)+") command",TwineScript_ObjectName:"a (link-goto:) command",TwineScript_Print:function(){var s=t.evaluateTwineMarkup(n.unescape(a||r));if(s instanceof e)return s;if(!o.has(s))return'<tw-broken-link passage-name="'+n.escape(s)+'">'+(r||a)+"</tw-broken-link>";var u=i.passageNameVisited(s);return"<tw-link tabindex=0 "+(u>0?'class="visited" ':"")+'passage-name="'+n.escape(s)+'">'+(r||a)+"</tw-link>"}}:u.create("macrocall",l)},[String,c(String)])("link-undo",function(e,t){return t?{TwineScript_ObjectName:"a (link-undo:"+n.toJSLiteral(t)+") command",TwineScript_TypeName:"a (link-undo:) command",TwineScript_Print:function(){return i.pastLength<1?u.create("macrocall","I can't use (link-undo:) on the first turn."):"<tw-link tabindex=0 undo>"+t+"</tw-link>"}}:u.create("macrocall",l)},[String])}),define("repl",["utils","markup","twinescript/compiler","twinescript/environ"],function(e,t,n,r){window.REPL=function(e){var i=n(t.lex("(print:"+e+")"));console.log(i);var o=r({}).eval(i);return o.TwineScript_Print?o.TwineScript_Print():o},window.LEX=function(e){var n=t.lex(e);return 1===n.length?n[0]:n}}),require.config({paths:{jquery:"../node_modules/jquery/dist/jquery",almond:"../node_modules/almond/almond","es6-shim":"../node_modules/es6-shim/es6-shim",requestAnimationFrame:"../node_modules/requestanimationframe/app/requestAnimationFrame",jqueryplugins:"utils/jqueryplugins",markup:"./markup/markup",lexer:"./markup/lexer",patterns:"./markup/patterns"},deps:["jquery","es6-shim","jqueryplugins"]}),require(["jquery","debugmode","renderer","state","engine","passages","utils/selectors","macros","macrolib/values","macrolib/commands","macrolib/datastructures","macrolib/stylechangers","macrolib/enchantments","macrolib/links","repl"],function($,DebugMode,Renderer,State,Engine,Passages,Selectors){function _eval(text){return eval(text+"")}var _installHandlers=function(){var e=$(document.documentElement);e.on("keydown",function(e){13===e.which&&"0"===e.target.getAttribute("tabindex")&&$(e.target).trigger("click")}),Engine.options.debug&&DebugMode(),_installHandlers=null};!function(e){window.onerror=function(t,n,r,i,o){var a=o&&o.stack&&"\n"+o.stack.replace(/\([^\)]+\)/g,"")+"\n"||"("+t+")\n";alert("Sorry to interrupt, but this page's code has got itself in a mess. "+a+"(This is probably due to a bug in the Harlowe game engine.)"),window.onerror=e,"function"==typeof e&&e.apply(void 0,arguments)}}(window.onerror),$(function(){var e=$(Selectors.storyData);if(0!==e.length){var t=e.attr("options");t&&t.split(/\s/).forEach(function(e){Renderer.options[e]=Engine.options[e]=!0});var n=e.attr("startnode");return Renderer.options.ifid=Engine.options.ifid=e.attr("ifid"),n||(n=[].reduce.call($(Selectors.passageData),function(e,t){var n=t.getAttribute("pid");return e>n?n:e},1/0)),n=$(Selectors.passageData+"[pid="+n+"]").attr("name"),_installHandlers(),$(Selectors.script).each(function(e){try{_eval($(this).html())}catch(t){alert("There is a problem with this story's script (#"+(e+1)+"):\n\n"+t.message)}}),$(Selectors.stylesheet).each(function(e){$(document.head).append('<style data-title="Story stylesheet '+(e+1)+'">'+$(this).html())}),window.location.hash&&!window.location.hash.includes("stories")&&State.load(window.location.hash)?void Engine.showPassage(State.passage):void Engine.goToPassage(n)}})}),define("harlowe",function(){}),require(["harlowe"])}();</script>


</body>
</html>
